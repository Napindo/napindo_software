"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const I=require("electron"),Ot=require("fs"),md=require("constants"),Kr=require("stream"),$a=require("util"),Kl=require("assert"),le=require("path"),ti=require("child_process"),Ql=require("events"),Qr=require("crypto"),Zl=require("tty"),ri=require("os"),Rt=require("url"),gd=require("string_decoder"),ec=require("zlib"),yd=require("http"),pa=require("node:fs"),V=require("node:path"),wd=require("node:url"),Xt=require("node:fs/promises");var Ni=typeof document<"u"?document.currentScript:null,Ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},it={},qt={},Le={};Le.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,n)=>{t.push((i,a)=>i!=null?n(i):r(a)),e.apply(this,t)})},"name",{value:e.name})};Le.fromPromise=function(e){return Object.defineProperty(function(...t){const r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(n=>r(null,n),r)},"name",{value:e.name})};var gt=md,Ed=process.cwd,Mn=null,vd=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Mn||(Mn=Ed.call(process)),Mn};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var Fo=process.chdir;process.chdir=function(e){Mn=null,Fo.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Fo)}var _d=bd;function bd(e){gt.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=a(e.chown),e.fchown=a(e.fchown),e.lchown=a(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=o(e.chownSync),e.fchownSync=o(e.fchownSync),e.lchownSync=o(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=s(e.stat),e.fstat=s(e.fstat),e.lstat=s(e.lstat),e.statSync=l(e.statSync),e.fstatSync=l(e.fstatSync),e.lstatSync=l(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(c,f,d){d&&process.nextTick(d)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(c,f,d,g){g&&process.nextTick(g)},e.lchownSync=function(){}),vd==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(c){function f(d,g,E){var w=Date.now(),b=0;c(d,g,function T(S){if(S&&(S.code==="EACCES"||S.code==="EPERM"||S.code==="EBUSY")&&Date.now()-w<6e4){setTimeout(function(){e.stat(g,function(N,L){N&&N.code==="ENOENT"?c(d,g,T):E(S)})},b),b<100&&(b+=10);return}E&&E(S)})}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(e.rename)),e.read=typeof e.read!="function"?e.read:function(c){function f(d,g,E,w,b,T){var S;if(T&&typeof T=="function"){var N=0;S=function(L,ae,fe){if(L&&L.code==="EAGAIN"&&N<10)return N++,c.call(e,d,g,E,w,b,S);T.apply(this,arguments)}}return c.call(e,d,g,E,w,b,S)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(c){return function(f,d,g,E,w){for(var b=0;;)try{return c.call(e,f,d,g,E,w)}catch(T){if(T.code==="EAGAIN"&&b<10){b++;continue}throw T}}}(e.readSync);function t(c){c.lchmod=function(f,d,g){c.open(f,gt.O_WRONLY|gt.O_SYMLINK,d,function(E,w){if(E){g&&g(E);return}c.fchmod(w,d,function(b){c.close(w,function(T){g&&g(b||T)})})})},c.lchmodSync=function(f,d){var g=c.openSync(f,gt.O_WRONLY|gt.O_SYMLINK,d),E=!0,w;try{w=c.fchmodSync(g,d),E=!1}finally{if(E)try{c.closeSync(g)}catch{}else c.closeSync(g)}return w}}function r(c){gt.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(f,d,g,E){c.open(f,gt.O_SYMLINK,function(w,b){if(w){E&&E(w);return}c.futimes(b,d,g,function(T){c.close(b,function(S){E&&E(T||S)})})})},c.lutimesSync=function(f,d,g){var E=c.openSync(f,gt.O_SYMLINK),w,b=!0;try{w=c.futimesSync(E,d,g),b=!1}finally{if(b)try{c.closeSync(E)}catch{}else c.closeSync(E)}return w}):c.futimes&&(c.lutimes=function(f,d,g,E){E&&process.nextTick(E)},c.lutimesSync=function(){})}function n(c){return c&&function(f,d,g){return c.call(e,f,d,function(E){p(E)&&(E=null),g&&g.apply(this,arguments)})}}function i(c){return c&&function(f,d){try{return c.call(e,f,d)}catch(g){if(!p(g))throw g}}}function a(c){return c&&function(f,d,g,E){return c.call(e,f,d,g,function(w){p(w)&&(w=null),E&&E.apply(this,arguments)})}}function o(c){return c&&function(f,d,g){try{return c.call(e,f,d,g)}catch(E){if(!p(E))throw E}}}function s(c){return c&&function(f,d,g){typeof d=="function"&&(g=d,d=null);function E(w,b){b&&(b.uid<0&&(b.uid+=4294967296),b.gid<0&&(b.gid+=4294967296)),g&&g.apply(this,arguments)}return d?c.call(e,f,d,E):c.call(e,f,E)}}function l(c){return c&&function(f,d){var g=d?c.call(e,f,d):c.call(e,f);return g&&(g.uid<0&&(g.uid+=4294967296),g.gid<0&&(g.gid+=4294967296)),g}}function p(c){if(!c||c.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(c.code==="EINVAL"||c.code==="EPERM"))}}var Lo=Kr.Stream,Sd=Td;function Td(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);Lo.call(this);var a=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var o=Object.keys(i),s=0,l=o.length;s<l;s++){var p=o[s];this[p]=i[p]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){a._read()});return}e.open(this.path,this.flags,this.mode,function(c,f){if(c){a.emit("error",c),a.readable=!1;return}a.fd=f,a.emit("open",f),a._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);Lo.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var a=Object.keys(i),o=0,s=a.length;o<s;o++){var l=a[o];this[l]=i[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}var Ad=Od,Cd=Object.getPrototypeOf||function(e){return e.__proto__};function Od(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:Cd(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}var se=Ot,Rd=_d,Pd=Sd,xd=Ad,bn=$a,Ae,Hn;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Ae=Symbol.for("graceful-fs.queue"),Hn=Symbol.for("graceful-fs.previous")):(Ae="___graceful-fs.queue",Hn="___graceful-fs.previous");function Id(){}function tc(e,t){Object.defineProperty(e,Ae,{get:function(){return t}})}var jt=Id;bn.debuglog?jt=bn.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(jt=function(){var e=bn.format.apply(bn,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});if(!se[Ae]){var $d=Ne[Ae]||[];tc(se,$d),se.close=function(e){function t(r,n){return e.call(se,r,function(i){i||Uo(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,Hn,{value:e}),t}(se.close),se.closeSync=function(e){function t(r){e.apply(se,arguments),Uo()}return Object.defineProperty(t,Hn,{value:e}),t}(se.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){jt(se[Ae]),Kl.equal(se[Ae].length,0)})}Ne[Ae]||tc(Ne,se[Ae]);var Ue=Na(xd(se));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!se.__patched&&(Ue=Na(se),se.__patched=!0);function Na(e){Rd(e),e.gracefulify=Na,e.createReadStream=ae,e.createWriteStream=fe;var t=e.readFile;e.readFile=r;function r(y,q,j){return typeof q=="function"&&(j=q,q=null),B(y,q,j);function B(Q,P,O,$){return t(Q,P,function(C){C&&(C.code==="EMFILE"||C.code==="ENFILE")?Jt([B,[Q,P,O],C,$||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(y,q,j,B){return typeof j=="function"&&(B=j,j=null),Q(y,q,j,B);function Q(P,O,$,C,D){return n(P,O,$,function(x){x&&(x.code==="EMFILE"||x.code==="ENFILE")?Jt([Q,[P,O,$,C],x,D||Date.now(),Date.now()]):typeof C=="function"&&C.apply(this,arguments)})}}var a=e.appendFile;a&&(e.appendFile=o);function o(y,q,j,B){return typeof j=="function"&&(B=j,j=null),Q(y,q,j,B);function Q(P,O,$,C,D){return a(P,O,$,function(x){x&&(x.code==="EMFILE"||x.code==="ENFILE")?Jt([Q,[P,O,$,C],x,D||Date.now(),Date.now()]):typeof C=="function"&&C.apply(this,arguments)})}}var s=e.copyFile;s&&(e.copyFile=l);function l(y,q,j,B){return typeof j=="function"&&(B=j,j=0),Q(y,q,j,B);function Q(P,O,$,C,D){return s(P,O,$,function(x){x&&(x.code==="EMFILE"||x.code==="ENFILE")?Jt([Q,[P,O,$,C],x,D||Date.now(),Date.now()]):typeof C=="function"&&C.apply(this,arguments)})}}var p=e.readdir;e.readdir=f;var c=/^v[0-5]\./;function f(y,q,j){typeof q=="function"&&(j=q,q=null);var B=c.test(process.version)?function(O,$,C,D){return p(O,Q(O,$,C,D))}:function(O,$,C,D){return p(O,$,Q(O,$,C,D))};return B(y,q,j);function Q(P,O,$,C){return function(D,x){D&&(D.code==="EMFILE"||D.code==="ENFILE")?Jt([B,[P,O,$],D,C||Date.now(),Date.now()]):(x&&x.sort&&x.sort(),typeof $=="function"&&$.call(this,D,x))}}}if(process.version.substr(0,4)==="v0.8"){var d=Pd(e);T=d.ReadStream,N=d.WriteStream}var g=e.ReadStream;g&&(T.prototype=Object.create(g.prototype),T.prototype.open=S);var E=e.WriteStream;E&&(N.prototype=Object.create(E.prototype),N.prototype.open=L),Object.defineProperty(e,"ReadStream",{get:function(){return T},set:function(y){T=y},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return N},set:function(y){N=y},enumerable:!0,configurable:!0});var w=T;Object.defineProperty(e,"FileReadStream",{get:function(){return w},set:function(y){w=y},enumerable:!0,configurable:!0});var b=N;Object.defineProperty(e,"FileWriteStream",{get:function(){return b},set:function(y){b=y},enumerable:!0,configurable:!0});function T(y,q){return this instanceof T?(g.apply(this,arguments),this):T.apply(Object.create(T.prototype),arguments)}function S(){var y=this;Ge(y.path,y.flags,y.mode,function(q,j){q?(y.autoClose&&y.destroy(),y.emit("error",q)):(y.fd=j,y.emit("open",j),y.read())})}function N(y,q){return this instanceof N?(E.apply(this,arguments),this):N.apply(Object.create(N.prototype),arguments)}function L(){var y=this;Ge(y.path,y.flags,y.mode,function(q,j){q?(y.destroy(),y.emit("error",q)):(y.fd=j,y.emit("open",j))})}function ae(y,q){return new e.ReadStream(y,q)}function fe(y,q){return new e.WriteStream(y,q)}var z=e.open;e.open=Ge;function Ge(y,q,j,B){return typeof j=="function"&&(B=j,j=null),Q(y,q,j,B);function Q(P,O,$,C,D){return z(P,O,$,function(x,M){x&&(x.code==="EMFILE"||x.code==="ENFILE")?Jt([Q,[P,O,$,C],x,D||Date.now(),Date.now()]):typeof C=="function"&&C.apply(this,arguments)})}}return e}function Jt(e){jt("ENQUEUE",e[0].name,e[1]),se[Ae].push(e),Da()}var Sn;function Uo(){for(var e=Date.now(),t=0;t<se[Ae].length;++t)se[Ae][t].length>2&&(se[Ae][t][3]=e,se[Ae][t][4]=e);Da()}function Da(){if(clearTimeout(Sn),Sn=void 0,se[Ae].length!==0){var e=se[Ae].shift(),t=e[0],r=e[1],n=e[2],i=e[3],a=e[4];if(i===void 0)jt("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){jt("TIMEOUT",t.name,r);var o=r.pop();typeof o=="function"&&o.call(null,n)}else{var s=Date.now()-a,l=Math.max(a-i,1),p=Math.min(l*1.2,100);s>=p?(jt("RETRY",t.name,r),t.apply(null,r.concat([i]))):se[Ae].push(e)}Sn===void 0&&(Sn=setTimeout(Da,0))}}(function(e){const t=Le.fromCallback,r=Ue,n=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(i=>typeof r[i]=="function");Object.assign(e,r),n.forEach(i=>{e[i]=t(r[i])}),e.exists=function(i,a){return typeof a=="function"?r.exists(i,a):new Promise(o=>r.exists(i,o))},e.read=function(i,a,o,s,l,p){return typeof p=="function"?r.read(i,a,o,s,l,p):new Promise((c,f)=>{r.read(i,a,o,s,l,(d,g,E)=>{if(d)return f(d);c({bytesRead:g,buffer:E})})})},e.write=function(i,a,...o){return typeof o[o.length-1]=="function"?r.write(i,a,...o):new Promise((s,l)=>{r.write(i,a,...o,(p,c,f)=>{if(p)return l(p);s({bytesWritten:c,buffer:f})})})},typeof r.writev=="function"&&(e.writev=function(i,a,...o){return typeof o[o.length-1]=="function"?r.writev(i,a,...o):new Promise((s,l)=>{r.writev(i,a,...o,(p,c,f)=>{if(p)return l(p);s({bytesWritten:c,buffers:f})})})}),typeof r.realpath.native=="function"?e.realpath.native=t(r.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(qt);var Fa={},rc={};const Nd=le;rc.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(Nd.parse(t).root,""))){const n=new Error(`Path contains invalid characters: ${t}`);throw n.code="EINVAL",n}};const nc=qt,{checkPath:ic}=rc,ac=e=>{const t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};Fa.makeDir=async(e,t)=>(ic(e),nc.mkdir(e,{mode:ac(t),recursive:!0}));Fa.makeDirSync=(e,t)=>(ic(e),nc.mkdirSync(e,{mode:ac(t),recursive:!0}));const Dd=Le.fromPromise,{makeDir:Fd,makeDirSync:Di}=Fa,Fi=Dd(Fd);var st={mkdirs:Fi,mkdirsSync:Di,mkdirp:Fi,mkdirpSync:Di,ensureDir:Fi,ensureDirSync:Di};const Ld=Le.fromPromise,oc=qt;function Ud(e){return oc.access(e).then(()=>!0).catch(()=>!1)}var Wt={pathExists:Ld(Ud),pathExistsSync:oc.existsSync};const ur=Ue;function kd(e,t,r,n){ur.open(e,"r+",(i,a)=>{if(i)return n(i);ur.futimes(a,t,r,o=>{ur.close(a,s=>{n&&n(o||s)})})})}function Md(e,t,r){const n=ur.openSync(e,"r+");return ur.futimesSync(n,t,r),ur.closeSync(n)}var sc={utimesMillis:kd,utimesMillisSync:Md};const dr=qt,_e=le,Bd=$a;function jd(e,t,r){const n=r.dereference?i=>dr.stat(i,{bigint:!0}):i=>dr.lstat(i,{bigint:!0});return Promise.all([n(e),n(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,a])=>({srcStat:i,destStat:a}))}function Gd(e,t,r){let n;const i=r.dereference?o=>dr.statSync(o,{bigint:!0}):o=>dr.lstatSync(o,{bigint:!0}),a=i(e);try{n=i(t)}catch(o){if(o.code==="ENOENT")return{srcStat:a,destStat:null};throw o}return{srcStat:a,destStat:n}}function Hd(e,t,r,n,i){Bd.callbackify(jd)(e,t,n,(a,o)=>{if(a)return i(a);const{srcStat:s,destStat:l}=o;if(l){if(Zr(s,l)){const p=_e.basename(e),c=_e.basename(t);return r==="move"&&p!==c&&p.toLowerCase()===c.toLowerCase()?i(null,{srcStat:s,destStat:l,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(s.isDirectory()&&!l.isDirectory())return i(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!s.isDirectory()&&l.isDirectory())return i(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return s.isDirectory()&&La(e,t)?i(new Error(ni(e,t,r))):i(null,{srcStat:s,destStat:l})})}function qd(e,t,r,n){const{srcStat:i,destStat:a}=Gd(e,t,n);if(a){if(Zr(i,a)){const o=_e.basename(e),s=_e.basename(t);if(r==="move"&&o!==s&&o.toLowerCase()===s.toLowerCase())return{srcStat:i,destStat:a,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!a.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&a.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&La(e,t))throw new Error(ni(e,t,r));return{srcStat:i,destStat:a}}function lc(e,t,r,n,i){const a=_e.resolve(_e.dirname(e)),o=_e.resolve(_e.dirname(r));if(o===a||o===_e.parse(o).root)return i();dr.stat(o,{bigint:!0},(s,l)=>s?s.code==="ENOENT"?i():i(s):Zr(t,l)?i(new Error(ni(e,r,n))):lc(e,t,o,n,i))}function cc(e,t,r,n){const i=_e.resolve(_e.dirname(e)),a=_e.resolve(_e.dirname(r));if(a===i||a===_e.parse(a).root)return;let o;try{o=dr.statSync(a,{bigint:!0})}catch(s){if(s.code==="ENOENT")return;throw s}if(Zr(t,o))throw new Error(ni(e,r,n));return cc(e,t,a,n)}function Zr(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function La(e,t){const r=_e.resolve(e).split(_e.sep).filter(i=>i),n=_e.resolve(t).split(_e.sep).filter(i=>i);return r.reduce((i,a,o)=>i&&n[o]===a,!0)}function ni(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}var gr={checkPaths:Hd,checkPathsSync:qd,checkParentPaths:lc,checkParentPathsSync:cc,isSrcSubdir:La,areIdentical:Zr};const Be=Ue,Lr=le,Wd=st.mkdirs,Vd=Wt.pathExists,Yd=sc.utimesMillis,Ur=gr;function zd(e,t,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),Ur.checkPaths(e,t,"copy",r,(i,a)=>{if(i)return n(i);const{srcStat:o,destStat:s}=a;Ur.checkParentPaths(e,o,t,"copy",l=>l?n(l):r.filter?uc(ko,s,e,t,r,n):ko(s,e,t,r,n))})}function ko(e,t,r,n,i){const a=Lr.dirname(r);Vd(a,(o,s)=>{if(o)return i(o);if(s)return qn(e,t,r,n,i);Wd(a,l=>l?i(l):qn(e,t,r,n,i))})}function uc(e,t,r,n,i,a){Promise.resolve(i.filter(r,n)).then(o=>o?e(t,r,n,i,a):a(),o=>a(o))}function Xd(e,t,r,n,i){return n.filter?uc(qn,e,t,r,n,i):qn(e,t,r,n,i)}function qn(e,t,r,n,i){(n.dereference?Be.stat:Be.lstat)(t,(o,s)=>o?i(o):s.isDirectory()?rh(s,e,t,r,n,i):s.isFile()||s.isCharacterDevice()||s.isBlockDevice()?Jd(s,e,t,r,n,i):s.isSymbolicLink()?ah(e,t,r,n,i):s.isSocket()?i(new Error(`Cannot copy a socket file: ${t}`)):s.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${t}`)):i(new Error(`Unknown file: ${t}`)))}function Jd(e,t,r,n,i,a){return t?Kd(e,r,n,i,a):fc(e,r,n,i,a)}function Kd(e,t,r,n,i){if(n.overwrite)Be.unlink(r,a=>a?i(a):fc(e,t,r,n,i));else return n.errorOnExist?i(new Error(`'${r}' already exists`)):i()}function fc(e,t,r,n,i){Be.copyFile(t,r,a=>a?i(a):n.preserveTimestamps?Qd(e.mode,t,r,i):ii(r,e.mode,i))}function Qd(e,t,r,n){return Zd(e)?eh(r,e,i=>i?n(i):Mo(e,t,r,n)):Mo(e,t,r,n)}function Zd(e){return(e&128)===0}function eh(e,t,r){return ii(e,t|128,r)}function Mo(e,t,r,n){th(t,r,i=>i?n(i):ii(r,e,n))}function ii(e,t,r){return Be.chmod(e,t,r)}function th(e,t,r){Be.stat(e,(n,i)=>n?r(n):Yd(t,i.atime,i.mtime,r))}function rh(e,t,r,n,i,a){return t?dc(r,n,i,a):nh(e.mode,r,n,i,a)}function nh(e,t,r,n,i){Be.mkdir(r,a=>{if(a)return i(a);dc(t,r,n,o=>o?i(o):ii(r,e,i))})}function dc(e,t,r,n){Be.readdir(e,(i,a)=>i?n(i):hc(a,e,t,r,n))}function hc(e,t,r,n,i){const a=e.pop();return a?ih(e,a,t,r,n,i):i()}function ih(e,t,r,n,i,a){const o=Lr.join(r,t),s=Lr.join(n,t);Ur.checkPaths(o,s,"copy",i,(l,p)=>{if(l)return a(l);const{destStat:c}=p;Xd(c,o,s,i,f=>f?a(f):hc(e,r,n,i,a))})}function ah(e,t,r,n,i){Be.readlink(t,(a,o)=>{if(a)return i(a);if(n.dereference&&(o=Lr.resolve(process.cwd(),o)),e)Be.readlink(r,(s,l)=>s?s.code==="EINVAL"||s.code==="UNKNOWN"?Be.symlink(o,r,i):i(s):(n.dereference&&(l=Lr.resolve(process.cwd(),l)),Ur.isSrcSubdir(o,l)?i(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${l}'.`)):e.isDirectory()&&Ur.isSrcSubdir(l,o)?i(new Error(`Cannot overwrite '${l}' with '${o}'.`)):oh(o,r,i)));else return Be.symlink(o,r,i)})}function oh(e,t,r){Be.unlink(t,n=>n?r(n):Be.symlink(e,t,r))}var sh=zd;const Pe=Ue,kr=le,lh=st.mkdirsSync,ch=sc.utimesMillisSync,Mr=gr;function uh(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:n,destStat:i}=Mr.checkPathsSync(e,t,"copy",r);return Mr.checkParentPathsSync(e,n,t,"copy"),fh(i,e,t,r)}function fh(e,t,r,n){if(n.filter&&!n.filter(t,r))return;const i=kr.dirname(r);return Pe.existsSync(i)||lh(i),pc(e,t,r,n)}function dh(e,t,r,n){if(!(n.filter&&!n.filter(t,r)))return pc(e,t,r,n)}function pc(e,t,r,n){const a=(n.dereference?Pe.statSync:Pe.lstatSync)(t);if(a.isDirectory())return Eh(a,e,t,r,n);if(a.isFile()||a.isCharacterDevice()||a.isBlockDevice())return hh(a,e,t,r,n);if(a.isSymbolicLink())return bh(e,t,r,n);throw a.isSocket()?new Error(`Cannot copy a socket file: ${t}`):a.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function hh(e,t,r,n,i){return t?ph(e,r,n,i):mc(e,r,n,i)}function ph(e,t,r,n){if(n.overwrite)return Pe.unlinkSync(r),mc(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function mc(e,t,r,n){return Pe.copyFileSync(t,r),n.preserveTimestamps&&mh(e.mode,t,r),Ua(r,e.mode)}function mh(e,t,r){return gh(e)&&yh(r,e),wh(t,r)}function gh(e){return(e&128)===0}function yh(e,t){return Ua(e,t|128)}function Ua(e,t){return Pe.chmodSync(e,t)}function wh(e,t){const r=Pe.statSync(e);return ch(t,r.atime,r.mtime)}function Eh(e,t,r,n,i){return t?gc(r,n,i):vh(e.mode,r,n,i)}function vh(e,t,r,n){return Pe.mkdirSync(r),gc(t,r,n),Ua(r,e)}function gc(e,t,r){Pe.readdirSync(e).forEach(n=>_h(n,e,t,r))}function _h(e,t,r,n){const i=kr.join(t,e),a=kr.join(r,e),{destStat:o}=Mr.checkPathsSync(i,a,"copy",n);return dh(o,i,a,n)}function bh(e,t,r,n){let i=Pe.readlinkSync(t);if(n.dereference&&(i=kr.resolve(process.cwd(),i)),e){let a;try{a=Pe.readlinkSync(r)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return Pe.symlinkSync(i,r);throw o}if(n.dereference&&(a=kr.resolve(process.cwd(),a)),Mr.isSrcSubdir(i,a))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${a}'.`);if(Pe.statSync(r).isDirectory()&&Mr.isSrcSubdir(a,i))throw new Error(`Cannot overwrite '${a}' with '${i}'.`);return Sh(i,r)}else return Pe.symlinkSync(i,r)}function Sh(e,t){return Pe.unlinkSync(t),Pe.symlinkSync(e,t)}var Th=uh;const Ah=Le.fromCallback;var ka={copy:Ah(sh),copySync:Th};const Bo=Ue,yc=le,ee=Kl,Br=process.platform==="win32";function wc(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||Bo[r],r=r+"Sync",e[r]=e[r]||Bo[r]}),e.maxBusyTries=e.maxBusyTries||3}function Ma(e,t,r){let n=0;typeof t=="function"&&(r=t,t={}),ee(e,"rimraf: missing path"),ee.strictEqual(typeof e,"string","rimraf: path should be a string"),ee.strictEqual(typeof r,"function","rimraf: callback function required"),ee(t,"rimraf: invalid options argument provided"),ee.strictEqual(typeof t,"object","rimraf: options should be object"),wc(t),jo(e,t,function i(a){if(a){if((a.code==="EBUSY"||a.code==="ENOTEMPTY"||a.code==="EPERM")&&n<t.maxBusyTries){n++;const o=n*100;return setTimeout(()=>jo(e,t,i),o)}a.code==="ENOENT"&&(a=null)}r(a)})}function jo(e,t,r){ee(e),ee(t),ee(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&Br)return Go(e,t,n,r);if(i&&i.isDirectory())return Bn(e,t,n,r);t.unlink(e,a=>{if(a){if(a.code==="ENOENT")return r(null);if(a.code==="EPERM")return Br?Go(e,t,a,r):Bn(e,t,a,r);if(a.code==="EISDIR")return Bn(e,t,a,r)}return r(a)})})}function Go(e,t,r,n){ee(e),ee(t),ee(typeof n=="function"),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(a,o)=>{a?n(a.code==="ENOENT"?null:r):o.isDirectory()?Bn(e,t,r,n):t.unlink(e,n)})})}function Ho(e,t,r){let n;ee(e),ee(t);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?jn(e,t,r):t.unlinkSync(e)}function Bn(e,t,r,n){ee(e),ee(t),ee(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?Ch(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})}function Ch(e,t,r){ee(e),ee(t),ee(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let a=i.length,o;if(a===0)return t.rmdir(e,r);i.forEach(s=>{Ma(yc.join(e,s),t,l=>{if(!o){if(l)return r(o=l);--a===0&&t.rmdir(e,r)}})})})}function Ec(e,t){let r;t=t||{},wc(t),ee(e,"rimraf: missing path"),ee.strictEqual(typeof e,"string","rimraf: path should be a string"),ee(t,"rimraf: missing options"),ee.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&Br&&Ho(e,t,n)}try{r&&r.isDirectory()?jn(e,t,null):t.unlinkSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return Br?Ho(e,t,n):jn(e,t,n);if(n.code!=="EISDIR")throw n;jn(e,t,n)}}function jn(e,t,r){ee(e),ee(t);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")Oh(e,t);else if(n.code!=="ENOENT")throw n}}function Oh(e,t){if(ee(e),ee(t),t.readdirSync(e).forEach(r=>Ec(yc.join(e,r),t)),Br){const r=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-r<500)}else return t.rmdirSync(e,t)}var Rh=Ma;Ma.sync=Ec;const Wn=Ue,Ph=Le.fromCallback,vc=Rh;function xh(e,t){if(Wn.rm)return Wn.rm(e,{recursive:!0,force:!0},t);vc(e,t)}function Ih(e){if(Wn.rmSync)return Wn.rmSync(e,{recursive:!0,force:!0});vc.sync(e)}var ai={remove:Ph(xh),removeSync:Ih};const $h=Le.fromPromise,_c=qt,bc=le,Sc=st,Tc=ai,qo=$h(async function(t){let r;try{r=await _c.readdir(t)}catch{return Sc.mkdirs(t)}return Promise.all(r.map(n=>Tc.remove(bc.join(t,n))))});function Wo(e){let t;try{t=_c.readdirSync(e)}catch{return Sc.mkdirsSync(e)}t.forEach(r=>{r=bc.join(e,r),Tc.removeSync(r)})}var Nh={emptyDirSync:Wo,emptydirSync:Wo,emptyDir:qo,emptydir:qo};const Dh=Le.fromCallback,Ac=le,Et=Ue,Cc=st;function Fh(e,t){function r(){Et.writeFile(e,"",n=>{if(n)return t(n);t()})}Et.stat(e,(n,i)=>{if(!n&&i.isFile())return t();const a=Ac.dirname(e);Et.stat(a,(o,s)=>{if(o)return o.code==="ENOENT"?Cc.mkdirs(a,l=>{if(l)return t(l);r()}):t(o);s.isDirectory()?r():Et.readdir(a,l=>{if(l)return t(l)})})})}function Lh(e){let t;try{t=Et.statSync(e)}catch{}if(t&&t.isFile())return;const r=Ac.dirname(e);try{Et.statSync(r).isDirectory()||Et.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")Cc.mkdirsSync(r);else throw n}Et.writeFileSync(e,"")}var Uh={createFile:Dh(Fh),createFileSync:Lh};const kh=Le.fromCallback,Oc=le,wt=Ue,Rc=st,Mh=Wt.pathExists,{areIdentical:Pc}=gr;function Bh(e,t,r){function n(i,a){wt.link(i,a,o=>{if(o)return r(o);r(null)})}wt.lstat(t,(i,a)=>{wt.lstat(e,(o,s)=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),r(o);if(a&&Pc(s,a))return r(null);const l=Oc.dirname(t);Mh(l,(p,c)=>{if(p)return r(p);if(c)return n(e,t);Rc.mkdirs(l,f=>{if(f)return r(f);n(e,t)})})})})}function jh(e,t){let r;try{r=wt.lstatSync(t)}catch{}try{const a=wt.lstatSync(e);if(r&&Pc(a,r))return}catch(a){throw a.message=a.message.replace("lstat","ensureLink"),a}const n=Oc.dirname(t);return wt.existsSync(n)||Rc.mkdirsSync(n),wt.linkSync(e,t)}var Gh={createLink:kh(Bh),createLinkSync:jh};const vt=le,$r=Ue,Hh=Wt.pathExists;function qh(e,t,r){if(vt.isAbsolute(e))return $r.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:e,toDst:e}));{const n=vt.dirname(t),i=vt.join(n,e);return Hh(i,(a,o)=>a?r(a):o?r(null,{toCwd:i,toDst:e}):$r.lstat(e,s=>s?(s.message=s.message.replace("lstat","ensureSymlink"),r(s)):r(null,{toCwd:e,toDst:vt.relative(n,e)})))}}function Wh(e,t){let r;if(vt.isAbsolute(e)){if(r=$r.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{const n=vt.dirname(t),i=vt.join(n,e);if(r=$r.existsSync(i),r)return{toCwd:i,toDst:e};if(r=$r.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:vt.relative(n,e)}}}var Vh={symlinkPaths:qh,symlinkPathsSync:Wh};const xc=Ue;function Yh(e,t,r){if(r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,t)return r(null,t);xc.lstat(e,(n,i)=>{if(n)return r(null,"file");t=i&&i.isDirectory()?"dir":"file",r(null,t)})}function zh(e,t){let r;if(t)return t;try{r=xc.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}var Xh={symlinkType:Yh,symlinkTypeSync:zh};const Jh=Le.fromCallback,Ic=le,Ke=qt,$c=st,Kh=$c.mkdirs,Qh=$c.mkdirsSync,Nc=Vh,Zh=Nc.symlinkPaths,ep=Nc.symlinkPathsSync,Dc=Xh,tp=Dc.symlinkType,rp=Dc.symlinkTypeSync,np=Wt.pathExists,{areIdentical:Fc}=gr;function ip(e,t,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,Ke.lstat(t,(i,a)=>{!i&&a.isSymbolicLink()?Promise.all([Ke.stat(e),Ke.stat(t)]).then(([o,s])=>{if(Fc(o,s))return n(null);Vo(e,t,r,n)}):Vo(e,t,r,n)})}function Vo(e,t,r,n){Zh(e,t,(i,a)=>{if(i)return n(i);e=a.toDst,tp(a.toCwd,r,(o,s)=>{if(o)return n(o);const l=Ic.dirname(t);np(l,(p,c)=>{if(p)return n(p);if(c)return Ke.symlink(e,t,s,n);Kh(l,f=>{if(f)return n(f);Ke.symlink(e,t,s,n)})})})})}function ap(e,t,r){let n;try{n=Ke.lstatSync(t)}catch{}if(n&&n.isSymbolicLink()){const s=Ke.statSync(e),l=Ke.statSync(t);if(Fc(s,l))return}const i=ep(e,t);e=i.toDst,r=rp(i.toCwd,r);const a=Ic.dirname(t);return Ke.existsSync(a)||Qh(a),Ke.symlinkSync(e,t,r)}var op={createSymlink:Jh(ip),createSymlinkSync:ap};const{createFile:Yo,createFileSync:zo}=Uh,{createLink:Xo,createLinkSync:Jo}=Gh,{createSymlink:Ko,createSymlinkSync:Qo}=op;var sp={createFile:Yo,createFileSync:zo,ensureFile:Yo,ensureFileSync:zo,createLink:Xo,createLinkSync:Jo,ensureLink:Xo,ensureLinkSync:Jo,createSymlink:Ko,createSymlinkSync:Qo,ensureSymlink:Ko,ensureSymlinkSync:Qo};function lp(e,{EOL:t=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){const a=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+a}function cp(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}var Ba={stringify:lp,stripBom:cp};let hr;try{hr=Ue}catch{hr=Ot}const oi=Le,{stringify:Lc,stripBom:Uc}=Ba;async function up(e,t={}){typeof t=="string"&&(t={encoding:t});const r=t.fs||hr,n="throws"in t?t.throws:!0;let i=await oi.fromCallback(r.readFile)(e,t);i=Uc(i);let a;try{a=JSON.parse(i,t?t.reviver:null)}catch(o){if(n)throw o.message=`${e}: ${o.message}`,o;return null}return a}const fp=oi.fromPromise(up);function dp(e,t={}){typeof t=="string"&&(t={encoding:t});const r=t.fs||hr,n="throws"in t?t.throws:!0;try{let i=r.readFileSync(e,t);return i=Uc(i),JSON.parse(i,t.reviver)}catch(i){if(n)throw i.message=`${e}: ${i.message}`,i;return null}}async function hp(e,t,r={}){const n=r.fs||hr,i=Lc(t,r);await oi.fromCallback(n.writeFile)(e,i,r)}const pp=oi.fromPromise(hp);function mp(e,t,r={}){const n=r.fs||hr,i=Lc(t,r);return n.writeFileSync(e,i,r)}var gp={readFile:fp,readFileSync:dp,writeFile:pp,writeFileSync:mp};const Tn=gp;var yp={readJson:Tn.readFile,readJsonSync:Tn.readFileSync,writeJson:Tn.writeFile,writeJsonSync:Tn.writeFileSync};const wp=Le.fromCallback,Nr=Ue,kc=le,Mc=st,Ep=Wt.pathExists;function vp(e,t,r,n){typeof r=="function"&&(n=r,r="utf8");const i=kc.dirname(e);Ep(i,(a,o)=>{if(a)return n(a);if(o)return Nr.writeFile(e,t,r,n);Mc.mkdirs(i,s=>{if(s)return n(s);Nr.writeFile(e,t,r,n)})})}function _p(e,...t){const r=kc.dirname(e);if(Nr.existsSync(r))return Nr.writeFileSync(e,...t);Mc.mkdirsSync(r),Nr.writeFileSync(e,...t)}var ja={outputFile:wp(vp),outputFileSync:_p};const{stringify:bp}=Ba,{outputFile:Sp}=ja;async function Tp(e,t,r={}){const n=bp(t,r);await Sp(e,n,r)}var Ap=Tp;const{stringify:Cp}=Ba,{outputFileSync:Op}=ja;function Rp(e,t,r){const n=Cp(t,r);Op(e,n,r)}var Pp=Rp;const xp=Le.fromPromise,Fe=yp;Fe.outputJson=xp(Ap);Fe.outputJsonSync=Pp;Fe.outputJSON=Fe.outputJson;Fe.outputJSONSync=Fe.outputJsonSync;Fe.writeJSON=Fe.writeJson;Fe.writeJSONSync=Fe.writeJsonSync;Fe.readJSON=Fe.readJson;Fe.readJSONSync=Fe.readJsonSync;var Ip=Fe;const $p=Ue,ma=le,Np=ka.copy,Bc=ai.remove,Dp=st.mkdirp,Fp=Wt.pathExists,Zo=gr;function Lp(e,t,r,n){typeof r=="function"&&(n=r,r={}),r=r||{};const i=r.overwrite||r.clobber||!1;Zo.checkPaths(e,t,"move",r,(a,o)=>{if(a)return n(a);const{srcStat:s,isChangingCase:l=!1}=o;Zo.checkParentPaths(e,s,t,"move",p=>{if(p)return n(p);if(Up(t))return es(e,t,i,l,n);Dp(ma.dirname(t),c=>c?n(c):es(e,t,i,l,n))})})}function Up(e){const t=ma.dirname(e);return ma.parse(t).root===t}function es(e,t,r,n,i){if(n)return Li(e,t,r,i);if(r)return Bc(t,a=>a?i(a):Li(e,t,r,i));Fp(t,(a,o)=>a?i(a):o?i(new Error("dest already exists.")):Li(e,t,r,i))}function Li(e,t,r,n){$p.rename(e,t,i=>i?i.code!=="EXDEV"?n(i):kp(e,t,r,n):n())}function kp(e,t,r,n){Np(e,t,{overwrite:r,errorOnExist:!0},a=>a?n(a):Bc(e,n))}var Mp=Lp;const jc=Ue,ga=le,Bp=ka.copySync,Gc=ai.removeSync,jp=st.mkdirpSync,ts=gr;function Gp(e,t,r){r=r||{};const n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:a=!1}=ts.checkPathsSync(e,t,"move",r);return ts.checkParentPathsSync(e,i,t,"move"),Hp(t)||jp(ga.dirname(t)),qp(e,t,n,a)}function Hp(e){const t=ga.dirname(e);return ga.parse(t).root===t}function qp(e,t,r,n){if(n)return Ui(e,t,r);if(r)return Gc(t),Ui(e,t,r);if(jc.existsSync(t))throw new Error("dest already exists.");return Ui(e,t,r)}function Ui(e,t,r){try{jc.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return Wp(e,t,r)}}function Wp(e,t,r){return Bp(e,t,{overwrite:r,errorOnExist:!0}),Gc(e)}var Vp=Gp;const Yp=Le.fromCallback;var zp={move:Yp(Mp),moveSync:Vp},Pt={...qt,...ka,...Nh,...sp,...Ip,...st,...zp,...ja,...Wt,...ai},Vt={},bt={},we={},St={};Object.defineProperty(St,"__esModule",{value:!0});St.CancellationError=St.CancellationToken=void 0;const Xp=Ql;class Jp extends Xp.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(t){this.removeParentCancelHandler(),this._parent=t,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(t){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,t!=null&&(this.parent=t)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(t){this.cancelled?t():this.once("cancel",t)}createPromise(t){if(this.cancelled)return Promise.reject(new ya);const r=()=>{if(n!=null)try{this.removeListener("cancel",n),n=null}catch{}};let n=null;return new Promise((i,a)=>{let o=null;if(n=()=>{try{o!=null&&(o(),o=null)}finally{a(new ya)}},this.cancelled){n();return}this.onCancel(n),t(i,a,s=>{o=s})}).then(i=>(r(),i)).catch(i=>{throw r(),i})}removeParentCancelHandler(){const t=this._parent;t!=null&&this.parentCancelHandler!=null&&(t.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}}St.CancellationToken=Jp;class ya extends Error{constructor(){super("cancelled")}}St.CancellationError=ya;var yr={};Object.defineProperty(yr,"__esModule",{value:!0});yr.newError=Kp;function Kp(e,t){const r=new Error(e);return r.code=t,r}var De={},wa={exports:{}},An={exports:{}},ki,rs;function Qp(){if(rs)return ki;rs=1;var e=1e3,t=e*60,r=t*60,n=r*24,i=n*7,a=n*365.25;ki=function(c,f){f=f||{};var d=typeof c;if(d==="string"&&c.length>0)return o(c);if(d==="number"&&isFinite(c))return f.long?l(c):s(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function o(c){if(c=String(c),!(c.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(f){var d=parseFloat(f[1]),g=(f[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return d*a;case"weeks":case"week":case"w":return d*i;case"days":case"day":case"d":return d*n;case"hours":case"hour":case"hrs":case"hr":case"h":return d*r;case"minutes":case"minute":case"mins":case"min":case"m":return d*t;case"seconds":case"second":case"secs":case"sec":case"s":return d*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function s(c){var f=Math.abs(c);return f>=n?Math.round(c/n)+"d":f>=r?Math.round(c/r)+"h":f>=t?Math.round(c/t)+"m":f>=e?Math.round(c/e)+"s":c+"ms"}function l(c){var f=Math.abs(c);return f>=n?p(c,f,n,"day"):f>=r?p(c,f,r,"hour"):f>=t?p(c,f,t,"minute"):f>=e?p(c,f,e,"second"):c+" ms"}function p(c,f,d,g){var E=f>=d*1.5;return Math.round(c/d)+" "+g+(E?"s":"")}return ki}var Mi,ns;function Hc(){if(ns)return Mi;ns=1;function e(t){n.debug=n,n.default=n,n.coerce=p,n.disable=s,n.enable=a,n.enabled=l,n.humanize=Qp(),n.destroy=c,Object.keys(t).forEach(f=>{n[f]=t[f]}),n.names=[],n.skips=[],n.formatters={};function r(f){let d=0;for(let g=0;g<f.length;g++)d=(d<<5)-d+f.charCodeAt(g),d|=0;return n.colors[Math.abs(d)%n.colors.length]}n.selectColor=r;function n(f){let d,g=null,E,w;function b(...T){if(!b.enabled)return;const S=b,N=Number(new Date),L=N-(d||N);S.diff=L,S.prev=d,S.curr=N,d=N,T[0]=n.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let ae=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(z,Ge)=>{if(z==="%%")return"%";ae++;const y=n.formatters[Ge];if(typeof y=="function"){const q=T[ae];z=y.call(S,q),T.splice(ae,1),ae--}return z}),n.formatArgs.call(S,T),(S.log||n.log).apply(S,T)}return b.namespace=f,b.useColors=n.useColors(),b.color=n.selectColor(f),b.extend=i,b.destroy=n.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(E!==n.namespaces&&(E=n.namespaces,w=n.enabled(f)),w),set:T=>{g=T}}),typeof n.init=="function"&&n.init(b),b}function i(f,d){const g=n(this.namespace+(typeof d>"u"?":":d)+f);return g.log=this.log,g}function a(f){n.save(f),n.namespaces=f,n.names=[],n.skips=[];const d=(typeof f=="string"?f:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const g of d)g[0]==="-"?n.skips.push(g.slice(1)):n.names.push(g)}function o(f,d){let g=0,E=0,w=-1,b=0;for(;g<f.length;)if(E<d.length&&(d[E]===f[g]||d[E]==="*"))d[E]==="*"?(w=E,b=g,E++):(g++,E++);else if(w!==-1)E=w+1,b++,g=b;else return!1;for(;E<d.length&&d[E]==="*";)E++;return E===d.length}function s(){const f=[...n.names,...n.skips.map(d=>"-"+d)].join(",");return n.enable(""),f}function l(f){for(const d of n.skips)if(o(f,d))return!1;for(const d of n.names)if(o(f,d))return!0;return!1}function p(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return Mi=e,Mi}var is;function Zp(){return is||(is=1,function(e,t){t.formatArgs=n,t.save=i,t.load=a,t.useColors=r,t.storage=o(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const p="color: "+this.color;l.splice(1,0,p,"color: inherit");let c=0,f=0;l[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(c++,d==="%c"&&(f=c))}),l.splice(f,0,p)}t.log=console.debug||console.log||(()=>{});function i(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function a(){let l;try{l=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}function o(){try{return localStorage}catch{}}e.exports=Hc()(t);const{formatters:s}=e.exports;s.j=function(l){try{return JSON.stringify(l)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}}}(An,An.exports)),An.exports}var Cn={exports:{}},Bi,as;function em(){return as||(as=1,Bi=(e,t=process.argv)=>{const r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return n!==-1&&(i===-1||n<i)}),Bi}var ji,os;function tm(){if(os)return ji;os=1;const e=ri,t=Zl,r=em(),{env:n}=process;let i;r("no-color")||r("no-colors")||r("color=false")||r("color=never")?i=0:(r("color")||r("colors")||r("color=true")||r("color=always"))&&(i=1),"FORCE_COLOR"in n&&(n.FORCE_COLOR==="true"?i=1:n.FORCE_COLOR==="false"?i=0:i=n.FORCE_COLOR.length===0?1:Math.min(parseInt(n.FORCE_COLOR,10),3));function a(l){return l===0?!1:{level:l,hasBasic:!0,has256:l>=2,has16m:l>=3}}function o(l,p){if(i===0)return 0;if(r("color=16m")||r("color=full")||r("color=truecolor"))return 3;if(r("color=256"))return 2;if(l&&!p&&i===void 0)return 0;const c=i||0;if(n.TERM==="dumb")return c;if(process.platform==="win32"){const f=e.release().split(".");return Number(f[0])>=10&&Number(f[2])>=10586?Number(f[2])>=14931?3:2:1}if("CI"in n)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(f=>f in n)||n.CI_NAME==="codeship"?1:c;if("TEAMCITY_VERSION"in n)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(n.TEAMCITY_VERSION)?1:0;if(n.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in n){const f=parseInt((n.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(n.TERM_PROGRAM){case"iTerm.app":return f>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(n.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(n.TERM)||"COLORTERM"in n?1:c}function s(l){const p=o(l,l&&l.isTTY);return a(p)}return ji={supportsColor:s,stdout:a(o(!0,t.isatty(1))),stderr:a(o(!0,t.isatty(2)))},ji}var ss;function rm(){return ss||(ss=1,function(e,t){const r=Zl,n=$a;t.init=c,t.log=s,t.formatArgs=a,t.save=l,t.load=p,t.useColors=i,t.destroy=n.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const d=tm();d&&(d.stderr||d).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}t.inspectOpts=Object.keys(process.env).filter(d=>/^debug_/i.test(d)).reduce((d,g)=>{const E=g.substring(6).toLowerCase().replace(/_([a-z])/g,(b,T)=>T.toUpperCase());let w=process.env[g];return/^(yes|on|true|enabled)$/i.test(w)?w=!0:/^(no|off|false|disabled)$/i.test(w)?w=!1:w==="null"?w=null:w=Number(w),d[E]=w,d},{});function i(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:r.isatty(process.stderr.fd)}function a(d){const{namespace:g,useColors:E}=this;if(E){const w=this.color,b="\x1B[3"+(w<8?w:"8;5;"+w),T=`  ${b};1m${g} \x1B[0m`;d[0]=T+d[0].split(`
`).join(`
`+T),d.push(b+"m+"+e.exports.humanize(this.diff)+"\x1B[0m")}else d[0]=o()+g+" "+d[0]}function o(){return t.inspectOpts.hideDate?"":new Date().toISOString()+" "}function s(...d){return process.stderr.write(n.formatWithOptions(t.inspectOpts,...d)+`
`)}function l(d){d?process.env.DEBUG=d:delete process.env.DEBUG}function p(){return process.env.DEBUG}function c(d){d.inspectOpts={};const g=Object.keys(t.inspectOpts);for(let E=0;E<g.length;E++)d.inspectOpts[g[E]]=t.inspectOpts[g[E]]}e.exports=Hc()(t);const{formatters:f}=e.exports;f.o=function(d){return this.inspectOpts.colors=this.useColors,n.inspect(d,this.inspectOpts).split(`
`).map(g=>g.trim()).join(" ")},f.O=function(d){return this.inspectOpts.colors=this.useColors,n.inspect(d,this.inspectOpts)}}(Cn,Cn.exports)),Cn.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?wa.exports=Zp():wa.exports=rm();var nm=wa.exports,en={};Object.defineProperty(en,"__esModule",{value:!0});en.ProgressCallbackTransform=void 0;const im=Kr;class am extends im.Transform{constructor(t,r,n){super(),this.total=t,this.cancellationToken=r,this.onProgress=n,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(t,r,n){if(this.cancellationToken.cancelled){n(new Error("cancelled"),null);return}this.transferred+=t.length,this.delta+=t.length;const i=Date.now();i>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=i+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((i-this.start)/1e3))}),this.delta=0),n(null,t)}_flush(t){if(this.cancellationToken.cancelled){t(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,t(null)}}en.ProgressCallbackTransform=am;Object.defineProperty(De,"__esModule",{value:!0});De.DigestTransform=De.HttpExecutor=De.HttpError=void 0;De.createHttpError=va;De.parseJson=hm;De.configureRequestOptionsFromUrl=Wc;De.configureRequestUrl=Ha;De.safeGetHeader=fr;De.configureRequestOptions=Vn;De.safeStringifyJson=Yn;const om=Qr,sm=nm,lm=Ot,cm=Kr,Ea=Rt,um=St,ls=yr,fm=en,Lt=(0,sm.default)("electron-builder");function va(e,t=null){return new Ga(e.statusCode||-1,`${e.statusCode} ${e.statusMessage}`+(t==null?"":`
`+JSON.stringify(t,null,"  "))+`
Headers: `+Yn(e.headers),t)}const dm=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class Ga extends Error{constructor(t,r=`HTTP error: ${dm.get(t)||t}`,n=null){super(r),this.statusCode=t,this.description=n,this.name="HttpError",this.code=`HTTP_ERROR_${t}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}De.HttpError=Ga;function hm(e){return e.then(t=>t==null||t.length===0?null:JSON.parse(t))}class nr{constructor(){this.maxRedirects=10}request(t,r=new um.CancellationToken,n){Vn(t);const i=n==null?void 0:JSON.stringify(n),a=i?Buffer.from(i):void 0;if(a!=null){Lt(i);const{headers:o,...s}=t;t={method:"post",headers:{"Content-Type":"application/json","Content-Length":a.length,...o},...s}}return this.doApiRequest(t,r,o=>o.end(a))}doApiRequest(t,r,n,i=0){return Lt.enabled&&Lt(`Request: ${Yn(t)}`),r.createPromise((a,o,s)=>{const l=this.createRequest(t,p=>{try{this.handleResponse(p,t,r,a,o,i,n)}catch(c){o(c)}});this.addErrorAndTimeoutHandlers(l,o,t.timeout),this.addRedirectHandlers(l,t,o,i,p=>{this.doApiRequest(p,r,n,i).then(a).catch(o)}),n(l,o),s(()=>l.abort())})}addRedirectHandlers(t,r,n,i,a){}addErrorAndTimeoutHandlers(t,r,n=60*1e3){this.addTimeOutHandler(t,r,n),t.on("error",r),t.on("aborted",()=>{r(new Error("Request has been aborted by the server"))})}handleResponse(t,r,n,i,a,o,s){var l;if(Lt.enabled&&Lt(`Response: ${t.statusCode} ${t.statusMessage}, request options: ${Yn(r)}`),t.statusCode===404){a(va(t,`method: ${r.method||"GET"} url: ${r.protocol||"https:"}//${r.hostname}${r.port?`:${r.port}`:""}${r.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(t.statusCode===204){i();return}const p=(l=t.statusCode)!==null&&l!==void 0?l:0,c=p>=300&&p<400,f=fr(t,"location");if(c&&f!=null){if(o>this.maxRedirects){a(this.createMaxRedirectError());return}this.doApiRequest(nr.prepareRedirectUrlOptions(f,r),n,s,o).then(i).catch(a);return}t.setEncoding("utf8");let d="";t.on("error",a),t.on("data",g=>d+=g),t.on("end",()=>{try{if(t.statusCode!=null&&t.statusCode>=400){const g=fr(t,"content-type"),E=g!=null&&(Array.isArray(g)?g.find(w=>w.includes("json"))!=null:g.includes("json"));a(va(t,`method: ${r.method||"GET"} url: ${r.protocol||"https:"}//${r.hostname}${r.port?`:${r.port}`:""}${r.path}

          Data:
          ${E?JSON.stringify(JSON.parse(d)):d}
          `))}else i(d.length===0?null:d)}catch(g){a(g)}})}async downloadToBuffer(t,r){return await r.cancellationToken.createPromise((n,i,a)=>{const o=[],s={headers:r.headers||void 0,redirect:"manual"};Ha(t,s),Vn(s),this.doDownload(s,{destination:null,options:r,onCancel:a,callback:l=>{l==null?n(Buffer.concat(o)):i(l)},responseHandler:(l,p)=>{let c=0;l.on("data",f=>{if(c+=f.length,c>524288e3){p(new Error("Maximum allowed size is 500 MB"));return}o.push(f)}),l.on("end",()=>{p(null)})}},0)})}doDownload(t,r,n){const i=this.createRequest(t,a=>{if(a.statusCode>=400){r.callback(new Error(`Cannot download "${t.protocol||"https:"}//${t.hostname}${t.path}", status ${a.statusCode}: ${a.statusMessage}`));return}a.on("error",r.callback);const o=fr(a,"location");if(o!=null){n<this.maxRedirects?this.doDownload(nr.prepareRedirectUrlOptions(o,t),r,n++):r.callback(this.createMaxRedirectError());return}r.responseHandler==null?mm(r,a):r.responseHandler(a,r.callback)});this.addErrorAndTimeoutHandlers(i,r.callback,t.timeout),this.addRedirectHandlers(i,t,r.callback,n,a=>{this.doDownload(a,r,n++)}),i.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(t,r,n){t.on("socket",i=>{i.setTimeout(n,()=>{t.abort(),r(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(t,r){const n=Wc(t,{...r}),i=n.headers;if(i!=null&&i.authorization){const a=nr.reconstructOriginalUrl(r),o=qc(t,r);nr.isCrossOriginRedirect(a,o)&&(Lt.enabled&&Lt(`Given the cross-origin redirect (from ${a.host} to ${o.host}), the Authorization header will be stripped out.`),delete i.authorization)}return n}static reconstructOriginalUrl(t){const r=t.protocol||"https:";if(!t.hostname)throw new Error("Missing hostname in request options");const n=t.hostname,i=t.port?`:${t.port}`:"",a=t.path||"/";return new Ea.URL(`${r}//${n}${i}${a}`)}static isCrossOriginRedirect(t,r){if(t.hostname.toLowerCase()!==r.hostname.toLowerCase())return!0;if(t.protocol==="http:"&&["80",""].includes(t.port)&&r.protocol==="https:"&&["443",""].includes(r.port))return!1;if(t.protocol!==r.protocol)return!0;const n=t.port,i=r.port;return n!==i}static retryOnServerError(t,r=3){for(let n=0;;n++)try{return t()}catch(i){if(n<r&&(i instanceof Ga&&i.isServerError()||i.code==="EPIPE"))continue;throw i}}}De.HttpExecutor=nr;function qc(e,t){try{return new Ea.URL(e)}catch{const r=t.hostname,n=t.protocol||"https:",i=t.port?`:${t.port}`:"",a=`${n}//${r}${i}`;return new Ea.URL(e,a)}}function Wc(e,t){const r=Vn(t),n=qc(e,t);return Ha(n,r),r}function Ha(e,t){t.protocol=e.protocol,t.hostname=e.hostname,e.port?t.port=e.port:t.port&&delete t.port,t.path=e.pathname+e.search}class _a extends cm.Transform{get actual(){return this._actual}constructor(t,r="sha512",n="base64"){super(),this.expected=t,this.algorithm=r,this.encoding=n,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,om.createHash)(r)}_transform(t,r,n){this.digester.update(t),n(null,t)}_flush(t){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(r){t(r);return}t(null)}validate(){if(this._actual==null)throw(0,ls.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,ls.newError)(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}De.DigestTransform=_a;function pm(e,t,r){return e!=null&&t!=null&&e!==t?(r(new Error(`checksum mismatch: expected ${t} but got ${e} (X-Checksum-Sha2 header)`)),!1):!0}function fr(e,t){const r=e.headers[t];return r==null?null:Array.isArray(r)?r.length===0?null:r[r.length-1]:r}function mm(e,t){if(!pm(fr(t,"X-Checksum-Sha2"),e.options.sha2,e.callback))return;const r=[];if(e.options.onProgress!=null){const o=fr(t,"content-length");o!=null&&r.push(new fm.ProgressCallbackTransform(parseInt(o,10),e.options.cancellationToken,e.options.onProgress))}const n=e.options.sha512;n!=null?r.push(new _a(n,"sha512",n.length===128&&!n.includes("+")&&!n.includes("Z")&&!n.includes("=")?"hex":"base64")):e.options.sha2!=null&&r.push(new _a(e.options.sha2,"sha256","hex"));const i=(0,lm.createWriteStream)(e.destination);r.push(i);let a=t;for(const o of r)o.on("error",s=>{i.close(),e.options.cancellationToken.cancelled||e.callback(s)}),a=a.pipe(o);i.on("finish",()=>{i.close(e.callback)})}function Vn(e,t,r){r!=null&&(e.method=r),e.headers={...e.headers};const n=e.headers;return t!=null&&(n.authorization=t.startsWith("Basic")||t.startsWith("Bearer")?t:`token ${t}`),n["User-Agent"]==null&&(n["User-Agent"]="electron-builder"),(r==null||r==="GET"||n["Cache-Control"]==null)&&(n["Cache-Control"]="no-cache"),e.protocol==null&&process.versions.electron!=null&&(e.protocol="https:"),e}function Yn(e,t){return JSON.stringify(e,(r,n)=>r.endsWith("Authorization")||r.endsWith("authorization")||r.endsWith("Password")||r.endsWith("PASSWORD")||r.endsWith("Token")||r.includes("password")||r.includes("token")||t!=null&&t.has(r)?"<stripped sensitive data>":n,2)}var si={};Object.defineProperty(si,"__esModule",{value:!0});si.MemoLazy=void 0;class gm{constructor(t,r){this.selector=t,this.creator=r,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){const t=this.selector();if(this._value!==void 0&&Vc(this.selected,t))return this._value;this.selected=t;const r=this.creator(t);return this.value=r,r}set value(t){this._value=t}}si.MemoLazy=gm;function Vc(e,t){if(typeof e=="object"&&e!==null&&(typeof t=="object"&&t!==null)){const i=Object.keys(e),a=Object.keys(t);return i.length===a.length&&i.every(o=>Vc(e[o],t[o]))}return e===t}var tn={};Object.defineProperty(tn,"__esModule",{value:!0});tn.githubUrl=ym;tn.githubTagPrefix=wm;tn.getS3LikeProviderBaseUrl=Em;function ym(e,t="github.com"){return`${e.protocol||"https"}://${e.host||t}`}function wm(e){var t;return e.tagNamePrefix?e.tagNamePrefix:!((t=e.vPrefixedTagName)!==null&&t!==void 0)||t?"v":""}function Em(e){const t=e.provider;if(t==="s3")return vm(e);if(t==="spaces")return _m(e);throw new Error(`Not supported provider: ${t}`)}function vm(e){let t;if(e.accelerate==!0)t=`https://${e.bucket}.s3-accelerate.amazonaws.com`;else if(e.endpoint!=null)t=`${e.endpoint}/${e.bucket}`;else if(e.bucket.includes(".")){if(e.region==null)throw new Error(`Bucket name "${e.bucket}" includes a dot, but S3 region is missing`);e.region==="us-east-1"?t=`https://s3.amazonaws.com/${e.bucket}`:t=`https://s3-${e.region}.amazonaws.com/${e.bucket}`}else e.region==="cn-north-1"?t=`https://${e.bucket}.s3.${e.region}.amazonaws.com.cn`:t=`https://${e.bucket}.s3.amazonaws.com`;return Yc(t,e.path)}function Yc(e,t){return t!=null&&t.length>0&&(t.startsWith("/")||(e+="/"),e+=t),e}function _m(e){if(e.name==null)throw new Error("name is missing");if(e.region==null)throw new Error("region is missing");return Yc(`https://${e.name}.${e.region}.digitaloceanspaces.com`,e.path)}var qa={};Object.defineProperty(qa,"__esModule",{value:!0});qa.retry=zc;const bm=St;async function zc(e,t){var r;const{retries:n,interval:i,backoff:a=0,attempt:o=0,shouldRetry:s,cancellationToken:l=new bm.CancellationToken}=t;try{return await e()}catch(p){if(await Promise.resolve((r=s==null?void 0:s(p))!==null&&r!==void 0?r:!0)&&n>0&&!l.cancelled)return await new Promise(c=>setTimeout(c,i+a*o)),await zc(e,{...t,retries:n-1,attempt:o+1});throw p}}var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.parseDn=Sm;function Sm(e){let t=!1,r=null,n="",i=0;e=e.trim();const a=new Map;for(let o=0;o<=e.length;o++){if(o===e.length){r!==null&&a.set(r,n);break}const s=e[o];if(t){if(s==='"'){t=!1;continue}}else{if(s==='"'){t=!0;continue}if(s==="\\"){o++;const l=parseInt(e.slice(o,o+2),16);Number.isNaN(l)?n+=e[o]:(o++,n+=String.fromCharCode(l));continue}if(r===null&&s==="="){r=n,n="";continue}if(s===","||s===";"||s==="+"){r!==null&&a.set(r,n),r=null,n="";continue}}if(s===" "&&!t){if(n.length===0)continue;if(o>i){let l=o;for(;e[l]===" ";)l++;i=l}if(i>=e.length||e[i]===","||e[i]===";"||r===null&&e[i]==="="||r!==null&&e[i]==="+"){o=i-1;continue}}n+=s}return a}var pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.nil=pr.UUID=void 0;const Xc=Qr,Jc=yr,Tm="options.name must be either a string or a Buffer",cs=(0,Xc.randomBytes)(16);cs[0]=cs[0]|1;const Gn={},Y=[];for(let e=0;e<256;e++){const t=(e+256).toString(16).substr(1);Gn[t]=e,Y[e]=t}class Ht{constructor(t){this.ascii=null,this.binary=null;const r=Ht.check(t);if(!r)throw new Error("not a UUID");this.version=r.version,r.format==="ascii"?this.ascii=t:this.binary=t}static v5(t,r){return Am(t,"sha1",80,r)}toString(){return this.ascii==null&&(this.ascii=Cm(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(t,r=0){if(typeof t=="string")return t=t.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(t)?t==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(Gn[t[14]+t[15]]&240)>>4,variant:us((Gn[t[19]+t[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(t)){if(t.length<r+16)return!1;let n=0;for(;n<16&&t[r+n]===0;n++);return n===16?{version:void 0,variant:"nil",format:"binary"}:{version:(t[r+6]&240)>>4,variant:us((t[r+8]&224)>>5),format:"binary"}}throw(0,Jc.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(t){const r=Buffer.allocUnsafe(16);let n=0;for(let i=0;i<16;i++)r[i]=Gn[t[n++]+t[n++]],(i===3||i===5||i===7||i===9)&&(n+=1);return r}}pr.UUID=Ht;Ht.OID=Ht.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function us(e){switch(e){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var Dr;(function(e){e[e.ASCII=0]="ASCII",e[e.BINARY=1]="BINARY",e[e.OBJECT=2]="OBJECT"})(Dr||(Dr={}));function Am(e,t,r,n,i=Dr.ASCII){const a=(0,Xc.createHash)(t);if(typeof e!="string"&&!Buffer.isBuffer(e))throw(0,Jc.newError)(Tm,"ERR_INVALID_UUID_NAME");a.update(n),a.update(e);const s=a.digest();let l;switch(i){case Dr.BINARY:s[6]=s[6]&15|r,s[8]=s[8]&63|128,l=s;break;case Dr.OBJECT:s[6]=s[6]&15|r,s[8]=s[8]&63|128,l=new Ht(s);break;default:l=Y[s[0]]+Y[s[1]]+Y[s[2]]+Y[s[3]]+"-"+Y[s[4]]+Y[s[5]]+"-"+Y[s[6]&15|r]+Y[s[7]]+"-"+Y[s[8]&63|128]+Y[s[9]]+"-"+Y[s[10]]+Y[s[11]]+Y[s[12]]+Y[s[13]]+Y[s[14]]+Y[s[15]];break}return l}function Cm(e){return Y[e[0]]+Y[e[1]]+Y[e[2]]+Y[e[3]]+"-"+Y[e[4]]+Y[e[5]]+"-"+Y[e[6]]+Y[e[7]]+"-"+Y[e[8]]+Y[e[9]]+"-"+Y[e[10]]+Y[e[11]]+Y[e[12]]+Y[e[13]]+Y[e[14]]+Y[e[15]]}pr.nil=new Ht("00000000-0000-0000-0000-000000000000");var rn={},Kc={};(function(e){(function(t){t.parser=function(h,u){return new n(h,u)},t.SAXParser=n,t.SAXStream=c,t.createStream=p,t.MAX_BUFFER_LENGTH=64*1024;var r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(h,u){if(!(this instanceof n))return new n(h,u);var A=this;a(A),A.q=A.c="",A.bufferCheckPosition=t.MAX_BUFFER_LENGTH,A.opt=u||{},A.opt.lowercase=A.opt.lowercase||A.opt.lowercasetags,A.looseCase=A.opt.lowercase?"toLowerCase":"toUpperCase",A.tags=[],A.closed=A.closedRoot=A.sawRoot=!1,A.tag=A.error=null,A.strict=!!h,A.noscript=!!(h||A.opt.noscript),A.state=y.BEGIN,A.strictEntities=A.opt.strictEntities,A.ENTITIES=A.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),A.attribList=[],A.opt.xmlns&&(A.ns=Object.create(w)),A.opt.unquotedAttributeValues===void 0&&(A.opt.unquotedAttributeValues=!h),A.trackPosition=A.opt.position!==!1,A.trackPosition&&(A.position=A.line=A.column=0),j(A,"onready")}Object.create||(Object.create=function(h){function u(){}u.prototype=h;var A=new u;return A}),Object.keys||(Object.keys=function(h){var u=[];for(var A in h)h.hasOwnProperty(A)&&u.push(A);return u});function i(h){for(var u=Math.max(t.MAX_BUFFER_LENGTH,10),A=0,_=0,X=r.length;_<X;_++){var re=h[r[_]].length;if(re>u)switch(r[_]){case"textNode":Q(h);break;case"cdata":B(h,"oncdata",h.cdata),h.cdata="";break;case"script":B(h,"onscript",h.script),h.script="";break;default:O(h,"Max buffer length exceeded: "+r[_])}A=Math.max(A,re)}var ce=t.MAX_BUFFER_LENGTH-A;h.bufferCheckPosition=ce+h.position}function a(h){for(var u=0,A=r.length;u<A;u++)h[r[u]]=""}function o(h){Q(h),h.cdata!==""&&(B(h,"oncdata",h.cdata),h.cdata=""),h.script!==""&&(B(h,"onscript",h.script),h.script="")}n.prototype={end:function(){$(this)},write:rt,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var s;try{s=require("stream").Stream}catch{s=function(){}}s||(s=function(){});var l=t.EVENTS.filter(function(h){return h!=="error"&&h!=="end"});function p(h,u){return new c(h,u)}function c(h,u){if(!(this instanceof c))return new c(h,u);s.apply(this),this._parser=new n(h,u),this.writable=!0,this.readable=!0;var A=this;this._parser.onend=function(){A.emit("end")},this._parser.onerror=function(_){A.emit("error",_),A._parser.error=null},this._decoder=null,l.forEach(function(_){Object.defineProperty(A,"on"+_,{get:function(){return A._parser["on"+_]},set:function(X){if(!X)return A.removeAllListeners(_),A._parser["on"+_]=X,X;A.on(_,X)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(s.prototype,{constructor:{value:c}}),c.prototype.write=function(h){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(h)){if(!this._decoder){var u=gd.StringDecoder;this._decoder=new u("utf8")}h=this._decoder.write(h)}return this._parser.write(h.toString()),this.emit("data",h),!0},c.prototype.end=function(h){return h&&h.length&&this.write(h),this._parser.end(),!0},c.prototype.on=function(h,u){var A=this;return!A._parser["on"+h]&&l.indexOf(h)!==-1&&(A._parser["on"+h]=function(){var _=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);_.splice(0,0,h),A.emit.apply(A,_)}),s.prototype.on.call(A,h,u)};var f="[CDATA[",d="DOCTYPE",g="http://www.w3.org/XML/1998/namespace",E="http://www.w3.org/2000/xmlns/",w={xml:g,xmlns:E},b=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,T=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,N=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function L(h){return h===" "||h===`
`||h==="\r"||h==="	"}function ae(h){return h==='"'||h==="'"}function fe(h){return h===">"||L(h)}function z(h,u){return h.test(u)}function Ge(h,u){return!z(h,u)}var y=0;t.STATE={BEGIN:y++,BEGIN_WHITESPACE:y++,TEXT:y++,TEXT_ENTITY:y++,OPEN_WAKA:y++,SGML_DECL:y++,SGML_DECL_QUOTED:y++,DOCTYPE:y++,DOCTYPE_QUOTED:y++,DOCTYPE_DTD:y++,DOCTYPE_DTD_QUOTED:y++,COMMENT_STARTING:y++,COMMENT:y++,COMMENT_ENDING:y++,COMMENT_ENDED:y++,CDATA:y++,CDATA_ENDING:y++,CDATA_ENDING_2:y++,PROC_INST:y++,PROC_INST_BODY:y++,PROC_INST_ENDING:y++,OPEN_TAG:y++,OPEN_TAG_SLASH:y++,ATTRIB:y++,ATTRIB_NAME:y++,ATTRIB_NAME_SAW_WHITE:y++,ATTRIB_VALUE:y++,ATTRIB_VALUE_QUOTED:y++,ATTRIB_VALUE_CLOSED:y++,ATTRIB_VALUE_UNQUOTED:y++,ATTRIB_VALUE_ENTITY_Q:y++,ATTRIB_VALUE_ENTITY_U:y++,CLOSE_TAG:y++,CLOSE_TAG_SAW_WHITE:y++,SCRIPT:y++,SCRIPT_ENDING:y++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(h){var u=t.ENTITIES[h],A=typeof u=="number"?String.fromCharCode(u):u;t.ENTITIES[h]=A});for(var q in t.STATE)t.STATE[t.STATE[q]]=q;y=t.STATE;function j(h,u,A){h[u]&&h[u](A)}function B(h,u,A){h.textNode&&Q(h),j(h,u,A)}function Q(h){h.textNode=P(h.opt,h.textNode),h.textNode&&j(h,"ontext",h.textNode),h.textNode=""}function P(h,u){return h.trim&&(u=u.trim()),h.normalize&&(u=u.replace(/\s+/g," ")),u}function O(h,u){return Q(h),h.trackPosition&&(u+=`
Line: `+h.line+`
Column: `+h.column+`
Char: `+h.c),u=new Error(u),h.error=u,j(h,"onerror",u),h}function $(h){return h.sawRoot&&!h.closedRoot&&C(h,"Unclosed root tag"),h.state!==y.BEGIN&&h.state!==y.BEGIN_WHITESPACE&&h.state!==y.TEXT&&O(h,"Unexpected end"),Q(h),h.c="",h.closed=!0,j(h,"onend"),n.call(h,h.strict,h.opt),h}function C(h,u){if(typeof h!="object"||!(h instanceof n))throw new Error("bad call to strictFail");h.strict&&O(h,u)}function D(h){h.strict||(h.tagName=h.tagName[h.looseCase]());var u=h.tags[h.tags.length-1]||h,A=h.tag={name:h.tagName,attributes:{}};h.opt.xmlns&&(A.ns=u.ns),h.attribList.length=0,B(h,"onopentagstart",A)}function x(h,u){var A=h.indexOf(":"),_=A<0?["",h]:h.split(":"),X=_[0],re=_[1];return u&&h==="xmlns"&&(X="xmlns",re=""),{prefix:X,local:re}}function M(h){if(h.strict||(h.attribName=h.attribName[h.looseCase]()),h.attribList.indexOf(h.attribName)!==-1||h.tag.attributes.hasOwnProperty(h.attribName)){h.attribName=h.attribValue="";return}if(h.opt.xmlns){var u=x(h.attribName,!0),A=u.prefix,_=u.local;if(A==="xmlns")if(_==="xml"&&h.attribValue!==g)C(h,"xml: prefix must be bound to "+g+`
Actual: `+h.attribValue);else if(_==="xmlns"&&h.attribValue!==E)C(h,"xmlns: prefix must be bound to "+E+`
Actual: `+h.attribValue);else{var X=h.tag,re=h.tags[h.tags.length-1]||h;X.ns===re.ns&&(X.ns=Object.create(re.ns)),X.ns[_]=h.attribValue}h.attribList.push([h.attribName,h.attribValue])}else h.tag.attributes[h.attribName]=h.attribValue,B(h,"onattribute",{name:h.attribName,value:h.attribValue});h.attribName=h.attribValue=""}function W(h,u){if(h.opt.xmlns){var A=h.tag,_=x(h.tagName);A.prefix=_.prefix,A.local=_.local,A.uri=A.ns[_.prefix]||"",A.prefix&&!A.uri&&(C(h,"Unbound namespace prefix: "+JSON.stringify(h.tagName)),A.uri=_.prefix);var X=h.tags[h.tags.length-1]||h;A.ns&&X.ns!==A.ns&&Object.keys(A.ns).forEach(function(hn){B(h,"onopennamespace",{prefix:hn,uri:A.ns[hn]})});for(var re=0,ce=h.attribList.length;re<ce;re++){var be=h.attribList[re],Oe=be[0],dt=be[1],ge=x(Oe,!0),Ve=ge.prefix,Ai=ge.local,dn=Ve===""?"":A.ns[Ve]||"",_r={name:Oe,value:dt,prefix:Ve,local:Ai,uri:dn};Ve&&Ve!=="xmlns"&&!dn&&(C(h,"Unbound namespace prefix: "+JSON.stringify(Ve)),_r.uri=Ve),h.tag.attributes[Oe]=_r,B(h,"onattribute",_r)}h.attribList.length=0}h.tag.isSelfClosing=!!u,h.sawRoot=!0,h.tags.push(h.tag),B(h,"onopentag",h.tag),u||(!h.noscript&&h.tagName.toLowerCase()==="script"?h.state=y.SCRIPT:h.state=y.TEXT,h.tag=null,h.tagName=""),h.attribName=h.attribValue="",h.attribList.length=0}function G(h){if(!h.tagName){C(h,"Weird empty close tag."),h.textNode+="</>",h.state=y.TEXT;return}if(h.script){if(h.tagName!=="script"){h.script+="</"+h.tagName+">",h.tagName="",h.state=y.SCRIPT;return}B(h,"onscript",h.script),h.script=""}var u=h.tags.length,A=h.tagName;h.strict||(A=A[h.looseCase]());for(var _=A;u--;){var X=h.tags[u];if(X.name!==_)C(h,"Unexpected close tag");else break}if(u<0){C(h,"Unmatched closing tag: "+h.tagName),h.textNode+="</"+h.tagName+">",h.state=y.TEXT;return}h.tagName=A;for(var re=h.tags.length;re-- >u;){var ce=h.tag=h.tags.pop();h.tagName=h.tag.name,B(h,"onclosetag",h.tagName);var be={};for(var Oe in ce.ns)be[Oe]=ce.ns[Oe];var dt=h.tags[h.tags.length-1]||h;h.opt.xmlns&&ce.ns!==dt.ns&&Object.keys(ce.ns).forEach(function(ge){var Ve=ce.ns[ge];B(h,"onclosenamespace",{prefix:ge,uri:Ve})})}u===0&&(h.closedRoot=!0),h.tagName=h.attribValue=h.attribName="",h.attribList.length=0,h.state=y.TEXT}function Z(h){var u=h.entity,A=u.toLowerCase(),_,X="";return h.ENTITIES[u]?h.ENTITIES[u]:h.ENTITIES[A]?h.ENTITIES[A]:(u=A,u.charAt(0)==="#"&&(u.charAt(1)==="x"?(u=u.slice(2),_=parseInt(u,16),X=_.toString(16)):(u=u.slice(1),_=parseInt(u,10),X=_.toString(10))),u=u.replace(/^0+/,""),isNaN(_)||X.toLowerCase()!==u||_<0||_>1114111?(C(h,"Invalid character entity"),"&"+h.entity+";"):String.fromCodePoint(_))}function Ee(h,u){u==="<"?(h.state=y.OPEN_WAKA,h.startTagPosition=h.position):L(u)||(C(h,"Non-whitespace before first tag."),h.textNode=u,h.state=y.TEXT)}function k(h,u){var A="";return u<h.length&&(A=h.charAt(u)),A}function rt(h){var u=this;if(this.error)throw this.error;if(u.closed)return O(u,"Cannot write after close. Assign an onready handler.");if(h===null)return $(u);typeof h=="object"&&(h=h.toString());for(var A=0,_="";_=k(h,A++),u.c=_,!!_;)switch(u.trackPosition&&(u.position++,_===`
`?(u.line++,u.column=0):u.column++),u.state){case y.BEGIN:if(u.state=y.BEGIN_WHITESPACE,_==="\uFEFF")continue;Ee(u,_);continue;case y.BEGIN_WHITESPACE:Ee(u,_);continue;case y.TEXT:if(u.sawRoot&&!u.closedRoot){for(var re=A-1;_&&_!=="<"&&_!=="&";)_=k(h,A++),_&&u.trackPosition&&(u.position++,_===`
`?(u.line++,u.column=0):u.column++);u.textNode+=h.substring(re,A-1)}_==="<"&&!(u.sawRoot&&u.closedRoot&&!u.strict)?(u.state=y.OPEN_WAKA,u.startTagPosition=u.position):(!L(_)&&(!u.sawRoot||u.closedRoot)&&C(u,"Text data outside of root node."),_==="&"?u.state=y.TEXT_ENTITY:u.textNode+=_);continue;case y.SCRIPT:_==="<"?u.state=y.SCRIPT_ENDING:u.script+=_;continue;case y.SCRIPT_ENDING:_==="/"?u.state=y.CLOSE_TAG:(u.script+="<"+_,u.state=y.SCRIPT);continue;case y.OPEN_WAKA:if(_==="!")u.state=y.SGML_DECL,u.sgmlDecl="";else if(!L(_))if(z(b,_))u.state=y.OPEN_TAG,u.tagName=_;else if(_==="/")u.state=y.CLOSE_TAG,u.tagName="";else if(_==="?")u.state=y.PROC_INST,u.procInstName=u.procInstBody="";else{if(C(u,"Unencoded <"),u.startTagPosition+1<u.position){var X=u.position-u.startTagPosition;_=new Array(X).join(" ")+_}u.textNode+="<"+_,u.state=y.TEXT}continue;case y.SGML_DECL:if(u.sgmlDecl+_==="--"){u.state=y.COMMENT,u.comment="",u.sgmlDecl="";continue}u.doctype&&u.doctype!==!0&&u.sgmlDecl?(u.state=y.DOCTYPE_DTD,u.doctype+="<!"+u.sgmlDecl+_,u.sgmlDecl=""):(u.sgmlDecl+_).toUpperCase()===f?(B(u,"onopencdata"),u.state=y.CDATA,u.sgmlDecl="",u.cdata=""):(u.sgmlDecl+_).toUpperCase()===d?(u.state=y.DOCTYPE,(u.doctype||u.sawRoot)&&C(u,"Inappropriately located doctype declaration"),u.doctype="",u.sgmlDecl=""):_===">"?(B(u,"onsgmldeclaration",u.sgmlDecl),u.sgmlDecl="",u.state=y.TEXT):(ae(_)&&(u.state=y.SGML_DECL_QUOTED),u.sgmlDecl+=_);continue;case y.SGML_DECL_QUOTED:_===u.q&&(u.state=y.SGML_DECL,u.q=""),u.sgmlDecl+=_;continue;case y.DOCTYPE:_===">"?(u.state=y.TEXT,B(u,"ondoctype",u.doctype),u.doctype=!0):(u.doctype+=_,_==="["?u.state=y.DOCTYPE_DTD:ae(_)&&(u.state=y.DOCTYPE_QUOTED,u.q=_));continue;case y.DOCTYPE_QUOTED:u.doctype+=_,_===u.q&&(u.q="",u.state=y.DOCTYPE);continue;case y.DOCTYPE_DTD:_==="]"?(u.doctype+=_,u.state=y.DOCTYPE):_==="<"?(u.state=y.OPEN_WAKA,u.startTagPosition=u.position):ae(_)?(u.doctype+=_,u.state=y.DOCTYPE_DTD_QUOTED,u.q=_):u.doctype+=_;continue;case y.DOCTYPE_DTD_QUOTED:u.doctype+=_,_===u.q&&(u.state=y.DOCTYPE_DTD,u.q="");continue;case y.COMMENT:_==="-"?u.state=y.COMMENT_ENDING:u.comment+=_;continue;case y.COMMENT_ENDING:_==="-"?(u.state=y.COMMENT_ENDED,u.comment=P(u.opt,u.comment),u.comment&&B(u,"oncomment",u.comment),u.comment=""):(u.comment+="-"+_,u.state=y.COMMENT);continue;case y.COMMENT_ENDED:_!==">"?(C(u,"Malformed comment"),u.comment+="--"+_,u.state=y.COMMENT):u.doctype&&u.doctype!==!0?u.state=y.DOCTYPE_DTD:u.state=y.TEXT;continue;case y.CDATA:for(var re=A-1;_&&_!=="]";)_=k(h,A++),_&&u.trackPosition&&(u.position++,_===`
`?(u.line++,u.column=0):u.column++);u.cdata+=h.substring(re,A-1),_==="]"&&(u.state=y.CDATA_ENDING);continue;case y.CDATA_ENDING:_==="]"?u.state=y.CDATA_ENDING_2:(u.cdata+="]"+_,u.state=y.CDATA);continue;case y.CDATA_ENDING_2:_===">"?(u.cdata&&B(u,"oncdata",u.cdata),B(u,"onclosecdata"),u.cdata="",u.state=y.TEXT):_==="]"?u.cdata+="]":(u.cdata+="]]"+_,u.state=y.CDATA);continue;case y.PROC_INST:_==="?"?u.state=y.PROC_INST_ENDING:L(_)?u.state=y.PROC_INST_BODY:u.procInstName+=_;continue;case y.PROC_INST_BODY:if(!u.procInstBody&&L(_))continue;_==="?"?u.state=y.PROC_INST_ENDING:u.procInstBody+=_;continue;case y.PROC_INST_ENDING:_===">"?(B(u,"onprocessinginstruction",{name:u.procInstName,body:u.procInstBody}),u.procInstName=u.procInstBody="",u.state=y.TEXT):(u.procInstBody+="?"+_,u.state=y.PROC_INST_BODY);continue;case y.OPEN_TAG:z(T,_)?u.tagName+=_:(D(u),_===">"?W(u):_==="/"?u.state=y.OPEN_TAG_SLASH:(L(_)||C(u,"Invalid character in tag name"),u.state=y.ATTRIB));continue;case y.OPEN_TAG_SLASH:_===">"?(W(u,!0),G(u)):(C(u,"Forward-slash in opening tag not followed by >"),u.state=y.ATTRIB);continue;case y.ATTRIB:if(L(_))continue;_===">"?W(u):_==="/"?u.state=y.OPEN_TAG_SLASH:z(b,_)?(u.attribName=_,u.attribValue="",u.state=y.ATTRIB_NAME):C(u,"Invalid attribute name");continue;case y.ATTRIB_NAME:_==="="?u.state=y.ATTRIB_VALUE:_===">"?(C(u,"Attribute without value"),u.attribValue=u.attribName,M(u),W(u)):L(_)?u.state=y.ATTRIB_NAME_SAW_WHITE:z(T,_)?u.attribName+=_:C(u,"Invalid attribute name");continue;case y.ATTRIB_NAME_SAW_WHITE:if(_==="=")u.state=y.ATTRIB_VALUE;else{if(L(_))continue;C(u,"Attribute without value"),u.tag.attributes[u.attribName]="",u.attribValue="",B(u,"onattribute",{name:u.attribName,value:""}),u.attribName="",_===">"?W(u):z(b,_)?(u.attribName=_,u.state=y.ATTRIB_NAME):(C(u,"Invalid attribute name"),u.state=y.ATTRIB)}continue;case y.ATTRIB_VALUE:if(L(_))continue;ae(_)?(u.q=_,u.state=y.ATTRIB_VALUE_QUOTED):(u.opt.unquotedAttributeValues||O(u,"Unquoted attribute value"),u.state=y.ATTRIB_VALUE_UNQUOTED,u.attribValue=_);continue;case y.ATTRIB_VALUE_QUOTED:if(_!==u.q){_==="&"?u.state=y.ATTRIB_VALUE_ENTITY_Q:u.attribValue+=_;continue}M(u),u.q="",u.state=y.ATTRIB_VALUE_CLOSED;continue;case y.ATTRIB_VALUE_CLOSED:L(_)?u.state=y.ATTRIB:_===">"?W(u):_==="/"?u.state=y.OPEN_TAG_SLASH:z(b,_)?(C(u,"No whitespace between attributes"),u.attribName=_,u.attribValue="",u.state=y.ATTRIB_NAME):C(u,"Invalid attribute name");continue;case y.ATTRIB_VALUE_UNQUOTED:if(!fe(_)){_==="&"?u.state=y.ATTRIB_VALUE_ENTITY_U:u.attribValue+=_;continue}M(u),_===">"?W(u):u.state=y.ATTRIB;continue;case y.CLOSE_TAG:if(u.tagName)_===">"?G(u):z(T,_)?u.tagName+=_:u.script?(u.script+="</"+u.tagName,u.tagName="",u.state=y.SCRIPT):(L(_)||C(u,"Invalid tagname in closing tag"),u.state=y.CLOSE_TAG_SAW_WHITE);else{if(L(_))continue;Ge(b,_)?u.script?(u.script+="</"+_,u.state=y.SCRIPT):C(u,"Invalid tagname in closing tag."):u.tagName=_}continue;case y.CLOSE_TAG_SAW_WHITE:if(L(_))continue;_===">"?G(u):C(u,"Invalid characters in closing tag");continue;case y.TEXT_ENTITY:case y.ATTRIB_VALUE_ENTITY_Q:case y.ATTRIB_VALUE_ENTITY_U:var ce,be;switch(u.state){case y.TEXT_ENTITY:ce=y.TEXT,be="textNode";break;case y.ATTRIB_VALUE_ENTITY_Q:ce=y.ATTRIB_VALUE_QUOTED,be="attribValue";break;case y.ATTRIB_VALUE_ENTITY_U:ce=y.ATTRIB_VALUE_UNQUOTED,be="attribValue";break}if(_===";"){var Oe=Z(u);u.opt.unparsedEntities&&!Object.values(t.XML_ENTITIES).includes(Oe)?(u.entity="",u.state=ce,u.write(Oe)):(u[be]+=Oe,u.entity="",u.state=ce)}else z(u.entity.length?N:S,_)?u.entity+=_:(C(u,"Invalid character in entity name"),u[be]+="&"+u.entity+_,u.entity="",u.state=ce);continue;default:throw new Error(u,"Unknown state: "+u.state)}return u.position>=u.bufferCheckPosition&&i(u),u}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var h=String.fromCharCode,u=Math.floor,A=function(){var _=16384,X=[],re,ce,be=-1,Oe=arguments.length;if(!Oe)return"";for(var dt="";++be<Oe;){var ge=Number(arguments[be]);if(!isFinite(ge)||ge<0||ge>1114111||u(ge)!==ge)throw RangeError("Invalid code point: "+ge);ge<=65535?X.push(ge):(ge-=65536,re=(ge>>10)+55296,ce=ge%1024+56320,X.push(re,ce)),(be+1===Oe||X.length>_)&&(dt+=h.apply(null,X),X.length=0)}return dt};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:A,configurable:!0,writable:!0}):String.fromCodePoint=A}()})(e)})(Kc);Object.defineProperty(rn,"__esModule",{value:!0});rn.XElement=void 0;rn.parseXml=xm;const Om=Kc,On=yr;class Qc{constructor(t){if(this.name=t,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!t)throw(0,On.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!Pm(t))throw(0,On.newError)(`Invalid element name: ${t}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(t){const r=this.attributes===null?null:this.attributes[t];if(r==null)throw(0,On.newError)(`No attribute "${t}"`,"ERR_XML_MISSED_ATTRIBUTE");return r}removeAttribute(t){this.attributes!==null&&delete this.attributes[t]}element(t,r=!1,n=null){const i=this.elementOrNull(t,r);if(i===null)throw(0,On.newError)(n||`No element "${t}"`,"ERR_XML_MISSED_ELEMENT");return i}elementOrNull(t,r=!1){if(this.elements===null)return null;for(const n of this.elements)if(fs(n,t,r))return n;return null}getElements(t,r=!1){return this.elements===null?[]:this.elements.filter(n=>fs(n,t,r))}elementValueOrEmpty(t,r=!1){const n=this.elementOrNull(t,r);return n===null?"":n.value}}rn.XElement=Qc;const Rm=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function Pm(e){return Rm.test(e)}function fs(e,t,r){const n=e.name;return n===t||r===!0&&n.length===t.length&&n.toLowerCase()===t.toLowerCase()}function xm(e){let t=null;const r=Om.parser(!0,{}),n=[];return r.onopentag=i=>{const a=new Qc(i.name);if(a.attributes=i.attributes,t===null)t=a;else{const o=n[n.length-1];o.elements==null&&(o.elements=[]),o.elements.push(a)}n.push(a)},r.onclosetag=()=>{n.pop()},r.ontext=i=>{n.length>0&&(n[n.length-1].value=i)},r.oncdata=i=>{const a=n[n.length-1];a.value=i,a.isCData=!0},r.onerror=i=>{throw i},r.write(e),t}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CURRENT_APP_PACKAGE_FILE_NAME=e.CURRENT_APP_INSTALLER_FILE_NAME=e.XElement=e.parseXml=e.UUID=e.parseDn=e.retry=e.githubTagPrefix=e.githubUrl=e.getS3LikeProviderBaseUrl=e.ProgressCallbackTransform=e.MemoLazy=e.safeStringifyJson=e.safeGetHeader=e.parseJson=e.HttpExecutor=e.HttpError=e.DigestTransform=e.createHttpError=e.configureRequestUrl=e.configureRequestOptionsFromUrl=e.configureRequestOptions=e.newError=e.CancellationToken=e.CancellationError=void 0,e.asArray=f;var t=St;Object.defineProperty(e,"CancellationError",{enumerable:!0,get:function(){return t.CancellationError}}),Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return t.CancellationToken}});var r=yr;Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return r.newError}});var n=De;Object.defineProperty(e,"configureRequestOptions",{enumerable:!0,get:function(){return n.configureRequestOptions}}),Object.defineProperty(e,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return n.configureRequestOptionsFromUrl}}),Object.defineProperty(e,"configureRequestUrl",{enumerable:!0,get:function(){return n.configureRequestUrl}}),Object.defineProperty(e,"createHttpError",{enumerable:!0,get:function(){return n.createHttpError}}),Object.defineProperty(e,"DigestTransform",{enumerable:!0,get:function(){return n.DigestTransform}}),Object.defineProperty(e,"HttpError",{enumerable:!0,get:function(){return n.HttpError}}),Object.defineProperty(e,"HttpExecutor",{enumerable:!0,get:function(){return n.HttpExecutor}}),Object.defineProperty(e,"parseJson",{enumerable:!0,get:function(){return n.parseJson}}),Object.defineProperty(e,"safeGetHeader",{enumerable:!0,get:function(){return n.safeGetHeader}}),Object.defineProperty(e,"safeStringifyJson",{enumerable:!0,get:function(){return n.safeStringifyJson}});var i=si;Object.defineProperty(e,"MemoLazy",{enumerable:!0,get:function(){return i.MemoLazy}});var a=en;Object.defineProperty(e,"ProgressCallbackTransform",{enumerable:!0,get:function(){return a.ProgressCallbackTransform}});var o=tn;Object.defineProperty(e,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return o.getS3LikeProviderBaseUrl}}),Object.defineProperty(e,"githubUrl",{enumerable:!0,get:function(){return o.githubUrl}}),Object.defineProperty(e,"githubTagPrefix",{enumerable:!0,get:function(){return o.githubTagPrefix}});var s=qa;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return s.retry}});var l=Wa;Object.defineProperty(e,"parseDn",{enumerable:!0,get:function(){return l.parseDn}});var p=pr;Object.defineProperty(e,"UUID",{enumerable:!0,get:function(){return p.UUID}});var c=rn;Object.defineProperty(e,"parseXml",{enumerable:!0,get:function(){return c.parseXml}}),Object.defineProperty(e,"XElement",{enumerable:!0,get:function(){return c.XElement}}),e.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",e.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function f(d){return d==null?[]:Array.isArray(d)?d:[d]}})(we);var Ce={},Va={},Qe={};function Zc(e){return typeof e>"u"||e===null}function Im(e){return typeof e=="object"&&e!==null}function $m(e){return Array.isArray(e)?e:Zc(e)?[]:[e]}function Nm(e,t){var r,n,i,a;if(t)for(a=Object.keys(t),r=0,n=a.length;r<n;r+=1)i=a[r],e[i]=t[i];return e}function Dm(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function Fm(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}Qe.isNothing=Zc;Qe.isObject=Im;Qe.toArray=$m;Qe.repeat=Dm;Qe.isNegativeZero=Fm;Qe.extend=Nm;function eu(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function jr(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=eu(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}jr.prototype=Object.create(Error.prototype);jr.prototype.constructor=jr;jr.prototype.toString=function(t){return this.name+": "+eu(this,t)};var nn=jr,xr=Qe;function Gi(e,t,r,n,i){var a="",o="",s=Math.floor(i/2)-1;return n-t>s&&(a=" ... ",t=n-s+a.length),r-n>s&&(o=" ...",r=n+s-o.length),{str:a+e.slice(t,r).replace(/\t/g,"")+o,pos:n-t+a.length}}function Hi(e,t){return xr.repeat(" ",t-e.length)+e}function Lm(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],a,o=-1;a=r.exec(e.buffer);)i.push(a.index),n.push(a.index+a[0].length),e.position<=a.index&&o<0&&(o=n.length-2);o<0&&(o=n.length-1);var s="",l,p,c=Math.min(e.line+t.linesAfter,i.length).toString().length,f=t.maxLength-(t.indent+c+3);for(l=1;l<=t.linesBefore&&!(o-l<0);l++)p=Gi(e.buffer,n[o-l],i[o-l],e.position-(n[o]-n[o-l]),f),s=xr.repeat(" ",t.indent)+Hi((e.line-l+1).toString(),c)+" | "+p.str+`
`+s;for(p=Gi(e.buffer,n[o],i[o],e.position,f),s+=xr.repeat(" ",t.indent)+Hi((e.line+1).toString(),c)+" | "+p.str+`
`,s+=xr.repeat("-",t.indent+c+3+p.pos)+`^
`,l=1;l<=t.linesAfter&&!(o+l>=i.length);l++)p=Gi(e.buffer,n[o+l],i[o+l],e.position-(n[o]-n[o+l]),f),s+=xr.repeat(" ",t.indent)+Hi((e.line+l+1).toString(),c)+" | "+p.str+`
`;return s.replace(/\n$/,"")}var Um=Lm,ds=nn,km=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Mm=["scalar","sequence","mapping"];function Bm(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function jm(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(km.indexOf(r)===-1)throw new ds('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=Bm(t.styleAliases||null),Mm.indexOf(this.kind)===-1)throw new ds('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var ke=jm,Cr=nn,qi=ke;function hs(e,t){var r=[];return e[t].forEach(function(n){var i=r.length;r.forEach(function(a,o){a.tag===n.tag&&a.kind===n.kind&&a.multi===n.multi&&(i=o)}),r[i]=n}),r}function Gm(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function ba(e){return this.extend(e)}ba.prototype.extend=function(t){var r=[],n=[];if(t instanceof qi)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new Cr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(a){if(!(a instanceof qi))throw new Cr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(a.loadKind&&a.loadKind!=="scalar")throw new Cr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(a.multi)throw new Cr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(a){if(!(a instanceof qi))throw new Cr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(ba.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=hs(i,"implicit"),i.compiledExplicit=hs(i,"explicit"),i.compiledTypeMap=Gm(i.compiledImplicit,i.compiledExplicit),i};var tu=ba,Hm=ke,ru=new Hm("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),qm=ke,nu=new qm("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Wm=ke,iu=new Wm("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Vm=tu,au=new Vm({explicit:[ru,nu,iu]}),Ym=ke;function zm(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function Xm(){return null}function Jm(e){return e===null}var ou=new Ym("tag:yaml.org,2002:null",{kind:"scalar",resolve:zm,construct:Xm,predicate:Jm,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Km=ke;function Qm(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function Zm(e){return e==="true"||e==="True"||e==="TRUE"}function eg(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var su=new Km("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Qm,construct:Zm,predicate:eg,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"}),tg=Qe,rg=ke;function ng(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function ig(e){return 48<=e&&e<=55}function ag(e){return 48<=e&&e<=57}function og(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!ng(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!ig(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(!ag(e.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function sg(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function lg(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!tg.isNegativeZero(e)}var lu=new rg("tag:yaml.org,2002:int",{kind:"scalar",resolve:og,construct:sg,predicate:lg,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),cu=Qe,cg=ke,ug=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function fg(e){return!(e===null||!ug.test(e)||e[e.length-1]==="_")}function dg(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var hg=/^[-+]?[0-9]+e/;function pg(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(cu.isNegativeZero(e))return"-0.0";return r=e.toString(10),hg.test(r)?r.replace("e",".e"):r}function mg(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||cu.isNegativeZero(e))}var uu=new cg("tag:yaml.org,2002:float",{kind:"scalar",resolve:fg,construct:dg,predicate:mg,represent:pg,defaultStyle:"lowercase"}),fu=au.extend({implicit:[ou,su,lu,uu]}),du=fu,gg=ke,hu=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),pu=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function yg(e){return e===null?!1:hu.exec(e)!==null||pu.exec(e)!==null}function wg(e){var t,r,n,i,a,o,s,l=0,p=null,c,f,d;if(t=hu.exec(e),t===null&&(t=pu.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(a=+t[4],o=+t[5],s=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(c=+t[10],f=+(t[11]||0),p=(c*60+f)*6e4,t[9]==="-"&&(p=-p)),d=new Date(Date.UTC(r,n,i,a,o,s,l)),p&&d.setTime(d.getTime()-p),d}function Eg(e){return e.toISOString()}var mu=new gg("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:yg,construct:wg,instanceOf:Date,represent:Eg}),vg=ke;function _g(e){return e==="<<"||e===null}var gu=new vg("tag:yaml.org,2002:merge",{kind:"scalar",resolve:_g}),bg=ke,Ya=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Sg(e){if(e===null)return!1;var t,r,n=0,i=e.length,a=Ya;for(r=0;r<i;r++)if(t=a.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function Tg(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,a=Ya,o=0,s=[];for(t=0;t<i;t++)t%4===0&&t&&(s.push(o>>16&255),s.push(o>>8&255),s.push(o&255)),o=o<<6|a.indexOf(n.charAt(t));return r=i%4*6,r===0?(s.push(o>>16&255),s.push(o>>8&255),s.push(o&255)):r===18?(s.push(o>>10&255),s.push(o>>2&255)):r===12&&s.push(o>>4&255),new Uint8Array(s)}function Ag(e){var t="",r=0,n,i,a=e.length,o=Ya;for(n=0;n<a;n++)n%3===0&&n&&(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]),r=(r<<8)+e[n];return i=a%3,i===0?(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]):i===2?(t+=o[r>>10&63],t+=o[r>>4&63],t+=o[r<<2&63],t+=o[64]):i===1&&(t+=o[r>>2&63],t+=o[r<<4&63],t+=o[64],t+=o[64]),t}function Cg(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var yu=new bg("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Sg,construct:Tg,predicate:Cg,represent:Ag}),Og=ke,Rg=Object.prototype.hasOwnProperty,Pg=Object.prototype.toString;function xg(e){if(e===null)return!0;var t=[],r,n,i,a,o,s=e;for(r=0,n=s.length;r<n;r+=1){if(i=s[r],o=!1,Pg.call(i)!=="[object Object]")return!1;for(a in i)if(Rg.call(i,a))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(a)===-1)t.push(a);else return!1}return!0}function Ig(e){return e!==null?e:[]}var wu=new Og("tag:yaml.org,2002:omap",{kind:"sequence",resolve:xg,construct:Ig}),$g=ke,Ng=Object.prototype.toString;function Dg(e){if(e===null)return!0;var t,r,n,i,a,o=e;for(a=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(n=o[t],Ng.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;a[t]=[i[0],n[i[0]]]}return!0}function Fg(e){if(e===null)return[];var t,r,n,i,a,o=e;for(a=new Array(o.length),t=0,r=o.length;t<r;t+=1)n=o[t],i=Object.keys(n),a[t]=[i[0],n[i[0]]];return a}var Eu=new $g("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Dg,construct:Fg}),Lg=ke,Ug=Object.prototype.hasOwnProperty;function kg(e){if(e===null)return!0;var t,r=e;for(t in r)if(Ug.call(r,t)&&r[t]!==null)return!1;return!0}function Mg(e){return e!==null?e:{}}var vu=new Lg("tag:yaml.org,2002:set",{kind:"mapping",resolve:kg,construct:Mg}),za=du.extend({implicit:[mu,gu],explicit:[yu,wu,Eu,vu]}),Mt=Qe,_u=nn,Bg=Um,jg=za,Tt=Object.prototype.hasOwnProperty,zn=1,bu=2,Su=3,Xn=4,Wi=1,Gg=2,ps=3,Hg=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,qg=/[\x85\u2028\u2029]/,Wg=/[,\[\]\{\}]/,Tu=/^(?:!|!!|![a-z\-]+!)$/i,Au=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function ms(e){return Object.prototype.toString.call(e)}function ot(e){return e===10||e===13}function Gt(e){return e===9||e===32}function je(e){return e===9||e===32||e===10||e===13}function ir(e){return e===44||e===91||e===93||e===123||e===125}function Vg(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function Yg(e){return e===120?2:e===117?4:e===85?8:0}function zg(e){return 48<=e&&e<=57?e-48:-1}function gs(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function Xg(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}function Cu(e,t,r){t==="__proto__"?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:r}):e[t]=r}var Ou=new Array(256),Ru=new Array(256);for(var Kt=0;Kt<256;Kt++)Ou[Kt]=gs(Kt)?1:0,Ru[Kt]=gs(Kt);function Jg(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||jg,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Pu(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=Bg(r),new _u(t,r)}function U(e,t){throw Pu(e,t)}function Jn(e,t){e.onWarning&&e.onWarning.call(null,Pu(e,t))}var ys={YAML:function(t,r,n){var i,a,o;t.version!==null&&U(t,"duplication of %YAML directive"),n.length!==1&&U(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&U(t,"ill-formed argument of the YAML directive"),a=parseInt(i[1],10),o=parseInt(i[2],10),a!==1&&U(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&Jn(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var i,a;n.length!==2&&U(t,"TAG directive accepts exactly two arguments"),i=n[0],a=n[1],Tu.test(i)||U(t,"ill-formed tag handle (first argument) of the TAG directive"),Tt.call(t.tagMap,i)&&U(t,'there is a previously declared suffix for "'+i+'" tag handle'),Au.test(a)||U(t,"ill-formed tag prefix (second argument) of the TAG directive");try{a=decodeURIComponent(a)}catch{U(t,"tag prefix is malformed: "+a)}t.tagMap[i]=a}};function _t(e,t,r,n){var i,a,o,s;if(t<r){if(s=e.input.slice(t,r),n)for(i=0,a=s.length;i<a;i+=1)o=s.charCodeAt(i),o===9||32<=o&&o<=1114111||U(e,"expected valid JSON character");else Hg.test(s)&&U(e,"the stream contains non-printable characters");e.result+=s}}function ws(e,t,r,n){var i,a,o,s;for(Mt.isObject(r)||U(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),o=0,s=i.length;o<s;o+=1)a=i[o],Tt.call(t,a)||(Cu(t,a,r[a]),n[a]=!0)}function ar(e,t,r,n,i,a,o,s,l){var p,c;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),p=0,c=i.length;p<c;p+=1)Array.isArray(i[p])&&U(e,"nested arrays are not supported inside keys"),typeof i=="object"&&ms(i[p])==="[object Object]"&&(i[p]="[object Object]");if(typeof i=="object"&&ms(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(a))for(p=0,c=a.length;p<c;p+=1)ws(e,t,a[p],r);else ws(e,t,a,r);else!e.json&&!Tt.call(r,i)&&Tt.call(t,i)&&(e.line=o||e.line,e.lineStart=s||e.lineStart,e.position=l||e.position,U(e,"duplicated mapping key")),Cu(t,i,a),delete r[i];return t}function Xa(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):U(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function de(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Gt(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(ot(i))for(Xa(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&Jn(e,"deficient indentation"),n}function li(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||je(r)))}function Ja(e,t){t===1?e.result+=" ":t>1&&(e.result+=Mt.repeat(`
`,t-1))}function Kg(e,t,r){var n,i,a,o,s,l,p,c,f=e.kind,d=e.result,g;if(g=e.input.charCodeAt(e.position),je(g)||ir(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(i=e.input.charCodeAt(e.position+1),je(i)||r&&ir(i)))return!1;for(e.kind="scalar",e.result="",a=o=e.position,s=!1;g!==0;){if(g===58){if(i=e.input.charCodeAt(e.position+1),je(i)||r&&ir(i))break}else if(g===35){if(n=e.input.charCodeAt(e.position-1),je(n))break}else{if(e.position===e.lineStart&&li(e)||r&&ir(g))break;if(ot(g))if(l=e.line,p=e.lineStart,c=e.lineIndent,de(e,!1,-1),e.lineIndent>=t){s=!0,g=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=l,e.lineStart=p,e.lineIndent=c;break}}s&&(_t(e,a,o,!1),Ja(e,e.line-l),a=o=e.position,s=!1),Gt(g)||(o=e.position+1),g=e.input.charCodeAt(++e.position)}return _t(e,a,o,!1),e.result?!0:(e.kind=f,e.result=d,!1)}function Qg(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(_t(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else ot(r)?(_t(e,n,i,!0),Ja(e,de(e,!1,t)),n=i=e.position):e.position===e.lineStart&&li(e)?U(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);U(e,"unexpected end of the stream within a single quoted scalar")}function Zg(e,t){var r,n,i,a,o,s;if(s=e.input.charCodeAt(e.position),s!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(s=e.input.charCodeAt(e.position))!==0;){if(s===34)return _t(e,r,e.position,!0),e.position++,!0;if(s===92){if(_t(e,r,e.position,!0),s=e.input.charCodeAt(++e.position),ot(s))de(e,!1,t);else if(s<256&&Ou[s])e.result+=Ru[s],e.position++;else if((o=Yg(s))>0){for(i=o,a=0;i>0;i--)s=e.input.charCodeAt(++e.position),(o=Vg(s))>=0?a=(a<<4)+o:U(e,"expected hexadecimal character");e.result+=Xg(a),e.position++}else U(e,"unknown escape sequence");r=n=e.position}else ot(s)?(_t(e,r,n,!0),Ja(e,de(e,!1,t)),r=n=e.position):e.position===e.lineStart&&li(e)?U(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}U(e,"unexpected end of the stream within a double quoted scalar")}function e0(e,t){var r=!0,n,i,a,o=e.tag,s,l=e.anchor,p,c,f,d,g,E=Object.create(null),w,b,T,S;if(S=e.input.charCodeAt(e.position),S===91)c=93,g=!1,s=[];else if(S===123)c=125,g=!0,s={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),S=e.input.charCodeAt(++e.position);S!==0;){if(de(e,!0,t),S=e.input.charCodeAt(e.position),S===c)return e.position++,e.tag=o,e.anchor=l,e.kind=g?"mapping":"sequence",e.result=s,!0;r?S===44&&U(e,"expected the node content, but found ','"):U(e,"missed comma between flow collection entries"),b=w=T=null,f=d=!1,S===63&&(p=e.input.charCodeAt(e.position+1),je(p)&&(f=d=!0,e.position++,de(e,!0,t))),n=e.line,i=e.lineStart,a=e.position,mr(e,t,zn,!1,!0),b=e.tag,w=e.result,de(e,!0,t),S=e.input.charCodeAt(e.position),(d||e.line===n)&&S===58&&(f=!0,S=e.input.charCodeAt(++e.position),de(e,!0,t),mr(e,t,zn,!1,!0),T=e.result),g?ar(e,s,E,b,w,T,n,i,a):f?s.push(ar(e,null,E,b,w,T,n,i,a)):s.push(w),de(e,!0,t),S=e.input.charCodeAt(e.position),S===44?(r=!0,S=e.input.charCodeAt(++e.position)):r=!1}U(e,"unexpected end of the stream within a flow collection")}function t0(e,t){var r,n,i=Wi,a=!1,o=!1,s=t,l=0,p=!1,c,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)Wi===i?i=f===43?ps:Gg:U(e,"repeat of a chomping mode identifier");else if((c=zg(f))>=0)c===0?U(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?U(e,"repeat of an indentation width identifier"):(s=t+c-1,o=!0);else break;if(Gt(f)){do f=e.input.charCodeAt(++e.position);while(Gt(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!ot(f)&&f!==0)}for(;f!==0;){for(Xa(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!o||e.lineIndent<s)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>s&&(s=e.lineIndent),ot(f)){l++;continue}if(e.lineIndent<s){i===ps?e.result+=Mt.repeat(`
`,a?1+l:l):i===Wi&&a&&(e.result+=`
`);break}for(n?Gt(f)?(p=!0,e.result+=Mt.repeat(`
`,a?1+l:l)):p?(p=!1,e.result+=Mt.repeat(`
`,l+1)):l===0?a&&(e.result+=" "):e.result+=Mt.repeat(`
`,l):e.result+=Mt.repeat(`
`,a?1+l:l),a=!0,o=!0,l=0,r=e.position;!ot(f)&&f!==0;)f=e.input.charCodeAt(++e.position);_t(e,r,e.position,!1)}return!0}function Es(e,t){var r,n=e.tag,i=e.anchor,a=[],o,s=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,U(e,"tab characters must not be used in indentation")),!(l!==45||(o=e.input.charCodeAt(e.position+1),!je(o))));){if(s=!0,e.position++,de(e,!0,-1)&&e.lineIndent<=t){a.push(null),l=e.input.charCodeAt(e.position);continue}if(r=e.line,mr(e,t,Su,!1,!0),a.push(e.result),de(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&l!==0)U(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return s?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=a,!0):!1}function r0(e,t,r){var n,i,a,o,s,l,p=e.tag,c=e.anchor,f={},d=Object.create(null),g=null,E=null,w=null,b=!1,T=!1,S;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),S=e.input.charCodeAt(e.position);S!==0;){if(!b&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,U(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),a=e.line,(S===63||S===58)&&je(n))S===63?(b&&(ar(e,f,d,g,E,null,o,s,l),g=E=w=null),T=!0,b=!0,i=!0):b?(b=!1,i=!0):U(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,S=n;else{if(o=e.line,s=e.lineStart,l=e.position,!mr(e,r,bu,!1,!0))break;if(e.line===a){for(S=e.input.charCodeAt(e.position);Gt(S);)S=e.input.charCodeAt(++e.position);if(S===58)S=e.input.charCodeAt(++e.position),je(S)||U(e,"a whitespace character is expected after the key-value separator within a block mapping"),b&&(ar(e,f,d,g,E,null,o,s,l),g=E=w=null),T=!0,b=!1,i=!1,g=e.tag,E=e.result;else if(T)U(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=p,e.anchor=c,!0}else if(T)U(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=p,e.anchor=c,!0}if((e.line===a||e.lineIndent>t)&&(b&&(o=e.line,s=e.lineStart,l=e.position),mr(e,t,Xn,!0,i)&&(b?E=e.result:w=e.result),b||(ar(e,f,d,g,E,w,o,s,l),g=E=w=null),de(e,!0,-1),S=e.input.charCodeAt(e.position)),(e.line===a||e.lineIndent>t)&&S!==0)U(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return b&&ar(e,f,d,g,E,null,o,s,l),T&&(e.tag=p,e.anchor=c,e.kind="mapping",e.result=f),T}function n0(e){var t,r=!1,n=!1,i,a,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&U(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(r=!0,o=e.input.charCodeAt(++e.position)):o===33?(n=!0,i="!!",o=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(a=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):U(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!je(o);)o===33&&(n?U(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),Tu.test(i)||U(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);a=e.input.slice(t,e.position),Wg.test(a)&&U(e,"tag suffix cannot contain flow indicator characters")}a&&!Au.test(a)&&U(e,"tag name cannot contain such characters: "+a);try{a=decodeURIComponent(a)}catch{U(e,"tag name is malformed: "+a)}return r?e.tag=a:Tt.call(e.tagMap,i)?e.tag=e.tagMap[i]+a:i==="!"?e.tag="!"+a:i==="!!"?e.tag="tag:yaml.org,2002:"+a:U(e,'undeclared tag handle "'+i+'"'),!0}function i0(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&U(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!je(r)&&!ir(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&U(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function a0(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!je(n)&&!ir(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&U(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Tt.call(e.anchorMap,r)||U(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],de(e,!0,-1),!0}function mr(e,t,r,n,i){var a,o,s,l=1,p=!1,c=!1,f,d,g,E,w,b;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,a=o=s=Xn===r||Su===r,n&&de(e,!0,-1)&&(p=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;n0(e)||i0(e);)de(e,!0,-1)?(p=!0,s=a,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):s=!1;if(s&&(s=p||i),(l===1||Xn===r)&&(zn===r||bu===r?w=t:w=t+1,b=e.position-e.lineStart,l===1?s&&(Es(e,b)||r0(e,b,w))||e0(e,w)?c=!0:(o&&t0(e,w)||Qg(e,w)||Zg(e,w)?c=!0:a0(e)?(c=!0,(e.tag!==null||e.anchor!==null)&&U(e,"alias node should not have any properties")):Kg(e,w,zn===r)&&(c=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(c=s&&Es(e,b))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&U(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,d=e.implicitTypes.length;f<d;f+=1)if(E=e.implicitTypes[f],E.resolve(e.result)){e.result=E.construct(e.result),e.tag=E.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Tt.call(e.typeMap[e.kind||"fallback"],e.tag))E=e.typeMap[e.kind||"fallback"][e.tag];else for(E=null,g=e.typeMap.multi[e.kind||"fallback"],f=0,d=g.length;f<d;f+=1)if(e.tag.slice(0,g[f].tag.length)===g[f].tag){E=g[f];break}E||U(e,"unknown tag !<"+e.tag+">"),e.result!==null&&E.kind!==e.kind&&U(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+E.kind+'", not "'+e.kind+'"'),E.resolve(e.result,e.tag)?(e.result=E.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):U(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||c}function o0(e){var t=e.position,r,n,i,a=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(de(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(a=!0,o=e.input.charCodeAt(++e.position),r=e.position;o!==0&&!je(o);)o=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&U(e,"directive name must not be less than one character in length");o!==0;){for(;Gt(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!ot(o));break}if(ot(o))break;for(r=e.position;o!==0&&!je(o);)o=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}o!==0&&Xa(e),Tt.call(ys,n)?ys[n](e,n,i):Jn(e,'unknown document directive "'+n+'"')}if(de(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,de(e,!0,-1)):a&&U(e,"directives end mark is expected"),mr(e,e.lineIndent-1,Xn,!1,!0),de(e,!0,-1),e.checkLineBreaks&&qg.test(e.input.slice(t,e.position))&&Jn(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&li(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,de(e,!0,-1));return}if(e.position<e.length-1)U(e,"end of the stream or a document separator is expected");else return}function xu(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new Jg(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,U(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)o0(r);return r.documents}function s0(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=xu(e,r);if(typeof t!="function")return n;for(var i=0,a=n.length;i<a;i+=1)t(n[i])}function l0(e,t){var r=xu(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new _u("expected a single document in the stream, but found more")}}Va.loadAll=s0;Va.load=l0;var Iu={},ci=Qe,an=nn,c0=za,$u=Object.prototype.toString,Nu=Object.prototype.hasOwnProperty,Ka=65279,u0=9,Gr=10,f0=13,d0=32,h0=33,p0=34,Sa=35,m0=37,g0=38,y0=39,w0=42,Du=44,E0=45,Kn=58,v0=61,_0=62,b0=63,S0=64,Fu=91,Lu=93,T0=96,Uu=123,A0=124,ku=125,xe={};xe[0]="\\0";xe[7]="\\a";xe[8]="\\b";xe[9]="\\t";xe[10]="\\n";xe[11]="\\v";xe[12]="\\f";xe[13]="\\r";xe[27]="\\e";xe[34]='\\"';xe[92]="\\\\";xe[133]="\\N";xe[160]="\\_";xe[8232]="\\L";xe[8233]="\\P";var C0=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],O0=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function R0(e,t){var r,n,i,a,o,s,l;if(t===null)return{};for(r={},n=Object.keys(t),i=0,a=n.length;i<a;i+=1)o=n[i],s=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=e.compiledTypeMap.fallback[o],l&&Nu.call(l.styleAliases,s)&&(s=l.styleAliases[s]),r[o]=s;return r}function P0(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new an("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+ci.repeat("0",n-t.length)+t}var x0=1,Hr=2;function I0(e){this.schema=e.schema||c0,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=ci.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=R0(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Hr:x0,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function vs(e,t){for(var r=ci.repeat(" ",t),n=0,i=-1,a="",o,s=e.length;n<s;)i=e.indexOf(`
`,n),i===-1?(o=e.slice(n),n=s):(o=e.slice(n,i+1),n=i+1),o.length&&o!==`
`&&(a+=r),a+=o;return a}function Ta(e,t){return`
`+ci.repeat(" ",e.indent*t)}function $0(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}function Qn(e){return e===d0||e===u0}function qr(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Ka||65536<=e&&e<=1114111}function _s(e){return qr(e)&&e!==Ka&&e!==f0&&e!==Gr}function bs(e,t,r){var n=_s(e),i=n&&!Qn(e);return(r?n:n&&e!==Du&&e!==Fu&&e!==Lu&&e!==Uu&&e!==ku)&&e!==Sa&&!(t===Kn&&!i)||_s(t)&&!Qn(t)&&e===Sa||t===Kn&&i}function N0(e){return qr(e)&&e!==Ka&&!Qn(e)&&e!==E0&&e!==b0&&e!==Kn&&e!==Du&&e!==Fu&&e!==Lu&&e!==Uu&&e!==ku&&e!==Sa&&e!==g0&&e!==w0&&e!==h0&&e!==A0&&e!==v0&&e!==_0&&e!==y0&&e!==p0&&e!==m0&&e!==S0&&e!==T0}function D0(e){return!Qn(e)&&e!==Kn}function Ir(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function Mu(e){var t=/^\n* /;return t.test(e)}var Bu=1,Aa=2,ju=3,Gu=4,rr=5;function F0(e,t,r,n,i,a,o,s){var l,p=0,c=null,f=!1,d=!1,g=n!==-1,E=-1,w=N0(Ir(e,0))&&D0(Ir(e,e.length-1));if(t||o)for(l=0;l<e.length;p>=65536?l+=2:l++){if(p=Ir(e,l),!qr(p))return rr;w=w&&bs(p,c,s),c=p}else{for(l=0;l<e.length;p>=65536?l+=2:l++){if(p=Ir(e,l),p===Gr)f=!0,g&&(d=d||l-E-1>n&&e[E+1]!==" ",E=l);else if(!qr(p))return rr;w=w&&bs(p,c,s),c=p}d=d||g&&l-E-1>n&&e[E+1]!==" "}return!f&&!d?w&&!o&&!i(e)?Bu:a===Hr?rr:Aa:r>9&&Mu(e)?rr:o?a===Hr?rr:Aa:d?Gu:ju}function L0(e,t,r,n,i){e.dump=function(){if(t.length===0)return e.quotingType===Hr?'""':"''";if(!e.noCompatMode&&(C0.indexOf(t)!==-1||O0.test(t)))return e.quotingType===Hr?'"'+t+'"':"'"+t+"'";var a=e.indent*Math.max(1,r),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-a),s=n||e.flowLevel>-1&&r>=e.flowLevel;function l(p){return $0(e,p)}switch(F0(t,s,e.indent,o,l,e.quotingType,e.forceQuotes&&!n,i)){case Bu:return t;case Aa:return"'"+t.replace(/'/g,"''")+"'";case ju:return"|"+Ss(t,e.indent)+Ts(vs(t,a));case Gu:return">"+Ss(t,e.indent)+Ts(vs(U0(t,o),a));case rr:return'"'+k0(t)+'"';default:throw new an("impossible error: invalid scalar style")}}()}function Ss(e,t){var r=Mu(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),a=i?"+":n?"":"-";return r+a+`
`}function Ts(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function U0(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var p=e.indexOf(`
`);return p=p!==-1?p:e.length,r.lastIndex=p,As(e.slice(0,p),t)}(),i=e[0]===`
`||e[0]===" ",a,o;o=r.exec(e);){var s=o[1],l=o[2];a=l[0]===" ",n+=s+(!i&&!a&&l!==""?`
`:"")+As(l,t),i=a}return n}function As(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,a,o=0,s=0,l="";n=r.exec(e);)s=n.index,s-i>t&&(a=o>i?o:s,l+=`
`+e.slice(i,a),i=a+1),o=s;return l+=`
`,e.length-i>t&&o>i?l+=e.slice(i,o)+`
`+e.slice(o+1):l+=e.slice(i),l.slice(1)}function k0(e){for(var t="",r=0,n,i=0;i<e.length;r>=65536?i+=2:i++)r=Ir(e,i),n=xe[r],!n&&qr(r)?(t+=e[i],r>=65536&&(t+=e[i+1])):t+=n||P0(r);return t}function M0(e,t,r){var n="",i=e.tag,a,o,s;for(a=0,o=r.length;a<o;a+=1)s=r[a],e.replacer&&(s=e.replacer.call(r,String(a),s)),(ft(e,t,s,!1,!1)||typeof s>"u"&&ft(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function Cs(e,t,r,n){var i="",a=e.tag,o,s,l;for(o=0,s=r.length;o<s;o+=1)l=r[o],e.replacer&&(l=e.replacer.call(r,String(o),l)),(ft(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&ft(e,t+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=Ta(e,t)),e.dump&&Gr===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=a,e.dump=i||"[]"}function B0(e,t,r){var n="",i=e.tag,a=Object.keys(r),o,s,l,p,c;for(o=0,s=a.length;o<s;o+=1)c="",n!==""&&(c+=", "),e.condenseFlow&&(c+='"'),l=a[o],p=r[l],e.replacer&&(p=e.replacer.call(r,l,p)),ft(e,t,l,!1,!1)&&(e.dump.length>1024&&(c+="? "),c+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),ft(e,t,p,!1,!1)&&(c+=e.dump,n+=c));e.tag=i,e.dump="{"+n+"}"}function j0(e,t,r,n){var i="",a=e.tag,o=Object.keys(r),s,l,p,c,f,d;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new an("sortKeys must be a boolean or a function");for(s=0,l=o.length;s<l;s+=1)d="",(!n||i!=="")&&(d+=Ta(e,t)),p=o[s],c=r[p],e.replacer&&(c=e.replacer.call(r,p,c)),ft(e,t+1,p,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&Gr===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,f&&(d+=Ta(e,t)),ft(e,t+1,c,!0,f)&&(e.dump&&Gr===e.dump.charCodeAt(0)?d+=":":d+=": ",d+=e.dump,i+=d));e.tag=a,e.dump=i||"{}"}function Os(e,t,r){var n,i,a,o,s,l;for(i=r?e.explicitTypes:e.implicitTypes,a=0,o=i.length;a<o;a+=1)if(s=i[a],(s.instanceOf||s.predicate)&&(!s.instanceOf||typeof t=="object"&&t instanceof s.instanceOf)&&(!s.predicate||s.predicate(t))){if(r?s.multi&&s.representName?e.tag=s.representName(t):e.tag=s.tag:e.tag="?",s.represent){if(l=e.styleMap[s.tag]||s.defaultStyle,$u.call(s.represent)==="[object Function]")n=s.represent(t,l);else if(Nu.call(s.represent,l))n=s.represent[l](t,l);else throw new an("!<"+s.tag+'> tag resolver accepts not "'+l+'" style');e.dump=n}return!0}return!1}function ft(e,t,r,n,i,a,o){e.tag=null,e.dump=r,Os(e,r,!1)||Os(e,r,!0);var s=$u.call(e.dump),l=n,p;n&&(n=e.flowLevel<0||e.flowLevel>t);var c=s==="[object Object]"||s==="[object Array]",f,d;if(c&&(f=e.duplicates.indexOf(r),d=f!==-1),(e.tag!==null&&e.tag!=="?"||d||e.indent!==2&&t>0)&&(i=!1),d&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(c&&d&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),s==="[object Object]")n&&Object.keys(e.dump).length!==0?(j0(e,t,e.dump,i),d&&(e.dump="&ref_"+f+e.dump)):(B0(e,t,e.dump),d&&(e.dump="&ref_"+f+" "+e.dump));else if(s==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?Cs(e,t-1,e.dump,i):Cs(e,t,e.dump,i),d&&(e.dump="&ref_"+f+e.dump)):(M0(e,t,e.dump),d&&(e.dump="&ref_"+f+" "+e.dump));else if(s==="[object String]")e.tag!=="?"&&L0(e,e.dump,t,a,l);else{if(s==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new an("unacceptable kind of an object to dump "+s)}e.tag!==null&&e.tag!=="?"&&(p=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?p="!"+p:p.slice(0,18)==="tag:yaml.org,2002:"?p="!!"+p.slice(18):p="!<"+p+">",e.dump=p+" "+e.dump)}return!0}function G0(e,t){var r=[],n=[],i,a;for(Ca(e,r,n),i=0,a=n.length;i<a;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(a)}function Ca(e,t,r){var n,i,a;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,a=e.length;i<a;i+=1)Ca(e[i],t,r);else for(n=Object.keys(e),i=0,a=n.length;i<a;i+=1)Ca(e[n[i]],t,r)}function H0(e,t){t=t||{};var r=new I0(t);r.noRefs||G0(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),ft(r,0,n,!0,!0)?r.dump+`
`:""}Iu.dump=H0;var Hu=Va,q0=Iu;function Qa(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}Ce.Type=ke;Ce.Schema=tu;Ce.FAILSAFE_SCHEMA=au;Ce.JSON_SCHEMA=fu;Ce.CORE_SCHEMA=du;Ce.DEFAULT_SCHEMA=za;Ce.load=Hu.load;Ce.loadAll=Hu.loadAll;Ce.dump=q0.dump;Ce.YAMLException=nn;Ce.types={binary:yu,float:uu,map:iu,null:ou,pairs:Eu,set:vu,timestamp:mu,bool:su,int:lu,merge:gu,omap:wu,seq:nu,str:ru};Ce.safeLoad=Qa("safeLoad","load");Ce.safeLoadAll=Qa("safeLoadAll","loadAll");Ce.safeDump=Qa("safeDump","dump");var ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.Lazy=void 0;class W0{constructor(t){this._value=null,this.creator=t}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const t=this.creator();return this.value=t,t}set value(t){this._value=t,this.creator=null}}ui.Lazy=W0;var Oa={exports:{}};const V0="2.0.0",qu=256,Y0=Number.MAX_SAFE_INTEGER||9007199254740991,z0=16,X0=qu-6,J0=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var fi={MAX_LENGTH:qu,MAX_SAFE_COMPONENT_LENGTH:z0,MAX_SAFE_BUILD_LENGTH:X0,MAX_SAFE_INTEGER:Y0,RELEASE_TYPES:J0,SEMVER_SPEC_VERSION:V0,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const K0=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var di=K0;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=fi,a=di;t=e.exports={};const o=t.re=[],s=t.safeRe=[],l=t.src=[],p=t.safeSrc=[],c=t.t={};let f=0;const d="[a-zA-Z0-9-]",g=[["\\s",1],["\\d",i],[d,n]],E=b=>{for(const[T,S]of g)b=b.split(`${T}*`).join(`${T}{0,${S}}`).split(`${T}+`).join(`${T}{1,${S}}`);return b},w=(b,T,S)=>{const N=E(T),L=f++;a(b,L,T),c[b]=L,l[L]=T,p[L]=N,o[L]=new RegExp(T,S?"g":void 0),s[L]=new RegExp(N,S?"g":void 0)};w("NUMERICIDENTIFIER","0|[1-9]\\d*"),w("NUMERICIDENTIFIERLOOSE","\\d+"),w("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),w("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),w("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASEIDENTIFIER",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIER]})`),w("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),w("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),w("BUILDIDENTIFIER",`${d}+`),w("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),w("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),w("FULL",`^${l[c.FULLPLAIN]}$`),w("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),w("LOOSE",`^${l[c.LOOSEPLAIN]}$`),w("GTLT","((?:<|>)?=?)"),w("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),w("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),w("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),w("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),w("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),w("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),w("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),w("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),w("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),w("COERCERTL",l[c.COERCE],!0),w("COERCERTLFULL",l[c.COERCEFULL],!0),w("LONETILDE","(?:~>?)"),w("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",w("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),w("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),w("LONECARET","(?:\\^)"),w("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",w("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),w("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),w("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),w("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),w("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",w("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),w("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),w("STAR","(<|>)?=?\\s*\\*"),w("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),w("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Oa,Oa.exports);var on=Oa.exports;const Q0=Object.freeze({loose:!0}),Z0=Object.freeze({}),ey=e=>e?typeof e!="object"?Q0:e:Z0;var Za=ey;const Rs=/^[0-9]+$/,Wu=(e,t)=>{if(typeof e=="number"&&typeof t=="number")return e===t?0:e<t?-1:1;const r=Rs.test(e),n=Rs.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},ty=(e,t)=>Wu(t,e);var Vu={compareIdentifiers:Wu,rcompareIdentifiers:ty};const Rn=di,{MAX_LENGTH:Ps,MAX_SAFE_INTEGER:Pn}=fi,{safeRe:xn,t:In}=on,ry=Za,{compareIdentifiers:Vi}=Vu;let ny=class at{constructor(t,r){if(r=ry(r),t instanceof at){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Ps)throw new TypeError(`version is longer than ${Ps} characters`);Rn("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?xn[In.LOOSE]:xn[In.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Pn||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Pn||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Pn||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const a=+i;if(a>=0&&a<Pn)return a}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Rn("SemVer.compare",this.version,this.options,t),!(t instanceof at)){if(typeof t=="string"&&t===this.version)return 0;t=new at(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof at||(t=new at(t,this.options)),this.major<t.major?-1:this.major>t.major?1:this.minor<t.minor?-1:this.minor>t.minor?1:this.patch<t.patch?-1:this.patch>t.patch?1:0}comparePre(t){if(t instanceof at||(t=new at(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],i=t.prerelease[r];if(Rn("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Vi(n,i)}while(++r)}compareBuild(t){t instanceof at||(t=new at(t,this.options));let r=0;do{const n=this.build[r],i=t.build[r];if(Rn("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Vi(n,i)}while(++r)}inc(t,r,n){if(t.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){const i=`-${r}`.match(this.options.loose?xn[In.PRERELEASELOOSE]:xn[In.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let a=[r,i];n===!1&&(a=[r]),Vi(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Me=ny;const xs=Me,iy=(e,t,r=!1)=>{if(e instanceof xs)return e;try{return new xs(e,t)}catch(n){if(!r)return null;throw n}};var wr=iy;const ay=wr,oy=(e,t)=>{const r=ay(e,t);return r?r.version:null};var sy=oy;const ly=wr,cy=(e,t)=>{const r=ly(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var uy=cy;const Is=Me,fy=(e,t,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new Is(e instanceof Is?e.version:e,r).inc(t,n,i).version}catch{return null}};var dy=fy;const $s=wr,hy=(e,t)=>{const r=$s(e,null,!0),n=$s(t,null,!0),i=r.compare(n);if(i===0)return null;const a=i>0,o=a?r:n,s=a?n:r,l=!!o.prerelease.length;if(!!s.prerelease.length&&!l){if(!s.patch&&!s.minor)return"major";if(s.compareMain(o)===0)return s.minor&&!s.patch?"minor":"patch"}const c=l?"pre":"";return r.major!==n.major?c+"major":r.minor!==n.minor?c+"minor":r.patch!==n.patch?c+"patch":"prerelease"};var py=hy;const my=Me,gy=(e,t)=>new my(e,t).major;var yy=gy;const wy=Me,Ey=(e,t)=>new wy(e,t).minor;var vy=Ey;const _y=Me,by=(e,t)=>new _y(e,t).patch;var Sy=by;const Ty=wr,Ay=(e,t)=>{const r=Ty(e,t);return r&&r.prerelease.length?r.prerelease:null};var Cy=Ay;const Ns=Me,Oy=(e,t,r)=>new Ns(e,r).compare(new Ns(t,r));var Ze=Oy;const Ry=Ze,Py=(e,t,r)=>Ry(t,e,r);var xy=Py;const Iy=Ze,$y=(e,t)=>Iy(e,t,!0);var Ny=$y;const Ds=Me,Dy=(e,t,r)=>{const n=new Ds(e,r),i=new Ds(t,r);return n.compare(i)||n.compareBuild(i)};var eo=Dy;const Fy=eo,Ly=(e,t)=>e.sort((r,n)=>Fy(r,n,t));var Uy=Ly;const ky=eo,My=(e,t)=>e.sort((r,n)=>ky(n,r,t));var By=My;const jy=Ze,Gy=(e,t,r)=>jy(e,t,r)>0;var hi=Gy;const Hy=Ze,qy=(e,t,r)=>Hy(e,t,r)<0;var to=qy;const Wy=Ze,Vy=(e,t,r)=>Wy(e,t,r)===0;var Yu=Vy;const Yy=Ze,zy=(e,t,r)=>Yy(e,t,r)!==0;var zu=zy;const Xy=Ze,Jy=(e,t,r)=>Xy(e,t,r)>=0;var ro=Jy;const Ky=Ze,Qy=(e,t,r)=>Ky(e,t,r)<=0;var no=Qy;const Zy=Yu,ew=zu,tw=hi,rw=ro,nw=to,iw=no,aw=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Zy(e,r,n);case"!=":return ew(e,r,n);case">":return tw(e,r,n);case">=":return rw(e,r,n);case"<":return nw(e,r,n);case"<=":return iw(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var Xu=aw;const ow=Me,sw=wr,{safeRe:$n,t:Nn}=on,lw=(e,t)=>{if(e instanceof ow)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?$n[Nn.COERCEFULL]:$n[Nn.COERCE]);else{const l=t.includePrerelease?$n[Nn.COERCERTLFULL]:$n[Nn.COERCERTL];let p;for(;(p=l.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||p.index+p[0].length!==r.index+r[0].length)&&(r=p),l.lastIndex=p.index+p[1].length+p[2].length;l.lastIndex=-1}if(r===null)return null;const n=r[2],i=r[3]||"0",a=r[4]||"0",o=t.includePrerelease&&r[5]?`-${r[5]}`:"",s=t.includePrerelease&&r[6]?`+${r[6]}`:"";return sw(`${n}.${i}.${a}${o}${s}`,t)};var cw=lw;class uw{constructor(){this.max=1e3,this.map=new Map}get(t){const r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,r)}return this}}var fw=uw,Yi,Fs;function et(){if(Fs)return Yi;Fs=1;const e=/\s+/g;class t{constructor(O,$){if($=i($),O instanceof t)return O.loose===!!$.loose&&O.includePrerelease===!!$.includePrerelease?O:new t(O.raw,$);if(O instanceof a)return this.raw=O.value,this.set=[[O]],this.formatted=void 0,this;if(this.options=$,this.loose=!!$.loose,this.includePrerelease=!!$.includePrerelease,this.raw=O.trim().replace(e," "),this.set=this.raw.split("||").map(C=>this.parseRange(C.trim())).filter(C=>C.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const C=this.set[0];if(this.set=this.set.filter(D=>!w(D[0])),this.set.length===0)this.set=[C];else if(this.set.length>1){for(const D of this.set)if(D.length===1&&b(D[0])){this.set=[D];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let O=0;O<this.set.length;O++){O>0&&(this.formatted+="||");const $=this.set[O];for(let C=0;C<$.length;C++)C>0&&(this.formatted+=" "),this.formatted+=$[C].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(O){const C=((this.options.includePrerelease&&g)|(this.options.loose&&E))+":"+O,D=n.get(C);if(D)return D;const x=this.options.loose,M=x?l[p.HYPHENRANGELOOSE]:l[p.HYPHENRANGE];O=O.replace(M,B(this.options.includePrerelease)),o("hyphen replace",O),O=O.replace(l[p.COMPARATORTRIM],c),o("comparator trim",O),O=O.replace(l[p.TILDETRIM],f),o("tilde trim",O),O=O.replace(l[p.CARETTRIM],d),o("caret trim",O);let W=O.split(" ").map(k=>S(k,this.options)).join(" ").split(/\s+/).map(k=>j(k,this.options));x&&(W=W.filter(k=>(o("loose invalid filter",k,this.options),!!k.match(l[p.COMPARATORLOOSE])))),o("range list",W);const G=new Map,Z=W.map(k=>new a(k,this.options));for(const k of Z){if(w(k))return[k];G.set(k.value,k)}G.size>1&&G.has("")&&G.delete("");const Ee=[...G.values()];return n.set(C,Ee),Ee}intersects(O,$){if(!(O instanceof t))throw new TypeError("a Range is required");return this.set.some(C=>T(C,$)&&O.set.some(D=>T(D,$)&&C.every(x=>D.every(M=>x.intersects(M,$)))))}test(O){if(!O)return!1;if(typeof O=="string")try{O=new s(O,this.options)}catch{return!1}for(let $=0;$<this.set.length;$++)if(Q(this.set[$],O,this.options))return!0;return!1}}Yi=t;const r=fw,n=new r,i=Za,a=pi(),o=di,s=Me,{safeRe:l,t:p,comparatorTrimReplace:c,tildeTrimReplace:f,caretTrimReplace:d}=on,{FLAG_INCLUDE_PRERELEASE:g,FLAG_LOOSE:E}=fi,w=P=>P.value==="<0.0.0-0",b=P=>P.value==="",T=(P,O)=>{let $=!0;const C=P.slice();let D=C.pop();for(;$&&C.length;)$=C.every(x=>D.intersects(x,O)),D=C.pop();return $},S=(P,O)=>(P=P.replace(l[p.BUILD],""),o("comp",P,O),P=fe(P,O),o("caret",P),P=L(P,O),o("tildes",P),P=Ge(P,O),o("xrange",P),P=q(P,O),o("stars",P),P),N=P=>!P||P.toLowerCase()==="x"||P==="*",L=(P,O)=>P.trim().split(/\s+/).map($=>ae($,O)).join(" "),ae=(P,O)=>{const $=O.loose?l[p.TILDELOOSE]:l[p.TILDE];return P.replace($,(C,D,x,M,W)=>{o("tilde",P,C,D,x,M,W);let G;return N(D)?G="":N(x)?G=`>=${D}.0.0 <${+D+1}.0.0-0`:N(M)?G=`>=${D}.${x}.0 <${D}.${+x+1}.0-0`:W?(o("replaceTilde pr",W),G=`>=${D}.${x}.${M}-${W} <${D}.${+x+1}.0-0`):G=`>=${D}.${x}.${M} <${D}.${+x+1}.0-0`,o("tilde return",G),G})},fe=(P,O)=>P.trim().split(/\s+/).map($=>z($,O)).join(" "),z=(P,O)=>{o("caret",P,O);const $=O.loose?l[p.CARETLOOSE]:l[p.CARET],C=O.includePrerelease?"-0":"";return P.replace($,(D,x,M,W,G)=>{o("caret",P,D,x,M,W,G);let Z;return N(x)?Z="":N(M)?Z=`>=${x}.0.0${C} <${+x+1}.0.0-0`:N(W)?x==="0"?Z=`>=${x}.${M}.0${C} <${x}.${+M+1}.0-0`:Z=`>=${x}.${M}.0${C} <${+x+1}.0.0-0`:G?(o("replaceCaret pr",G),x==="0"?M==="0"?Z=`>=${x}.${M}.${W}-${G} <${x}.${M}.${+W+1}-0`:Z=`>=${x}.${M}.${W}-${G} <${x}.${+M+1}.0-0`:Z=`>=${x}.${M}.${W}-${G} <${+x+1}.0.0-0`):(o("no pr"),x==="0"?M==="0"?Z=`>=${x}.${M}.${W}${C} <${x}.${M}.${+W+1}-0`:Z=`>=${x}.${M}.${W}${C} <${x}.${+M+1}.0-0`:Z=`>=${x}.${M}.${W} <${+x+1}.0.0-0`),o("caret return",Z),Z})},Ge=(P,O)=>(o("replaceXRanges",P,O),P.split(/\s+/).map($=>y($,O)).join(" ")),y=(P,O)=>{P=P.trim();const $=O.loose?l[p.XRANGELOOSE]:l[p.XRANGE];return P.replace($,(C,D,x,M,W,G)=>{o("xRange",P,C,D,x,M,W,G);const Z=N(x),Ee=Z||N(M),k=Ee||N(W),rt=k;return D==="="&&rt&&(D=""),G=O.includePrerelease?"-0":"",Z?D===">"||D==="<"?C="<0.0.0-0":C="*":D&&rt?(Ee&&(M=0),W=0,D===">"?(D=">=",Ee?(x=+x+1,M=0,W=0):(M=+M+1,W=0)):D==="<="&&(D="<",Ee?x=+x+1:M=+M+1),D==="<"&&(G="-0"),C=`${D+x}.${M}.${W}${G}`):Ee?C=`>=${x}.0.0${G} <${+x+1}.0.0-0`:k&&(C=`>=${x}.${M}.0${G} <${x}.${+M+1}.0-0`),o("xRange return",C),C})},q=(P,O)=>(o("replaceStars",P,O),P.trim().replace(l[p.STAR],"")),j=(P,O)=>(o("replaceGTE0",P,O),P.trim().replace(l[O.includePrerelease?p.GTE0PRE:p.GTE0],"")),B=P=>(O,$,C,D,x,M,W,G,Z,Ee,k,rt)=>(N(C)?$="":N(D)?$=`>=${C}.0.0${P?"-0":""}`:N(x)?$=`>=${C}.${D}.0${P?"-0":""}`:M?$=`>=${$}`:$=`>=${$}${P?"-0":""}`,N(Z)?G="":N(Ee)?G=`<${+Z+1}.0.0-0`:N(k)?G=`<${Z}.${+Ee+1}.0-0`:rt?G=`<=${Z}.${Ee}.${k}-${rt}`:P?G=`<${Z}.${Ee}.${+k+1}-0`:G=`<=${G}`,`${$} ${G}`.trim()),Q=(P,O,$)=>{for(let C=0;C<P.length;C++)if(!P[C].test(O))return!1;if(O.prerelease.length&&!$.includePrerelease){for(let C=0;C<P.length;C++)if(o(P[C].semver),P[C].semver!==a.ANY&&P[C].semver.prerelease.length>0){const D=P[C].semver;if(D.major===O.major&&D.minor===O.minor&&D.patch===O.patch)return!0}return!1}return!0};return Yi}var zi,Ls;function pi(){if(Ls)return zi;Ls=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=r(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new s(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new s(c,this.options)}catch{return!1}return a(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,f).test(c.semver):(f=r(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||a(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||a(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}zi=t;const r=Za,{safeRe:n,t:i}=on,a=Xu,o=di,s=Me,l=et();return zi}const dw=et(),hw=(e,t,r)=>{try{t=new dw(t,r)}catch{return!1}return t.test(e)};var mi=hw;const pw=et(),mw=(e,t)=>new pw(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var gw=mw;const yw=Me,ww=et(),Ew=(e,t,r)=>{let n=null,i=null,a=null;try{a=new ww(t,r)}catch{return null}return e.forEach(o=>{a.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new yw(n,r))}),n};var vw=Ew;const _w=Me,bw=et(),Sw=(e,t,r)=>{let n=null,i=null,a=null;try{a=new bw(t,r)}catch{return null}return e.forEach(o=>{a.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new _w(n,r))}),n};var Tw=Sw;const Xi=Me,Aw=et(),Us=hi,Cw=(e,t)=>{e=new Aw(e,t);let r=new Xi("0.0.0");if(e.test(r)||(r=new Xi("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const i=e.set[n];let a=null;i.forEach(o=>{const s=new Xi(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!a||Us(s,a))&&(a=s);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),a&&(!r||Us(r,a))&&(r=a)}return r&&e.test(r)?r:null};var Ow=Cw;const Rw=et(),Pw=(e,t)=>{try{return new Rw(e,t).range||"*"}catch{return null}};var xw=Pw;const Iw=Me,Ju=pi(),{ANY:$w}=Ju,Nw=et(),Dw=mi,ks=hi,Ms=to,Fw=no,Lw=ro,Uw=(e,t,r,n)=>{e=new Iw(e,n),t=new Nw(t,n);let i,a,o,s,l;switch(r){case">":i=ks,a=Fw,o=Ms,s=">",l=">=";break;case"<":i=Ms,a=Lw,o=ks,s="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Dw(e,t,n))return!1;for(let p=0;p<t.set.length;++p){const c=t.set[p];let f=null,d=null;if(c.forEach(g=>{g.semver===$w&&(g=new Ju(">=0.0.0")),f=f||g,d=d||g,i(g.semver,f.semver,n)?f=g:o(g.semver,d.semver,n)&&(d=g)}),f.operator===s||f.operator===l||(!d.operator||d.operator===s)&&a(e,d.semver))return!1;if(d.operator===l&&o(e,d.semver))return!1}return!0};var io=Uw;const kw=io,Mw=(e,t,r)=>kw(e,t,">",r);var Bw=Mw;const jw=io,Gw=(e,t,r)=>jw(e,t,"<",r);var Hw=Gw;const Bs=et(),qw=(e,t,r)=>(e=new Bs(e,r),t=new Bs(t,r),e.intersects(t,r));var Ww=qw;const Vw=mi,Yw=Ze;var zw=(e,t,r)=>{const n=[];let i=null,a=null;const o=e.sort((c,f)=>Yw(c,f,r));for(const c of o)Vw(c,t,r)?(a=c,i||(i=c)):(a&&n.push([i,a]),a=null,i=null);i&&n.push([i,null]);const s=[];for(const[c,f]of n)c===f?s.push(c):!f&&c===o[0]?s.push("*"):f?c===o[0]?s.push(`<=${f}`):s.push(`${c} - ${f}`):s.push(`>=${c}`);const l=s.join(" || "),p=typeof t.raw=="string"?t.raw:String(t);return l.length<p.length?l:t};const js=et(),ao=pi(),{ANY:Ji}=ao,Or=mi,oo=Ze,Xw=(e,t,r={})=>{if(e===t)return!0;e=new js(e,r),t=new js(t,r);let n=!1;e:for(const i of e.set){for(const a of t.set){const o=Kw(i,a,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},Jw=[new ao(">=0.0.0-0")],Gs=[new ao(">=0.0.0")],Kw=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Ji){if(t.length===1&&t[0].semver===Ji)return!0;r.includePrerelease?e=Jw:e=Gs}if(t.length===1&&t[0].semver===Ji){if(r.includePrerelease)return!0;t=Gs}const n=new Set;let i,a;for(const g of e)g.operator===">"||g.operator===">="?i=Hs(i,g,r):g.operator==="<"||g.operator==="<="?a=qs(a,g,r):n.add(g.semver);if(n.size>1)return null;let o;if(i&&a){if(o=oo(i.semver,a.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||a.operator!=="<="))return null}for(const g of n){if(i&&!Or(g,String(i),r)||a&&!Or(g,String(a),r))return null;for(const E of t)if(!Or(g,String(E),r))return!1;return!0}let s,l,p,c,f=a&&!r.includePrerelease&&a.semver.prerelease.length?a.semver:!1,d=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&a.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(const g of t){if(c=c||g.operator===">"||g.operator===">=",p=p||g.operator==="<"||g.operator==="<=",i){if(d&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===d.major&&g.semver.minor===d.minor&&g.semver.patch===d.patch&&(d=!1),g.operator===">"||g.operator===">="){if(s=Hs(i,g,r),s===g&&s!==i)return!1}else if(i.operator===">="&&!Or(i.semver,String(g),r))return!1}if(a){if(f&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===f.major&&g.semver.minor===f.minor&&g.semver.patch===f.patch&&(f=!1),g.operator==="<"||g.operator==="<="){if(l=qs(a,g,r),l===g&&l!==a)return!1}else if(a.operator==="<="&&!Or(a.semver,String(g),r))return!1}if(!g.operator&&(a||i)&&o!==0)return!1}return!(i&&p&&!a&&o!==0||a&&c&&!i&&o!==0||d||f)},Hs=(e,t,r)=>{if(!e)return t;const n=oo(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},qs=(e,t,r)=>{if(!e)return t;const n=oo(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var Qw=Xw;const Ki=on,Ws=fi,Zw=Me,Vs=Vu,eE=wr,tE=sy,rE=uy,nE=dy,iE=py,aE=yy,oE=vy,sE=Sy,lE=Cy,cE=Ze,uE=xy,fE=Ny,dE=eo,hE=Uy,pE=By,mE=hi,gE=to,yE=Yu,wE=zu,EE=ro,vE=no,_E=Xu,bE=cw,SE=pi(),TE=et(),AE=mi,CE=gw,OE=vw,RE=Tw,PE=Ow,xE=xw,IE=io,$E=Bw,NE=Hw,DE=Ww,FE=zw,LE=Qw;var Ku={parse:eE,valid:tE,clean:rE,inc:nE,diff:iE,major:aE,minor:oE,patch:sE,prerelease:lE,compare:cE,rcompare:uE,compareLoose:fE,compareBuild:dE,sort:hE,rsort:pE,gt:mE,lt:gE,eq:yE,neq:wE,gte:EE,lte:vE,cmp:_E,coerce:bE,Comparator:SE,Range:TE,satisfies:AE,toComparators:CE,maxSatisfying:OE,minSatisfying:RE,minVersion:PE,validRange:xE,outside:IE,gtr:$E,ltr:NE,intersects:DE,simplifyRange:FE,subset:LE,SemVer:Zw,re:Ki.re,src:Ki.src,tokens:Ki.t,SEMVER_SPEC_VERSION:Ws.SEMVER_SPEC_VERSION,RELEASE_TYPES:Ws.RELEASE_TYPES,compareIdentifiers:Vs.compareIdentifiers,rcompareIdentifiers:Vs.rcompareIdentifiers},sn={},Zn={exports:{}};Zn.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",i=1,a=2,o=9007199254740991,s="[object Arguments]",l="[object Array]",p="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",g="[object Function]",E="[object GeneratorFunction]",w="[object Map]",b="[object Number]",T="[object Null]",S="[object Object]",N="[object Promise]",L="[object Proxy]",ae="[object RegExp]",fe="[object Set]",z="[object String]",Ge="[object Symbol]",y="[object Undefined]",q="[object WeakMap]",j="[object ArrayBuffer]",B="[object DataView]",Q="[object Float32Array]",P="[object Float64Array]",O="[object Int8Array]",$="[object Int16Array]",C="[object Int32Array]",D="[object Uint8Array]",x="[object Uint8ClampedArray]",M="[object Uint16Array]",W="[object Uint32Array]",G=/[\\^$.*+?()[\]{}|]/g,Z=/^\[object .+?Constructor\]$/,Ee=/^(?:0|[1-9]\d*)$/,k={};k[Q]=k[P]=k[O]=k[$]=k[C]=k[D]=k[x]=k[M]=k[W]=!0,k[s]=k[l]=k[j]=k[c]=k[B]=k[f]=k[d]=k[g]=k[w]=k[b]=k[S]=k[ae]=k[fe]=k[z]=k[q]=!1;var rt=typeof Ne=="object"&&Ne&&Ne.Object===Object&&Ne,h=typeof self=="object"&&self&&self.Object===Object&&self,u=rt||h||Function("return this")(),A=t&&!t.nodeType&&t,_=A&&!0&&e&&!e.nodeType&&e,X=_&&_.exports===A,re=X&&rt.process,ce=function(){try{return re&&re.binding&&re.binding("util")}catch{}}(),be=ce&&ce.isTypedArray;function Oe(m,v){for(var R=-1,F=m==null?0:m.length,ne=0,H=[];++R<F;){var ue=m[R];v(ue,R,m)&&(H[ne++]=ue)}return H}function dt(m,v){for(var R=-1,F=v.length,ne=m.length;++R<F;)m[ne+R]=v[R];return m}function ge(m,v){for(var R=-1,F=m==null?0:m.length;++R<F;)if(v(m[R],R,m))return!0;return!1}function Ve(m,v){for(var R=-1,F=Array(m);++R<m;)F[R]=v(R);return F}function Ai(m){return function(v){return m(v)}}function dn(m,v){return m.has(v)}function _r(m,v){return m==null?void 0:m[v]}function hn(m){var v=-1,R=Array(m.size);return m.forEach(function(F,ne){R[++v]=[ne,F]}),R}function hf(m,v){return function(R){return m(v(R))}}function pf(m){var v=-1,R=Array(m.size);return m.forEach(function(F){R[++v]=F}),R}var mf=Array.prototype,gf=Function.prototype,pn=Object.prototype,Ci=u["__core-js_shared__"],yo=gf.toString,nt=pn.hasOwnProperty,wo=function(){var m=/[^.]+$/.exec(Ci&&Ci.keys&&Ci.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}(),Eo=pn.toString,yf=RegExp("^"+yo.call(nt).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vo=X?u.Buffer:void 0,mn=u.Symbol,_o=u.Uint8Array,bo=pn.propertyIsEnumerable,wf=mf.splice,It=mn?mn.toStringTag:void 0,So=Object.getOwnPropertySymbols,Ef=vo?vo.isBuffer:void 0,vf=hf(Object.keys,Object),Oi=zt(u,"DataView"),br=zt(u,"Map"),Ri=zt(u,"Promise"),Pi=zt(u,"Set"),xi=zt(u,"WeakMap"),Sr=zt(Object,"create"),_f=Dt(Oi),bf=Dt(br),Sf=Dt(Ri),Tf=Dt(Pi),Af=Dt(xi),To=mn?mn.prototype:void 0,Ii=To?To.valueOf:void 0;function $t(m){var v=-1,R=m==null?0:m.length;for(this.clear();++v<R;){var F=m[v];this.set(F[0],F[1])}}function Cf(){this.__data__=Sr?Sr(null):{},this.size=0}function Of(m){var v=this.has(m)&&delete this.__data__[m];return this.size-=v?1:0,v}function Rf(m){var v=this.__data__;if(Sr){var R=v[m];return R===n?void 0:R}return nt.call(v,m)?v[m]:void 0}function Pf(m){var v=this.__data__;return Sr?v[m]!==void 0:nt.call(v,m)}function xf(m,v){var R=this.__data__;return this.size+=this.has(m)?0:1,R[m]=Sr&&v===void 0?n:v,this}$t.prototype.clear=Cf,$t.prototype.delete=Of,$t.prototype.get=Rf,$t.prototype.has=Pf,$t.prototype.set=xf;function lt(m){var v=-1,R=m==null?0:m.length;for(this.clear();++v<R;){var F=m[v];this.set(F[0],F[1])}}function If(){this.__data__=[],this.size=0}function $f(m){var v=this.__data__,R=yn(v,m);if(R<0)return!1;var F=v.length-1;return R==F?v.pop():wf.call(v,R,1),--this.size,!0}function Nf(m){var v=this.__data__,R=yn(v,m);return R<0?void 0:v[R][1]}function Df(m){return yn(this.__data__,m)>-1}function Ff(m,v){var R=this.__data__,F=yn(R,m);return F<0?(++this.size,R.push([m,v])):R[F][1]=v,this}lt.prototype.clear=If,lt.prototype.delete=$f,lt.prototype.get=Nf,lt.prototype.has=Df,lt.prototype.set=Ff;function Nt(m){var v=-1,R=m==null?0:m.length;for(this.clear();++v<R;){var F=m[v];this.set(F[0],F[1])}}function Lf(){this.size=0,this.__data__={hash:new $t,map:new(br||lt),string:new $t}}function Uf(m){var v=wn(this,m).delete(m);return this.size-=v?1:0,v}function kf(m){return wn(this,m).get(m)}function Mf(m){return wn(this,m).has(m)}function Bf(m,v){var R=wn(this,m),F=R.size;return R.set(m,v),this.size+=R.size==F?0:1,this}Nt.prototype.clear=Lf,Nt.prototype.delete=Uf,Nt.prototype.get=kf,Nt.prototype.has=Mf,Nt.prototype.set=Bf;function gn(m){var v=-1,R=m==null?0:m.length;for(this.__data__=new Nt;++v<R;)this.add(m[v])}function jf(m){return this.__data__.set(m,n),this}function Gf(m){return this.__data__.has(m)}gn.prototype.add=gn.prototype.push=jf,gn.prototype.has=Gf;function ht(m){var v=this.__data__=new lt(m);this.size=v.size}function Hf(){this.__data__=new lt,this.size=0}function qf(m){var v=this.__data__,R=v.delete(m);return this.size=v.size,R}function Wf(m){return this.__data__.get(m)}function Vf(m){return this.__data__.has(m)}function Yf(m,v){var R=this.__data__;if(R instanceof lt){var F=R.__data__;if(!br||F.length<r-1)return F.push([m,v]),this.size=++R.size,this;R=this.__data__=new Nt(F)}return R.set(m,v),this.size=R.size,this}ht.prototype.clear=Hf,ht.prototype.delete=qf,ht.prototype.get=Wf,ht.prototype.has=Vf,ht.prototype.set=Yf;function zf(m,v){var R=En(m),F=!R&&cd(m),ne=!R&&!F&&$i(m),H=!R&&!F&&!ne&&No(m),ue=R||F||ne||H,ve=ue?Ve(m.length,String):[],Se=ve.length;for(var oe in m)nt.call(m,oe)&&!(ue&&(oe=="length"||ne&&(oe=="offset"||oe=="parent")||H&&(oe=="buffer"||oe=="byteLength"||oe=="byteOffset")||id(oe,Se)))&&ve.push(oe);return ve}function yn(m,v){for(var R=m.length;R--;)if(Po(m[R][0],v))return R;return-1}function Xf(m,v,R){var F=v(m);return En(m)?F:dt(F,R(m))}function Tr(m){return m==null?m===void 0?y:T:It&&It in Object(m)?rd(m):ld(m)}function Ao(m){return Ar(m)&&Tr(m)==s}function Co(m,v,R,F,ne){return m===v?!0:m==null||v==null||!Ar(m)&&!Ar(v)?m!==m&&v!==v:Jf(m,v,R,F,Co,ne)}function Jf(m,v,R,F,ne,H){var ue=En(m),ve=En(v),Se=ue?l:pt(m),oe=ve?l:pt(v);Se=Se==s?S:Se,oe=oe==s?S:oe;var He=Se==S,Ye=oe==S,Re=Se==oe;if(Re&&$i(m)){if(!$i(v))return!1;ue=!0,He=!1}if(Re&&!He)return H||(H=new ht),ue||No(m)?Oo(m,v,R,F,ne,H):ed(m,v,Se,R,F,ne,H);if(!(R&i)){var qe=He&&nt.call(m,"__wrapped__"),We=Ye&&nt.call(v,"__wrapped__");if(qe||We){var mt=qe?m.value():m,ct=We?v.value():v;return H||(H=new ht),ne(mt,ct,R,F,H)}}return Re?(H||(H=new ht),td(m,v,R,F,ne,H)):!1}function Kf(m){if(!$o(m)||od(m))return!1;var v=xo(m)?yf:Z;return v.test(Dt(m))}function Qf(m){return Ar(m)&&Io(m.length)&&!!k[Tr(m)]}function Zf(m){if(!sd(m))return vf(m);var v=[];for(var R in Object(m))nt.call(m,R)&&R!="constructor"&&v.push(R);return v}function Oo(m,v,R,F,ne,H){var ue=R&i,ve=m.length,Se=v.length;if(ve!=Se&&!(ue&&Se>ve))return!1;var oe=H.get(m);if(oe&&H.get(v))return oe==v;var He=-1,Ye=!0,Re=R&a?new gn:void 0;for(H.set(m,v),H.set(v,m);++He<ve;){var qe=m[He],We=v[He];if(F)var mt=ue?F(We,qe,He,v,m,H):F(qe,We,He,m,v,H);if(mt!==void 0){if(mt)continue;Ye=!1;break}if(Re){if(!ge(v,function(ct,Ft){if(!dn(Re,Ft)&&(qe===ct||ne(qe,ct,R,F,H)))return Re.push(Ft)})){Ye=!1;break}}else if(!(qe===We||ne(qe,We,R,F,H))){Ye=!1;break}}return H.delete(m),H.delete(v),Ye}function ed(m,v,R,F,ne,H,ue){switch(R){case B:if(m.byteLength!=v.byteLength||m.byteOffset!=v.byteOffset)return!1;m=m.buffer,v=v.buffer;case j:return!(m.byteLength!=v.byteLength||!H(new _o(m),new _o(v)));case c:case f:case b:return Po(+m,+v);case d:return m.name==v.name&&m.message==v.message;case ae:case z:return m==v+"";case w:var ve=hn;case fe:var Se=F&i;if(ve||(ve=pf),m.size!=v.size&&!Se)return!1;var oe=ue.get(m);if(oe)return oe==v;F|=a,ue.set(m,v);var He=Oo(ve(m),ve(v),F,ne,H,ue);return ue.delete(m),He;case Ge:if(Ii)return Ii.call(m)==Ii.call(v)}return!1}function td(m,v,R,F,ne,H){var ue=R&i,ve=Ro(m),Se=ve.length,oe=Ro(v),He=oe.length;if(Se!=He&&!ue)return!1;for(var Ye=Se;Ye--;){var Re=ve[Ye];if(!(ue?Re in v:nt.call(v,Re)))return!1}var qe=H.get(m);if(qe&&H.get(v))return qe==v;var We=!0;H.set(m,v),H.set(v,m);for(var mt=ue;++Ye<Se;){Re=ve[Ye];var ct=m[Re],Ft=v[Re];if(F)var Do=ue?F(Ft,ct,Re,v,m,H):F(ct,Ft,Re,m,v,H);if(!(Do===void 0?ct===Ft||ne(ct,Ft,R,F,H):Do)){We=!1;break}mt||(mt=Re=="constructor")}if(We&&!mt){var vn=m.constructor,_n=v.constructor;vn!=_n&&"constructor"in m&&"constructor"in v&&!(typeof vn=="function"&&vn instanceof vn&&typeof _n=="function"&&_n instanceof _n)&&(We=!1)}return H.delete(m),H.delete(v),We}function Ro(m){return Xf(m,dd,nd)}function wn(m,v){var R=m.__data__;return ad(v)?R[typeof v=="string"?"string":"hash"]:R.map}function zt(m,v){var R=_r(m,v);return Kf(R)?R:void 0}function rd(m){var v=nt.call(m,It),R=m[It];try{m[It]=void 0;var F=!0}catch{}var ne=Eo.call(m);return F&&(v?m[It]=R:delete m[It]),ne}var nd=So?function(m){return m==null?[]:(m=Object(m),Oe(So(m),function(v){return bo.call(m,v)}))}:hd,pt=Tr;(Oi&&pt(new Oi(new ArrayBuffer(1)))!=B||br&&pt(new br)!=w||Ri&&pt(Ri.resolve())!=N||Pi&&pt(new Pi)!=fe||xi&&pt(new xi)!=q)&&(pt=function(m){var v=Tr(m),R=v==S?m.constructor:void 0,F=R?Dt(R):"";if(F)switch(F){case _f:return B;case bf:return w;case Sf:return N;case Tf:return fe;case Af:return q}return v});function id(m,v){return v=v??o,!!v&&(typeof m=="number"||Ee.test(m))&&m>-1&&m%1==0&&m<v}function ad(m){var v=typeof m;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?m!=="__proto__":m===null}function od(m){return!!wo&&wo in m}function sd(m){var v=m&&m.constructor,R=typeof v=="function"&&v.prototype||pn;return m===R}function ld(m){return Eo.call(m)}function Dt(m){if(m!=null){try{return yo.call(m)}catch{}try{return m+""}catch{}}return""}function Po(m,v){return m===v||m!==m&&v!==v}var cd=Ao(function(){return arguments}())?Ao:function(m){return Ar(m)&&nt.call(m,"callee")&&!bo.call(m,"callee")},En=Array.isArray;function ud(m){return m!=null&&Io(m.length)&&!xo(m)}var $i=Ef||pd;function fd(m,v){return Co(m,v)}function xo(m){if(!$o(m))return!1;var v=Tr(m);return v==g||v==E||v==p||v==L}function Io(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=o}function $o(m){var v=typeof m;return m!=null&&(v=="object"||v=="function")}function Ar(m){return m!=null&&typeof m=="object"}var No=be?Ai(be):Qf;function dd(m){return ud(m)?zf(m):Zf(m)}function hd(){return[]}function pd(){return!1}e.exports=fd})(Zn,Zn.exports);var UE=Zn.exports;Object.defineProperty(sn,"__esModule",{value:!0});sn.DownloadedUpdateHelper=void 0;sn.createTempUpdateFile=GE;const kE=Qr,ME=Ot,Ys=UE,Ut=Pt,Fr=le;class BE{constructor(t){this.cacheDir=t,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return Fr.join(this.cacheDir,"pending")}async validateDownloadedPath(t,r,n,i){if(this.versionInfo!=null&&this.file===t&&this.fileInfo!=null)return Ys(this.versionInfo,r)&&Ys(this.fileInfo.info,n.info)&&await(0,Ut.pathExists)(t)?t:null;const a=await this.getValidCachedUpdateFile(n,i);return a===null?null:(i.info(`Update has already been downloaded to ${t}).`),this._file=a,a)}async setDownloadedFile(t,r,n,i,a,o){this._file=t,this._packageFile=r,this.versionInfo=n,this.fileInfo=i,this._downloadedFileInfo={fileName:a,sha512:i.info.sha512,isAdminRightsRequired:i.info.isAdminRightsRequired===!0},o&&await(0,Ut.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,Ut.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(t,r){const n=this.getUpdateInfoFile();if(!await(0,Ut.pathExists)(n))return null;let a;try{a=await(0,Ut.readJson)(n)}catch(p){let c="No cached update info available";return p.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),c+=` (error on read: ${p.message})`),r.info(c),null}if(!((a==null?void 0:a.fileName)!==null))return r.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(t.info.sha512!==a.sha512)return r.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${a.sha512}, expected: ${t.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const s=Fr.join(this.cacheDirForPendingUpdate,a.fileName);if(!await(0,Ut.pathExists)(s))return r.info("Cached update file doesn't exist"),null;const l=await jE(s);return t.info.sha512!==l?(r.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${l}, expected: ${t.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=a,s)}getUpdateInfoFile(){return Fr.join(this.cacheDirForPendingUpdate,"update-info.json")}}sn.DownloadedUpdateHelper=BE;function jE(e,t="sha512",r="base64",n){return new Promise((i,a)=>{const o=(0,kE.createHash)(t);o.on("error",a).setEncoding(r),(0,ME.createReadStream)(e,{...n,highWaterMark:1024*1024}).on("error",a).on("end",()=>{o.end(),i(o.read())}).pipe(o,{end:!1})})}async function GE(e,t,r){let n=0,i=Fr.join(t,e);for(let a=0;a<3;a++)try{return await(0,Ut.unlink)(i),i}catch(o){if(o.code==="ENOENT")return i;r.warn(`Error on remove temp update file: ${o}`),i=Fr.join(t,`${n++}-${e}`)}return i}var gi={},so={};Object.defineProperty(so,"__esModule",{value:!0});so.getAppCacheDir=qE;const Qi=le,HE=ri;function qE(){const e=(0,HE.homedir)();let t;return process.platform==="win32"?t=process.env.LOCALAPPDATA||Qi.join(e,"AppData","Local"):process.platform==="darwin"?t=Qi.join(e,"Library","Caches"):t=process.env.XDG_CACHE_HOME||Qi.join(e,".cache"),t}Object.defineProperty(gi,"__esModule",{value:!0});gi.ElectronAppAdapter=void 0;const zs=le,WE=so;class VE{constructor(t=I.app){this.app=t}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?zs.join(process.resourcesPath,"app-update.yml"):zs.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,WE.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(t){this.app.once("quit",(r,n)=>t(n))}}gi.ElectronAppAdapter=VE;var Qu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ElectronHttpExecutor=e.NET_SESSION_NAME=void 0,e.getNetSession=r;const t=we;e.NET_SESSION_NAME="electron-updater";function r(){return I.session.fromPartition(e.NET_SESSION_NAME,{cache:!1})}class n extends t.HttpExecutor{constructor(a){super(),this.proxyLoginCallback=a,this.cachedSession=null}async download(a,o,s){return await s.cancellationToken.createPromise((l,p,c)=>{const f={headers:s.headers||void 0,redirect:"manual"};(0,t.configureRequestUrl)(a,f),(0,t.configureRequestOptions)(f),this.doDownload(f,{destination:o,options:s,onCancel:c,callback:d=>{d==null?l(o):p(d)},responseHandler:null},0)})}createRequest(a,o){a.headers&&a.headers.Host&&(a.host=a.headers.Host,delete a.headers.Host),this.cachedSession==null&&(this.cachedSession=r());const s=I.net.request({...a,session:this.cachedSession});return s.on("response",o),this.proxyLoginCallback!=null&&s.on("login",this.proxyLoginCallback),s}addRedirectHandlers(a,o,s,l,p){a.on("redirect",(c,f,d)=>{a.abort(),l>this.maxRedirects?s(this.createMaxRedirectError()):p(t.HttpExecutor.prepareRedirectUrlOptions(d,o))})}}e.ElectronHttpExecutor=n})(Qu);var ln={},tt={};Object.defineProperty(tt,"__esModule",{value:!0});tt.newBaseUrl=YE;tt.newUrlFromBase=zE;tt.getChannelFilename=XE;const Zu=Rt;function YE(e){const t=new Zu.URL(e);return t.pathname.endsWith("/")||(t.pathname+="/"),t}function zE(e,t,r=!1){const n=new Zu.URL(e,t),i=t.search;return i!=null&&i.length!==0?n.search=i:r&&(n.search=`noCache=${Date.now().toString(32)}`),n}function XE(e){return`${e}.yml`}var he={},JE="[object Symbol]",ef=/[\\^$.*+?()[\]{}|]/g,KE=RegExp(ef.source),QE=typeof Ne=="object"&&Ne&&Ne.Object===Object&&Ne,ZE=typeof self=="object"&&self&&self.Object===Object&&self,ev=QE||ZE||Function("return this")(),tv=Object.prototype,rv=tv.toString,Xs=ev.Symbol,Js=Xs?Xs.prototype:void 0,Ks=Js?Js.toString:void 0;function nv(e){if(typeof e=="string")return e;if(av(e))return Ks?Ks.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function iv(e){return!!e&&typeof e=="object"}function av(e){return typeof e=="symbol"||iv(e)&&rv.call(e)==JE}function ov(e){return e==null?"":nv(e)}function sv(e){return e=ov(e),e&&KE.test(e)?e.replace(ef,"\\$&"):e}var tf=sv;Object.defineProperty(he,"__esModule",{value:!0});he.Provider=void 0;he.findFile=dv;he.parseUpdateInfo=hv;he.getFileList=rf;he.resolveFiles=pv;const At=we,lv=Ce,cv=Rt,ei=tt,uv=tf;class fv{constructor(t){this.runtimeOptions=t,this.requestHeaders=null,this.executor=t.executor}getBlockMapFiles(t,r,n,i=null){const a=(0,ei.newUrlFromBase)(`${t.pathname}.blockmap`,t);return[(0,ei.newUrlFromBase)(`${t.pathname.replace(new RegExp(uv(n),"g"),r)}.blockmap`,i?new cv.URL(i):t),a]}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const t=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(t==="x64"?"":`-${t}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(t){return`${t}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(t){this.requestHeaders=t}httpRequest(t,r,n){return this.executor.request(this.createRequestOptions(t,r),n)}createRequestOptions(t,r){const n={};return this.requestHeaders==null?r!=null&&(n.headers=r):n.headers=r==null?this.requestHeaders:{...this.requestHeaders,...r},(0,At.configureRequestUrl)(t,n),n}}he.Provider=fv;function dv(e,t,r){var n;if(e.length===0)throw(0,At.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const i=e.filter(o=>o.url.pathname.toLowerCase().endsWith(`.${t.toLowerCase()}`)),a=(n=i.find(o=>[o.url.pathname,o.info.url].some(s=>s.includes(process.arch))))!==null&&n!==void 0?n:i.shift();return a||(r==null?e[0]:e.find(o=>!r.some(s=>o.url.pathname.toLowerCase().endsWith(`.${s.toLowerCase()}`))))}function hv(e,t,r){if(e==null)throw(0,At.newError)(`Cannot parse update info from ${t} in the latest release artifacts (${r}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let n;try{n=(0,lv.load)(e)}catch(i){throw(0,At.newError)(`Cannot parse update info from ${t} in the latest release artifacts (${r}): ${i.stack||i.message}, rawData: ${e}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return n}function rf(e){const t=e.files;if(t!=null&&t.length>0)return t;if(e.path!=null)return[{url:e.path,sha2:e.sha2,sha512:e.sha512}];throw(0,At.newError)(`No files provided: ${(0,At.safeStringifyJson)(e)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}function pv(e,t,r=n=>n){const i=rf(e).map(s=>{if(s.sha2==null&&s.sha512==null)throw(0,At.newError)(`Update info doesn't contain nor sha256 neither sha512 checksum: ${(0,At.safeStringifyJson)(s)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:(0,ei.newUrlFromBase)(r(s.url),t),info:s}}),a=e.packages,o=a==null?null:a[process.arch]||a.ia32;return o!=null&&(i[0].packageInfo={...o,path:(0,ei.newUrlFromBase)(r(o.path),t).href}),i}Object.defineProperty(ln,"__esModule",{value:!0});ln.GenericProvider=void 0;const Qs=we,Zi=tt,ea=he;class mv extends ea.Provider{constructor(t,r,n){super(n),this.configuration=t,this.updater=r,this.baseUrl=(0,Zi.newBaseUrl)(this.configuration.url)}get channel(){const t=this.updater.channel||this.configuration.channel;return t==null?this.getDefaultChannelName():this.getCustomChannelName(t)}async getLatestVersion(){const t=(0,Zi.getChannelFilename)(this.channel),r=(0,Zi.newUrlFromBase)(t,this.baseUrl,this.updater.isAddNoCacheQuery);for(let n=0;;n++)try{return(0,ea.parseUpdateInfo)(await this.httpRequest(r),t,r)}catch(i){if(i instanceof Qs.HttpError&&i.statusCode===404)throw(0,Qs.newError)(`Cannot find channel "${t}" update info: ${i.stack||i.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(i.code==="ECONNREFUSED"&&n<3){await new Promise((a,o)=>{try{setTimeout(a,1e3*n)}catch(s){o(s)}});continue}throw i}}resolveFiles(t){return(0,ea.resolveFiles)(t,this.baseUrl)}}ln.GenericProvider=mv;var yi={},wi={};Object.defineProperty(wi,"__esModule",{value:!0});wi.BitbucketProvider=void 0;const Zs=we,ta=tt,ra=he;class gv extends ra.Provider{constructor(t,r,n){super({...n,isUseMultipleRangeRequest:!1}),this.configuration=t,this.updater=r;const{owner:i,slug:a}=t;this.baseUrl=(0,ta.newBaseUrl)(`https://api.bitbucket.org/2.0/repositories/${i}/${a}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const t=new Zs.CancellationToken,r=(0,ta.getChannelFilename)(this.getCustomChannelName(this.channel)),n=(0,ta.newUrlFromBase)(r,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(n,void 0,t);return(0,ra.parseUpdateInfo)(i,r,n)}catch(i){throw(0,Zs.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(t){return(0,ra.resolveFiles)(t,this.baseUrl)}toString(){const{owner:t,slug:r}=this.configuration;return`Bitbucket (owner: ${t}, slug: ${r}, channel: ${this.channel})`}}wi.BitbucketProvider=gv;var Ct={};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.GitHubProvider=Ct.BaseGitHubProvider=void 0;Ct.computeReleaseNotes=af;const ut=we,or=Ku,yv=Rt,sr=tt,Ra=he,na=/\/tag\/([^/]+)$/;class nf extends Ra.Provider{constructor(t,r,n){super({...n,isUseMultipleRangeRequest:!1}),this.options=t,this.baseUrl=(0,sr.newBaseUrl)((0,ut.githubUrl)(t,r));const i=r==="github.com"?"api.github.com":r;this.baseApiUrl=(0,sr.newBaseUrl)((0,ut.githubUrl)(t,i))}computeGithubBasePath(t){const r=this.options.host;return r&&!["github.com","api.github.com"].includes(r)?`/api/v3${t}`:t}}Ct.BaseGitHubProvider=nf;class wv extends nf{constructor(t,r,n){super(t,"github.com",n),this.options=t,this.updater=r}get channel(){const t=this.updater.channel||this.options.channel;return t==null?this.getDefaultChannelName():this.getCustomChannelName(t)}async getLatestVersion(){var t,r,n,i,a;const o=new ut.CancellationToken,s=await this.httpRequest((0,sr.newUrlFromBase)(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},o),l=(0,ut.parseXml)(s);let p=l.element("entry",!1,"No published versions on GitHub"),c=null;try{if(this.updater.allowPrerelease){const b=((t=this.updater)===null||t===void 0?void 0:t.channel)||((r=or.prerelease(this.updater.currentVersion))===null||r===void 0?void 0:r[0])||null;if(b===null)c=na.exec(p.element("link").attribute("href"))[1];else for(const T of l.getElements("entry")){const S=na.exec(T.element("link").attribute("href"));if(S===null)continue;const N=S[1],L=((n=or.prerelease(N))===null||n===void 0?void 0:n[0])||null,ae=!b||["alpha","beta"].includes(b),fe=L!==null&&!["alpha","beta"].includes(String(L));if(ae&&!fe&&!(b==="beta"&&L==="alpha")){c=N;break}if(L&&L===b){c=N;break}}}else{c=await this.getLatestTagName(o);for(const b of l.getElements("entry"))if(na.exec(b.element("link").attribute("href"))[1]===c){p=b;break}}}catch(b){throw(0,ut.newError)(`Cannot parse releases feed: ${b.stack||b.message},
XML:
${s}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(c==null)throw(0,ut.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let f,d="",g="";const E=async b=>{d=(0,sr.getChannelFilename)(b),g=(0,sr.newUrlFromBase)(this.getBaseDownloadPath(String(c),d),this.baseUrl);const T=this.createRequestOptions(g);try{return await this.executor.request(T,o)}catch(S){throw S instanceof ut.HttpError&&S.statusCode===404?(0,ut.newError)(`Cannot find ${d} in the latest release artifacts (${g}): ${S.stack||S.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):S}};try{let b=this.channel;this.updater.allowPrerelease&&(!((i=or.prerelease(c))===null||i===void 0)&&i[0])&&(b=this.getCustomChannelName(String((a=or.prerelease(c))===null||a===void 0?void 0:a[0]))),f=await E(b)}catch(b){if(this.updater.allowPrerelease)f=await E(this.getDefaultChannelName());else throw b}const w=(0,Ra.parseUpdateInfo)(f,d,g);return w.releaseName==null&&(w.releaseName=p.elementValueOrEmpty("title")),w.releaseNotes==null&&(w.releaseNotes=af(this.updater.currentVersion,this.updater.fullChangelog,l,p)),{tag:c,...w}}async getLatestTagName(t){const r=this.options,n=r.host==null||r.host==="github.com"?(0,sr.newUrlFromBase)(`${this.basePath}/latest`,this.baseUrl):new yv.URL(`${this.computeGithubBasePath(`/repos/${r.owner}/${r.repo}/releases`)}/latest`,this.baseApiUrl);try{const i=await this.httpRequest(n,{Accept:"application/json"},t);return i==null?null:JSON.parse(i).tag_name}catch(i){throw(0,ut.newError)(`Unable to find latest version on GitHub (${n}), please ensure a production release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(t){return(0,Ra.resolveFiles)(t,this.baseUrl,r=>this.getBaseDownloadPath(t.tag,r.replace(/ /g,"-")))}getBaseDownloadPath(t,r){return`${this.basePath}/download/${t}/${r}`}}Ct.GitHubProvider=wv;function el(e){const t=e.elementValueOrEmpty("content");return t==="No content."?"":t}function af(e,t,r,n){if(!t)return el(n);const i=[];for(const a of r.getElements("entry")){const o=/\/tag\/v?([^/]+)$/.exec(a.element("link").attribute("href"))[1];or.lt(e,o)&&i.push({version:o,note:el(a)})}return i.sort((a,o)=>or.rcompare(a.version,o.version))}var Ei={};Object.defineProperty(Ei,"__esModule",{value:!0});Ei.GitLabProvider=void 0;const Ie=we,ia=Rt,Ev=tf,Dn=tt,aa=he;class vv extends aa.Provider{normalizeFilename(t){return t.replace(/ |_/g,"-")}constructor(t,r,n){super({...n,isUseMultipleRangeRequest:!1}),this.options=t,this.updater=r,this.cachedLatestVersion=null;const a=t.host||"gitlab.com";this.baseApiUrl=(0,Dn.newBaseUrl)(`https://${a}/api/v4`)}get channel(){const t=this.updater.channel||this.options.channel;return t==null?this.getDefaultChannelName():this.getCustomChannelName(t)}async getLatestVersion(){const t=new Ie.CancellationToken,r=(0,Dn.newUrlFromBase)(`projects/${this.options.projectId}/releases/permalink/latest`,this.baseApiUrl);let n;try{const d={"Content-Type":"application/json",...this.setAuthHeaderForToken(this.options.token||null)},g=await this.httpRequest(r,d,t);if(!g)throw(0,Ie.newError)("No latest release found","ERR_UPDATER_NO_PUBLISHED_VERSIONS");n=JSON.parse(g)}catch(d){throw(0,Ie.newError)(`Unable to find latest release on GitLab (${r}): ${d.stack||d.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}const i=n.tag_name;let a=null,o="",s=null;const l=async d=>{o=(0,Dn.getChannelFilename)(d);const g=n.assets.links.find(w=>w.name===o);if(!g)throw(0,Ie.newError)(`Cannot find ${o} in the latest release assets`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");s=new ia.URL(g.direct_asset_url);const E=this.options.token?{"PRIVATE-TOKEN":this.options.token}:void 0;try{const w=await this.httpRequest(s,E,t);if(!w)throw(0,Ie.newError)(`Empty response from ${s}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");return w}catch(w){throw w instanceof Ie.HttpError&&w.statusCode===404?(0,Ie.newError)(`Cannot find ${o} in the latest release artifacts (${s}): ${w.stack||w.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):w}};try{a=await l(this.channel)}catch(d){if(this.channel!==this.getDefaultChannelName())a=await l(this.getDefaultChannelName());else throw d}if(!a)throw(0,Ie.newError)(`Unable to parse channel data from ${o}`,"ERR_UPDATER_INVALID_UPDATE_INFO");const p=(0,aa.parseUpdateInfo)(a,o,s);p.releaseName==null&&(p.releaseName=n.name),p.releaseNotes==null&&(p.releaseNotes=n.description||null);const c=new Map;for(const d of n.assets.links)c.set(this.normalizeFilename(d.name),d.direct_asset_url);const f={tag:i,assets:c,...p};return this.cachedLatestVersion=f,f}convertAssetsToMap(t){const r=new Map;for(const n of t.links)r.set(this.normalizeFilename(n.name),n.direct_asset_url);return r}findBlockMapInAssets(t,r){const n=[`${r}.blockmap`,`${this.normalizeFilename(r)}.blockmap`];for(const i of n){const a=t.get(i);if(a)return new ia.URL(a)}return null}async fetchReleaseInfoByVersion(t){const r=new Ie.CancellationToken,n=[`v${t}`,t];for(const i of n){const a=(0,Dn.newUrlFromBase)(`projects/${this.options.projectId}/releases/${encodeURIComponent(i)}`,this.baseApiUrl);try{const o={"Content-Type":"application/json",...this.setAuthHeaderForToken(this.options.token||null)},s=await this.httpRequest(a,o,r);if(s)return JSON.parse(s)}catch(o){if(o instanceof Ie.HttpError&&o.statusCode===404)continue;throw(0,Ie.newError)(`Unable to find release ${i} on GitLab (${a}): ${o.stack||o.message}`,"ERR_UPDATER_RELEASE_NOT_FOUND")}}throw(0,Ie.newError)(`Unable to find release with version ${t} (tried: ${n.join(", ")}) on GitLab`,"ERR_UPDATER_RELEASE_NOT_FOUND")}setAuthHeaderForToken(t){const r={};return t!=null&&(t.startsWith("Bearer")?r.authorization=t:r["PRIVATE-TOKEN"]=t),r}async getVersionInfoForBlockMap(t){if(this.cachedLatestVersion&&this.cachedLatestVersion.version===t)return this.cachedLatestVersion.assets;const r=await this.fetchReleaseInfoByVersion(t);return r&&r.assets?this.convertAssetsToMap(r.assets):null}async findBlockMapUrlsFromAssets(t,r,n){let i=null,a=null;const o=await this.getVersionInfoForBlockMap(r);o&&(i=this.findBlockMapInAssets(o,n));const s=await this.getVersionInfoForBlockMap(t);if(s){const l=n.replace(new RegExp(Ev(r),"g"),t);a=this.findBlockMapInAssets(s,l)}return[a,i]}async getBlockMapFiles(t,r,n,i=null){if(this.options.uploadTarget==="project_upload"){const a=t.pathname.split("/").pop()||"",[o,s]=await this.findBlockMapUrlsFromAssets(r,n,a);if(!s)throw(0,Ie.newError)(`Cannot find blockmap file for ${n} in GitLab assets`,"ERR_UPDATER_BLOCKMAP_FILE_NOT_FOUND");if(!o)throw(0,Ie.newError)(`Cannot find blockmap file for ${r} in GitLab assets`,"ERR_UPDATER_BLOCKMAP_FILE_NOT_FOUND");return[o,s]}else return super.getBlockMapFiles(t,r,n,i)}resolveFiles(t){return(0,aa.getFileList)(t).map(r=>{const i=[r.url,this.normalizeFilename(r.url)].find(o=>t.assets.has(o)),a=i?t.assets.get(i):void 0;if(!a)throw(0,Ie.newError)(`Cannot find asset "${r.url}" in GitLab release assets. Available assets: ${Array.from(t.assets.keys()).join(", ")}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new ia.URL(a),info:r}})}toString(){return`GitLab (projectId: ${this.options.projectId}, channel: ${this.channel})`}}Ei.GitLabProvider=vv;var vi={};Object.defineProperty(vi,"__esModule",{value:!0});vi.KeygenProvider=void 0;const tl=we,oa=tt,sa=he;class _v extends sa.Provider{constructor(t,r,n){super({...n,isUseMultipleRangeRequest:!1}),this.configuration=t,this.updater=r,this.defaultHostname="api.keygen.sh";const i=this.configuration.host||this.defaultHostname;this.baseUrl=(0,oa.newBaseUrl)(`https://${i}/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const t=new tl.CancellationToken,r=(0,oa.getChannelFilename)(this.getCustomChannelName(this.channel)),n=(0,oa.newUrlFromBase)(r,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(n,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},t);return(0,sa.parseUpdateInfo)(i,r,n)}catch(i){throw(0,tl.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(t){return(0,sa.resolveFiles)(t,this.baseUrl)}toString(){const{account:t,product:r,platform:n}=this.configuration;return`Keygen (account: ${t}, product: ${r}, platform: ${n}, channel: ${this.channel})`}}vi.KeygenProvider=_v;var _i={};Object.defineProperty(_i,"__esModule",{value:!0});_i.PrivateGitHubProvider=void 0;const Qt=we,bv=Ce,Sv=le,rl=Rt,nl=tt,Tv=Ct,Av=he;class Cv extends Tv.BaseGitHubProvider{constructor(t,r,n,i){super(t,"api.github.com",i),this.updater=r,this.token=n}createRequestOptions(t,r){const n=super.createRequestOptions(t,r);return n.redirect="manual",n}async getLatestVersion(){const t=new Qt.CancellationToken,r=(0,nl.getChannelFilename)(this.getDefaultChannelName()),n=await this.getLatestVersionInfo(t),i=n.assets.find(s=>s.name===r);if(i==null)throw(0,Qt.newError)(`Cannot find ${r} in the release ${n.html_url||n.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const a=new rl.URL(i.url);let o;try{o=(0,bv.load)(await this.httpRequest(a,this.configureHeaders("application/octet-stream"),t))}catch(s){throw s instanceof Qt.HttpError&&s.statusCode===404?(0,Qt.newError)(`Cannot find ${r} in the latest release artifacts (${a}): ${s.stack||s.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):s}return o.assets=n.assets,o}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(t){return{accept:t,authorization:`token ${this.token}`}}async getLatestVersionInfo(t){const r=this.updater.allowPrerelease;let n=this.basePath;r||(n=`${n}/latest`);const i=(0,nl.newUrlFromBase)(n,this.baseUrl);try{const a=JSON.parse(await this.httpRequest(i,this.configureHeaders("application/vnd.github.v3+json"),t));return r?a.find(o=>o.prerelease)||a[0]:a}catch(a){throw(0,Qt.newError)(`Unable to find latest version on GitHub (${i}), please ensure a production release exists: ${a.stack||a.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(t){return(0,Av.getFileList)(t).map(r=>{const n=Sv.posix.basename(r.url).replace(/ /g,"-"),i=t.assets.find(a=>a!=null&&a.name===n);if(i==null)throw(0,Qt.newError)(`Cannot find asset "${n}" in: ${JSON.stringify(t.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new rl.URL(i.url),info:r}})}}_i.PrivateGitHubProvider=Cv;Object.defineProperty(yi,"__esModule",{value:!0});yi.isUrlProbablySupportMultiRangeRequests=of;yi.createClient=$v;const Fn=we,Ov=wi,il=ln,Rv=Ct,Pv=Ei,xv=vi,Iv=_i;function of(e){return!e.includes("s3.amazonaws.com")}function $v(e,t,r){if(typeof e=="string")throw(0,Fn.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const n=e.provider;switch(n){case"github":{const i=e,a=(i.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||i.token;return a==null?new Rv.GitHubProvider(i,t,r):new Iv.PrivateGitHubProvider(i,t,a,r)}case"bitbucket":return new Ov.BitbucketProvider(e,t,r);case"gitlab":return new Pv.GitLabProvider(e,t,r);case"keygen":return new xv.KeygenProvider(e,t,r);case"s3":case"spaces":return new il.GenericProvider({provider:"generic",url:(0,Fn.getS3LikeProviderBaseUrl)(e),channel:e.channel||null},t,{...r,isUseMultipleRangeRequest:!1});case"generic":{const i=e;return new il.GenericProvider(i,t,{...r,isUseMultipleRangeRequest:i.useMultipleRangeRequest!==!1&&of(i.url)})}case"custom":{const i=e,a=i.updateProvider;if(!a)throw(0,Fn.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new a(i,t,r)}default:throw(0,Fn.newError)(`Unsupported provider: ${n}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}var bi={},cn={},Er={},Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.OperationKind=void 0;Yt.computeOperations=Nv;var Bt;(function(e){e[e.COPY=0]="COPY",e[e.DOWNLOAD=1]="DOWNLOAD"})(Bt||(Yt.OperationKind=Bt={}));function Nv(e,t,r){const n=ol(e.files),i=ol(t.files);let a=null;const o=t.files[0],s=[],l=o.name,p=n.get(l);if(p==null)throw new Error(`no file ${l} in old blockmap`);const c=i.get(l);let f=0;const{checksumToOffset:d,checksumToOldSize:g}=Fv(n.get(l),p.offset,r);let E=o.offset;for(let w=0;w<c.checksums.length;E+=c.sizes[w],w++){const b=c.sizes[w],T=c.checksums[w];let S=d.get(T);S!=null&&g.get(T)!==b&&(r.warn(`Checksum ("${T}") matches, but size differs (old: ${g.get(T)}, new: ${b})`),S=void 0),S===void 0?(f++,a!=null&&a.kind===Bt.DOWNLOAD&&a.end===E?a.end+=b:(a={kind:Bt.DOWNLOAD,start:E,end:E+b},al(a,s,T,w))):a!=null&&a.kind===Bt.COPY&&a.end===S?a.end+=b:(a={kind:Bt.COPY,start:S,end:S+b},al(a,s,T,w))}return f>0&&r.info(`File${o.name==="file"?"":" "+o.name} has ${f} changed blocks`),s}const Dv=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function al(e,t,r,n){if(Dv&&t.length!==0){const i=t[t.length-1];if(i.kind===e.kind&&e.start<i.end&&e.start>i.start){const a=[i.start,i.end,e.start,e.end].reduce((o,s)=>o<s?o:s);throw new Error(`operation (block index: ${n}, checksum: ${r}, kind: ${Bt[e.kind]}) overlaps previous operation (checksum: ${r}):
abs: ${i.start} until ${i.end} and ${e.start} until ${e.end}
rel: ${i.start-a} until ${i.end-a} and ${e.start-a} until ${e.end-a}`)}}t.push(e)}function Fv(e,t,r){const n=new Map,i=new Map;let a=t;for(let o=0;o<e.checksums.length;o++){const s=e.checksums[o],l=e.sizes[o],p=i.get(s);if(p===void 0)n.set(s,a),i.set(s,l);else if(r.debug!=null){const c=p===l?"(same size)":`(size: ${p}, this size: ${l})`;r.debug(`${s} duplicated in blockmap ${c}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}a+=l}return{checksumToOffset:n,checksumToOldSize:i}}function ol(e){const t=new Map;for(const r of e)t.set(r.name,r);return t}Object.defineProperty(Er,"__esModule",{value:!0});Er.DataSplitter=void 0;Er.copyData=sf;const Ln=we,Lv=Ot,Uv=Kr,kv=Yt,sl=Buffer.from(`\r
\r
`);var yt;(function(e){e[e.INIT=0]="INIT",e[e.HEADER=1]="HEADER",e[e.BODY=2]="BODY"})(yt||(yt={}));function sf(e,t,r,n,i){const a=(0,Lv.createReadStream)("",{fd:r,autoClose:!1,start:e.start,end:e.end-1});a.on("error",n),a.once("end",i),a.pipe(t,{end:!1})}class Mv extends Uv.Writable{constructor(t,r,n,i,a,o){super(),this.out=t,this.options=r,this.partIndexToTaskIndex=n,this.partIndexToLength=a,this.finishHandler=o,this.partIndex=-1,this.headerListBuffer=null,this.readState=yt.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=i.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(t,r,n){if(this.isFinished){console.error(`Trailing ignored data: ${t.length} bytes`);return}this.handleData(t).then(n).catch(n)}async handleData(t){let r=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,Ln.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const n=Math.min(this.ignoreByteCount,t.length);this.ignoreByteCount-=n,r=n}else if(this.remainingPartDataCount>0){const n=Math.min(this.remainingPartDataCount,t.length);this.remainingPartDataCount-=n,await this.processPartData(t,0,n),r=n}if(r!==t.length){if(this.readState===yt.HEADER){const n=this.searchHeaderListEnd(t,r);if(n===-1)return;r=n,this.readState=yt.BODY,this.headerListBuffer=null}for(;;){if(this.readState===yt.BODY)this.readState=yt.INIT;else{this.partIndex++;let o=this.partIndexToTaskIndex.get(this.partIndex);if(o==null)if(this.isFinished)o=this.options.end;else throw(0,Ln.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const s=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(s<o)await this.copyExistingData(s,o);else if(s>o)throw(0,Ln.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(r=this.searchHeaderListEnd(t,r),r===-1){this.readState=yt.HEADER;return}}const n=this.partIndexToLength[this.partIndex],i=r+n,a=Math.min(i,t.length);if(await this.processPartStarted(t,r,a),this.remainingPartDataCount=n-(a-r),this.remainingPartDataCount>0)return;if(r=i+this.boundaryLength,r>=t.length){this.ignoreByteCount=this.boundaryLength-(t.length-i);return}}}}copyExistingData(t,r){return new Promise((n,i)=>{const a=()=>{if(t===r){n();return}const o=this.options.tasks[t];if(o.kind!==kv.OperationKind.COPY){i(new Error("Task kind must be COPY"));return}sf(o,this.out,this.options.oldFileFd,i,()=>{t++,a()})};a()})}searchHeaderListEnd(t,r){const n=t.indexOf(sl,r);if(n!==-1)return n+sl.length;const i=r===0?t:t.slice(r);return this.headerListBuffer==null?this.headerListBuffer=i:this.headerListBuffer=Buffer.concat([this.headerListBuffer,i]),-1}onPartEnd(){const t=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==t)throw(0,Ln.newError)(`Expected length: ${t} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(t,r,n){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(t,r,n)}processPartData(t,r,n){this.actualPartLength+=n-r;const i=this.out;return i.write(r===0&&t.length===n?t:t.slice(r,n))?Promise.resolve():new Promise((a,o)=>{i.on("error",o),i.once("drain",()=>{i.removeListener("error",o),a()})})}}Er.DataSplitter=Mv;var Si={};Object.defineProperty(Si,"__esModule",{value:!0});Si.executeTasksUsingMultipleRangeRequests=Bv;Si.checkIsRangesSupported=xa;const Pa=we,ll=Er,cl=Yt;function Bv(e,t,r,n,i){const a=o=>{if(o>=t.length){e.fileMetadataBuffer!=null&&r.write(e.fileMetadataBuffer),r.end();return}const s=o+1e3;jv(e,{tasks:t,start:o,end:Math.min(t.length,s),oldFileFd:n},r,()=>a(s),i)};return a}function jv(e,t,r,n,i){let a="bytes=",o=0;const s=new Map,l=[];for(let f=t.start;f<t.end;f++){const d=t.tasks[f];d.kind===cl.OperationKind.DOWNLOAD&&(a+=`${d.start}-${d.end-1}, `,s.set(o,f),o++,l.push(d.end-d.start))}if(o<=1){const f=d=>{if(d>=t.end){n();return}const g=t.tasks[d++];if(g.kind===cl.OperationKind.COPY)(0,ll.copyData)(g,r,t.oldFileFd,i,()=>f(d));else{const E=e.createRequestOptions();E.headers.Range=`bytes=${g.start}-${g.end-1}`;const w=e.httpExecutor.createRequest(E,b=>{b.on("error",i),xa(b,i)&&(b.pipe(r,{end:!1}),b.once("end",()=>f(d)))});e.httpExecutor.addErrorAndTimeoutHandlers(w,i),w.end()}};f(t.start);return}const p=e.createRequestOptions();p.headers.Range=a.substring(0,a.length-2);const c=e.httpExecutor.createRequest(p,f=>{if(!xa(f,i))return;const d=(0,Pa.safeGetHeader)(f,"content-type"),g=/^multipart\/.+?\s*;\s*boundary=(?:"([^"]+)"|([^\s";]+))\s*$/i.exec(d);if(g==null){i(new Error(`Content-Type "multipart/byteranges" is expected, but got "${d}"`));return}const E=new ll.DataSplitter(r,t,s,g[1]||g[2],l,n);E.on("error",i),f.pipe(E),f.on("end",()=>{setTimeout(()=>{c.abort(),i(new Error("Response ends without calling any handlers"))},1e4)})});e.httpExecutor.addErrorAndTimeoutHandlers(c,i),c.end()}function xa(e,t){if(e.statusCode>=400)return t((0,Pa.createHttpError)(e)),!1;if(e.statusCode!==206){const r=(0,Pa.safeGetHeader)(e,"accept-ranges");if(r==null||r==="none")return t(new Error(`Server doesn't support Accept-Ranges (response code ${e.statusCode})`)),!1}return!0}var Ti={};Object.defineProperty(Ti,"__esModule",{value:!0});Ti.ProgressDifferentialDownloadCallbackTransform=void 0;const Gv=Kr;var lr;(function(e){e[e.COPY=0]="COPY",e[e.DOWNLOAD=1]="DOWNLOAD"})(lr||(lr={}));class Hv extends Gv.Transform{constructor(t,r,n){super(),this.progressDifferentialDownloadInfo=t,this.cancellationToken=r,this.onProgress=n,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=lr.COPY,this.nextUpdate=this.start+1e3}_transform(t,r,n){if(this.cancellationToken.cancelled){n(new Error("cancelled"),null);return}if(this.operationType==lr.COPY){n(null,t);return}this.transferred+=t.length,this.delta+=t.length;const i=Date.now();i>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=i+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((i-this.start)/1e3))}),this.delta=0),n(null,t)}beginFileCopy(){this.operationType=lr.COPY}beginRangeDownload(){this.operationType=lr.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(t){if(this.cancellationToken.cancelled){t(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,t(null)}}Ti.ProgressDifferentialDownloadCallbackTransform=Hv;Object.defineProperty(cn,"__esModule",{value:!0});cn.DifferentialDownloader=void 0;const Rr=we,la=Pt,qv=Ot,Wv=Er,Vv=Rt,Un=Yt,ul=Si,Yv=Ti;class zv{constructor(t,r,n){this.blockAwareFileInfo=t,this.httpExecutor=r,this.options=n,this.fileMetadataBuffer=null,this.logger=n.logger}createRequestOptions(){const t={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,Rr.configureRequestUrl)(this.options.newUrl,t),(0,Rr.configureRequestOptions)(t),t}doDownload(t,r){if(t.version!==r.version)throw new Error(`version is different (${t.version} - ${r.version}), full download is required`);const n=this.logger,i=(0,Un.computeOperations)(t,r,n);n.debug!=null&&n.debug(JSON.stringify(i,null,2));let a=0,o=0;for(const l of i){const p=l.end-l.start;l.kind===Un.OperationKind.DOWNLOAD?a+=p:o+=p}const s=this.blockAwareFileInfo.size;if(a+o+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==s)throw new Error(`Internal error, size mismatch: downloadSize: ${a}, copySize: ${o}, newSize: ${s}`);return n.info(`Full: ${fl(s)}, To download: ${fl(a)} (${Math.round(a/(s/100))}%)`),this.downloadFile(i)}downloadFile(t){const r=[],n=()=>Promise.all(r.map(i=>(0,la.close)(i.descriptor).catch(a=>{this.logger.error(`cannot close file "${i.path}": ${a}`)})));return this.doDownloadFile(t,r).then(n).catch(i=>n().catch(a=>{try{this.logger.error(`cannot close files: ${a}`)}catch(o){try{console.error(o)}catch{}}throw i}).then(()=>{throw i}))}async doDownloadFile(t,r){const n=await(0,la.open)(this.options.oldFile,"r");r.push({descriptor:n,path:this.options.oldFile});const i=await(0,la.open)(this.options.newFile,"w");r.push({descriptor:i,path:this.options.newFile});const a=(0,qv.createWriteStream)(this.options.newFile,{fd:i});await new Promise((o,s)=>{const l=[];let p;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const T=[];let S=0;for(const L of t)L.kind===Un.OperationKind.DOWNLOAD&&(T.push(L.end-L.start),S+=L.end-L.start);const N={expectedByteCounts:T,grandTotal:S};p=new Yv.ProgressDifferentialDownloadCallbackTransform(N,this.options.cancellationToken,this.options.onProgress),l.push(p)}const c=new Rr.DigestTransform(this.blockAwareFileInfo.sha512);c.isValidateOnEnd=!1,l.push(c),a.on("finish",()=>{a.close(()=>{r.splice(1,1);try{c.validate()}catch(T){s(T);return}o(void 0)})}),l.push(a);let f=null;for(const T of l)T.on("error",s),f==null?f=T:f=f.pipe(T);const d=l[0];let g;if(this.options.isUseMultipleRangeRequest){g=(0,ul.executeTasksUsingMultipleRangeRequests)(this,t,d,n,s),g(0);return}let E=0,w=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const b=this.createRequestOptions();b.redirect="manual",g=T=>{var S,N;if(T>=t.length){this.fileMetadataBuffer!=null&&d.write(this.fileMetadataBuffer),d.end();return}const L=t[T++];if(L.kind===Un.OperationKind.COPY){p&&p.beginFileCopy(),(0,Wv.copyData)(L,d,n,s,()=>g(T));return}const ae=`bytes=${L.start}-${L.end-1}`;b.headers.range=ae,(N=(S=this.logger)===null||S===void 0?void 0:S.debug)===null||N===void 0||N.call(S,`download range: ${ae}`),p&&p.beginRangeDownload();const fe=this.httpExecutor.createRequest(b,z=>{z.on("error",s),z.on("aborted",()=>{s(new Error("response has been aborted by the server"))}),z.statusCode>=400&&s((0,Rr.createHttpError)(z)),z.pipe(d,{end:!1}),z.once("end",()=>{p&&p.endRangeDownload(),++E===100?(E=0,setTimeout(()=>g(T),1e3)):g(T)})});fe.on("redirect",(z,Ge,y)=>{this.logger.info(`Redirect to ${Xv(y)}`),w=y,(0,Rr.configureRequestUrl)(new Vv.URL(w),b),fe.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(fe,s),fe.end()},g(0)})}async readRemoteBytes(t,r){const n=Buffer.allocUnsafe(r+1-t),i=this.createRequestOptions();i.headers.range=`bytes=${t}-${r}`;let a=0;if(await this.request(i,o=>{o.copy(n,a),a+=o.length}),a!==n.length)throw new Error(`Received data length ${a} is not equal to expected ${n.length}`);return n}request(t,r){return new Promise((n,i)=>{const a=this.httpExecutor.createRequest(t,o=>{(0,ul.checkIsRangesSupported)(o,i)&&(o.on("error",i),o.on("aborted",()=>{i(new Error("response has been aborted by the server"))}),o.on("data",r),o.on("end",()=>n()))});this.httpExecutor.addErrorAndTimeoutHandlers(a,i),a.end()})}}cn.DifferentialDownloader=zv;function fl(e,t=" KB"){return new Intl.NumberFormat("en").format((e/1024).toFixed(2))+t}function Xv(e){const t=e.indexOf("?");return t<0?e:e.substring(0,t)}Object.defineProperty(bi,"__esModule",{value:!0});bi.GenericDifferentialDownloader=void 0;const Jv=cn;class Kv extends Jv.DifferentialDownloader{download(t,r){return this.doDownload(t,r)}}bi.GenericDifferentialDownloader=Kv;var xt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.UpdaterSignal=e.UPDATE_DOWNLOADED=e.DOWNLOAD_PROGRESS=e.CancellationToken=void 0,e.addHandler=n;const t=we;Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return t.CancellationToken}}),e.DOWNLOAD_PROGRESS="download-progress",e.UPDATE_DOWNLOADED="update-downloaded";class r{constructor(a){this.emitter=a}login(a){n(this.emitter,"login",a)}progress(a){n(this.emitter,e.DOWNLOAD_PROGRESS,a)}updateDownloaded(a){n(this.emitter,e.UPDATE_DOWNLOADED,a)}updateCancelled(a){n(this.emitter,"update-cancelled",a)}}e.UpdaterSignal=r;function n(i,a,o){i.on(a,o)}})(xt);Object.defineProperty(bt,"__esModule",{value:!0});bt.NoOpLogger=bt.AppUpdater=void 0;const $e=we,Qv=Qr,Zv=ri,e_=Ql,ze=Pt,t_=Ce,ca=ui,Xe=le,kt=Ku,dl=sn,r_=gi,hl=Qu,n_=ln,ua=yi,fa=ec,i_=bi,Zt=xt;class lo extends e_.EventEmitter{get channel(){return this._channel}set channel(t){if(this._channel!=null){if(typeof t!="string")throw(0,$e.newError)(`Channel must be a string, but got: ${t}`,"ERR_UPDATER_INVALID_CHANNEL");if(t.length===0)throw(0,$e.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=t,this.allowDowngrade=!0}addAuthHeader(t){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:t})}get netSession(){return(0,hl.getNetSession)()}get logger(){return this._logger}set logger(t){this._logger=t??new lf}set updateConfigPath(t){this.clientPromise=null,this._appUpdateConfigPath=t,this.configOnDisk=new ca.Lazy(()=>this.loadUpdateConfig())}get isUpdateSupported(){return this._isUpdateSupported}set isUpdateSupported(t){t&&(this._isUpdateSupported=t)}get isUserWithinRollout(){return this._isUserWithinRollout}set isUserWithinRollout(t){t&&(this._isUserWithinRollout=t)}constructor(t,r){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this.previousBlockmapBaseUrlOverride=null,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new Zt.UpdaterSignal(this),this._appUpdateConfigPath=null,this._isUpdateSupported=a=>this.checkIfUpdateSupported(a),this._isUserWithinRollout=a=>this.isStagingMatch(a),this.clientPromise=null,this.stagingUserIdPromise=new ca.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new ca.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",a=>{this._logger.error(`Error: ${a.stack||a.message}`)}),r==null?(this.app=new r_.ElectronAppAdapter,this.httpExecutor=new hl.ElectronHttpExecutor((a,o)=>this.emit("login",a,o))):(this.app=r,this.httpExecutor=null);const n=this.app.version,i=(0,kt.parse)(n);if(i==null)throw(0,$e.newError)(`App version is not a valid semver version: "${n}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=i,this.allowPrerelease=a_(i),t!=null&&(this.setFeedURL(t),typeof t!="string"&&t.requestHeaders&&(this.requestHeaders=t.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(t){const r=this.createProviderRuntimeOptions();let n;typeof t=="string"?n=new n_.GenericProvider({provider:"generic",url:t},this,{...r,isUseMultipleRangeRequest:(0,ua.isUrlProbablySupportMultiRangeRequests)(t)}):n=(0,ua.createClient)(t,this,r),this.clientPromise=Promise.resolve(n)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let t=this.checkForUpdatesPromise;if(t!=null)return this._logger.info("Checking for update (already in progress)"),t;const r=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),t=this.doCheckForUpdates().then(n=>(r(),n)).catch(n=>{throw r(),this.emit("error",n,`Cannot check for updates: ${(n.stack||n).toString()}`),n}),this.checkForUpdatesPromise=t,t}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(t){return this.checkForUpdates().then(r=>r!=null&&r.downloadPromise?(r.downloadPromise.then(()=>{const n=lo.formatDownloadNotification(r.updateInfo.version,this.app.name,t);new I.Notification(n).show()}),r):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),r))}static formatDownloadNotification(t,r,n){return n==null&&(n={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),n={title:n.title.replace("{appName}",r).replace("{version}",t),body:n.body.replace("{appName}",r).replace("{version}",t)},n}async isStagingMatch(t){const r=t.stagingPercentage;let n=r;if(n==null)return!0;if(n=parseInt(n,10),isNaN(n))return this._logger.warn(`Staging percentage is NaN: ${r}`),!0;n=n/100;const i=await this.stagingUserIdPromise.value,o=$e.UUID.parse(i).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${n}, percentage: ${o}, user id: ${i}`),o<n}computeFinalHeaders(t){return this.requestHeaders!=null&&Object.assign(t,this.requestHeaders),t}async isUpdateAvailable(t){const r=(0,kt.parse)(t.version);if(r==null)throw(0,$e.newError)(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${t.version}"`,"ERR_UPDATER_INVALID_VERSION");const n=this.currentVersion;if((0,kt.eq)(r,n)||!await Promise.resolve(this.isUpdateSupported(t))||!await Promise.resolve(this.isUserWithinRollout(t)))return!1;const a=(0,kt.gt)(r,n),o=(0,kt.lt)(r,n);return a?!0:this.allowDowngrade&&o}checkIfUpdateSupported(t){const r=t==null?void 0:t.minimumSystemVersion,n=(0,Zv.release)();if(r)try{if((0,kt.lt)(n,r))return this._logger.info(`Current OS version ${n} is less than the minimum OS version required ${r} for version ${n}`),!1}catch(i){this._logger.warn(`Failed to compare current OS version(${n}) with minimum OS version(${r}): ${(i.message||i).toString()}`)}return!0}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(n=>(0,ua.createClient)(n,this,this.createProviderRuntimeOptions())));const t=await this.clientPromise,r=await this.stagingUserIdPromise.value;return t.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":r})),{info:await t.getLatestVersion(),provider:t}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const t=await this.getUpdateInfoAndProvider(),r=t.info;if(!await this.isUpdateAvailable(r))return this._logger.info(`Update for version ${this.currentVersion.format()} is not available (latest version: ${r.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",r),{isUpdateAvailable:!1,versionInfo:r,updateInfo:r};this.updateInfoAndProvider=t,this.onUpdateAvailable(r);const n=new $e.CancellationToken;return{isUpdateAvailable:!0,versionInfo:r,updateInfo:r,cancellationToken:n,downloadPromise:this.autoDownload?this.downloadUpdate(n):null}}onUpdateAvailable(t){this._logger.info(`Found version ${t.version} (url: ${(0,$e.asArray)(t.files).map(r=>r.url).join(", ")})`),this.emit("update-available",t)}downloadUpdate(t=new $e.CancellationToken){const r=this.updateInfoAndProvider;if(r==null){const i=new Error("Please check update first");return this.dispatchError(i),Promise.reject(i)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info(`Downloading update from ${(0,$e.asArray)(r.info.files).map(i=>i.url).join(", ")}`);const n=i=>{if(!(i instanceof $e.CancellationError))try{this.dispatchError(i)}catch(a){this._logger.warn(`Cannot dispatch error event: ${a.stack||a}`)}return i};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:r,requestHeaders:this.computeRequestHeaders(r.provider),cancellationToken:t,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(i=>{throw n(i)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(t){this.emit("error",t,(t.stack||t).toString())}dispatchUpdateDownloaded(t){this.emit(Zt.UPDATE_DOWNLOADED,t)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,t_.load)(await(0,ze.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(t){const r=t.fileExtraDownloadHeaders;if(r!=null){const n=this.requestHeaders;return n==null?r:{...r,...n}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const t=Xe.join(this.app.userDataPath,".updaterId");try{const n=await(0,ze.readFile)(t,"utf-8");if($e.UUID.check(n))return n;this._logger.warn(`Staging user id file exists, but content was invalid: ${n}`)}catch(n){n.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${n}`)}const r=$e.UUID.v5((0,Qv.randomBytes)(4096),$e.UUID.OID);this._logger.info(`Generated new staging user ID: ${r}`);try{await(0,ze.outputFile)(t,r)}catch(n){this._logger.warn(`Couldn't write out staging user ID: ${n}`)}return r}get isAddNoCacheQuery(){const t=this.requestHeaders;if(t==null)return!0;for(const r of Object.keys(t)){const n=r.toLowerCase();if(n==="authorization"||n==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let t=this.downloadedUpdateHelper;if(t==null){const r=(await this.configOnDisk.value).updaterCacheDirName,n=this._logger;r==null&&n.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const i=Xe.join(this.app.baseCachePath,r||this.app.name);n.debug!=null&&n.debug(`updater cache dir: ${i}`),t=new dl.DownloadedUpdateHelper(i),this.downloadedUpdateHelper=t}return t}async executeDownload(t){const r=t.fileInfo,n={headers:t.downloadUpdateOptions.requestHeaders,cancellationToken:t.downloadUpdateOptions.cancellationToken,sha2:r.info.sha2,sha512:r.info.sha512};this.listenerCount(Zt.DOWNLOAD_PROGRESS)>0&&(n.onProgress=S=>this.emit(Zt.DOWNLOAD_PROGRESS,S));const i=t.downloadUpdateOptions.updateInfoAndProvider.info,a=i.version,o=r.packageInfo;function s(){const S=decodeURIComponent(t.fileInfo.url.pathname);return S.toLowerCase().endsWith(`.${t.fileExtension.toLowerCase()}`)?Xe.basename(S):t.fileInfo.info.url}const l=await this.getOrCreateDownloadHelper(),p=l.cacheDirForPendingUpdate;await(0,ze.mkdir)(p,{recursive:!0});const c=s();let f=Xe.join(p,c);const d=o==null?null:Xe.join(p,`package-${a}${Xe.extname(o.path)||".7z"}`),g=async S=>{await l.setDownloadedFile(f,d,i,r,c,S),await t.done({...i,downloadedFile:f});const N=Xe.join(p,"current.blockmap");return await(0,ze.pathExists)(N)&&await(0,ze.copyFile)(N,Xe.join(l.cacheDir,"current.blockmap")),d==null?[f]:[f,d]},E=this._logger,w=await l.validateDownloadedPath(f,i,r,E);if(w!=null)return f=w,await g(!1);const b=async()=>(await l.clear().catch(()=>{}),await(0,ze.unlink)(f).catch(()=>{})),T=await(0,dl.createTempUpdateFile)(`temp-${c}`,p,E);try{await t.task(T,n,d,b),await(0,$e.retry)(()=>(0,ze.rename)(T,f),{retries:60,interval:500,shouldRetry:S=>S instanceof Error&&/^EBUSY:/.test(S.message)?!0:(E.warn(`Cannot rename temp file to final file: ${S.message||S.stack}`),!1)})}catch(S){throw await b(),S instanceof $e.CancellationError&&(E.info("cancelled"),this.emit("update-cancelled",i)),S}return E.info(`New version ${a} has been downloaded to ${f}`),await g(!0)}async differentialDownloadInstaller(t,r,n,i,a){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const o=r.updateInfoAndProvider.provider,s=await o.getBlockMapFiles(t.url,this.app.version,r.updateInfoAndProvider.info.version,this.previousBlockmapBaseUrlOverride);this._logger.info(`Download block maps (old: "${s[0]}", new: ${s[1]})`);const l=async E=>{const w=await this.httpExecutor.downloadToBuffer(E,{headers:r.requestHeaders,cancellationToken:r.cancellationToken});if(w==null||w.length===0)throw new Error(`Blockmap "${E.href}" is empty`);try{return JSON.parse((0,fa.gunzipSync)(w).toString())}catch(b){throw new Error(`Cannot parse blockmap "${E.href}", error: ${b}`)}},p={newUrl:t.url,oldFile:Xe.join(this.downloadedUpdateHelper.cacheDir,a),logger:this._logger,newFile:n,isUseMultipleRangeRequest:o.isUseMultipleRangeRequest,requestHeaders:r.requestHeaders,cancellationToken:r.cancellationToken};this.listenerCount(Zt.DOWNLOAD_PROGRESS)>0&&(p.onProgress=E=>this.emit(Zt.DOWNLOAD_PROGRESS,E));const c=async(E,w)=>{const b=Xe.join(w,"current.blockmap");await(0,ze.outputFile)(b,(0,fa.gzipSync)(JSON.stringify(E)))},f=async E=>{const w=Xe.join(E,"current.blockmap");try{if(await(0,ze.pathExists)(w))return JSON.parse((0,fa.gunzipSync)(await(0,ze.readFile)(w)).toString())}catch(b){this._logger.warn(`Cannot parse blockmap "${w}", error: ${b}`)}return null},d=await l(s[1]);await c(d,this.downloadedUpdateHelper.cacheDirForPendingUpdate);let g=await f(this.downloadedUpdateHelper.cacheDir);return g==null&&(g=await l(s[0])),await new i_.GenericDifferentialDownloader(t.info,this.httpExecutor,p).download(g,d),!1}catch(o){if(this._logger.error(`Cannot download differentially, fallback to full download: ${o.stack||o}`),this._testOnlyOptions!=null)throw o;return!0}}}bt.AppUpdater=lo;function a_(e){const t=(0,kt.prerelease)(e);return t!=null&&t.length>0}class lf{info(t){}warn(t){}error(t){}}bt.NoOpLogger=lf;Object.defineProperty(Vt,"__esModule",{value:!0});Vt.BaseUpdater=void 0;const pl=ti,o_=bt;class s_ extends o_.AppUpdater{constructor(t,r){super(t,r),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(t=!1,r=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(t,t?r:this.autoRunAppAfterInstall)?setImmediate(()=>{I.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(t){return super.executeDownload({...t,done:r=>(this.dispatchUpdateDownloaded(r),this.addQuitHandler(),Promise.resolve())})}get installerPath(){return this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.file}install(t=!1,r=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const n=this.downloadedUpdateHelper,i=this.installerPath,a=n==null?null:n.downloadedFileInfo;if(i==null||a==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${t}, isForceRunAfter: ${r}`),this.doInstall({isSilent:t,isForceRunAfter:r,isAdminRightsRequired:a.isAdminRightsRequired})}catch(o){return this.dispatchError(o),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(t=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(t!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${t}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}spawnSyncLog(t,r=[],n={}){this._logger.info(`Executing: ${t} with args: ${r}`);const i=(0,pl.spawnSync)(t,r,{env:{...process.env,...n},encoding:"utf-8",shell:!0}),{error:a,status:o,stdout:s,stderr:l}=i;if(a!=null)throw this._logger.error(l),a;if(o!=null&&o!==0)throw this._logger.error(l),new Error(`Command ${t} exited with code ${o}`);return s.trim()}async spawnLog(t,r=[],n=void 0,i="ignore"){return this._logger.info(`Executing: ${t} with args: ${r}`),new Promise((a,o)=>{try{const s={stdio:i,env:n,detached:!0},l=(0,pl.spawn)(t,r,s);l.on("error",p=>{o(p)}),l.unref(),l.pid!==void 0&&a(!0)}catch(s){o(s)}})}}Vt.BaseUpdater=s_;var Wr={},un={};Object.defineProperty(un,"__esModule",{value:!0});un.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const er=Pt,l_=cn,c_=ec;class u_ extends l_.DifferentialDownloader{async download(){const t=this.blockAwareFileInfo,r=t.size,n=r-(t.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(n,r-1);const i=cf(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await f_(this.options.oldFile),i)}}un.FileWithEmbeddedBlockMapDifferentialDownloader=u_;function cf(e){return JSON.parse((0,c_.inflateRawSync)(e).toString())}async function f_(e){const t=await(0,er.open)(e,"r");try{const r=(await(0,er.fstat)(t)).size,n=Buffer.allocUnsafe(4);await(0,er.read)(t,n,0,n.length,r-n.length);const i=Buffer.allocUnsafe(n.readUInt32BE(0));return await(0,er.read)(t,i,0,i.length,r-n.length-i.length),await(0,er.close)(t),cf(i)}catch(r){throw await(0,er.close)(t),r}}Object.defineProperty(Wr,"__esModule",{value:!0});Wr.AppImageUpdater=void 0;const ml=we,gl=ti,d_=Pt,h_=Ot,Pr=le,p_=Vt,m_=un,g_=he,yl=xt;class y_ extends p_.BaseUpdater{constructor(t,r){super(t,r)}isUpdaterActive(){return process.env.APPIMAGE==null&&!this.forceDevUpdateConfig?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(t){const r=t.updateInfoAndProvider.provider,n=(0,g_.findFile)(r.resolveFiles(t.updateInfoAndProvider.info),"AppImage",["rpm","deb","pacman"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:n,downloadUpdateOptions:t,task:async(i,a)=>{const o=process.env.APPIMAGE;if(o==null)throw(0,ml.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(t.disableDifferentialDownload||await this.downloadDifferential(n,o,i,r,t))&&await this.httpExecutor.download(n.url,i,a),await(0,d_.chmod)(i,493)}})}async downloadDifferential(t,r,n,i,a){try{const o={newUrl:t.url,oldFile:r,logger:this._logger,newFile:n,isUseMultipleRangeRequest:i.isUseMultipleRangeRequest,requestHeaders:a.requestHeaders,cancellationToken:a.cancellationToken};return this.listenerCount(yl.DOWNLOAD_PROGRESS)>0&&(o.onProgress=s=>this.emit(yl.DOWNLOAD_PROGRESS,s)),await new m_.FileWithEmbeddedBlockMapDifferentialDownloader(t.info,this.httpExecutor,o).download(),!1}catch(o){return this._logger.error(`Cannot download differentially, fallback to full download: ${o.stack||o}`),process.platform==="linux"}}doInstall(t){const r=process.env.APPIMAGE;if(r==null)throw(0,ml.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,h_.unlinkSync)(r);let n;const i=Pr.basename(r),a=this.installerPath;if(a==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;Pr.basename(a)===i||!/\d+\.\d+\.\d+/.test(i)?n=r:n=Pr.join(Pr.dirname(r),Pr.basename(a)),(0,gl.execFileSync)("mv",["-f",a,n]),n!==r&&this.emit("appimage-filename-updated",n);const o={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return t.isForceRunAfter?this.spawnLog(n,[],o):(o.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,gl.execFileSync)(n,[],{env:o})),!0}}Wr.AppImageUpdater=y_;var Vr={},vr={};Object.defineProperty(vr,"__esModule",{value:!0});vr.LinuxUpdater=void 0;const w_=Vt;class E_ extends w_.BaseUpdater{constructor(t,r){super(t,r)}isRunningAsRoot(){var t;return((t=process.getuid)===null||t===void 0?void 0:t.call(process))===0}get installerPath(){var t,r;return(r=(t=super.installerPath)===null||t===void 0?void 0:t.replace(/\\/g,"\\\\").replace(/ /g,"\\ "))!==null&&r!==void 0?r:null}runCommandWithSudoIfNeeded(t){if(this.isRunningAsRoot())return this._logger.info("Running as root, no need to use sudo"),this.spawnSyncLog(t[0],t.slice(1));const{name:r}=this.app,n=`"${r} would like to update"`,i=this.sudoWithArgs(n);this._logger.info(`Running as non-root user, using sudo to install: ${i}`);let a='"';return(/pkexec/i.test(i[0])||i[0]==="sudo")&&(a=""),this.spawnSyncLog(i[0],[...i.length>1?i.slice(1):[],`${a}/bin/bash`,"-c",`'${t.join(" ")}'${a}`])}sudoWithArgs(t){const r=this.determineSudoCommand(),n=[r];return/kdesudo/i.test(r)?(n.push("--comment",t),n.push("-c")):/gksudo/i.test(r)?n.push("--message",t):/pkexec/i.test(r)&&n.push("--disable-internal-agent"),n}hasCommand(t){try{return this.spawnSyncLog("command",["-v",t]),!0}catch{return!1}}determineSudoCommand(){const t=["gksudo","kdesudo","pkexec","beesu"];for(const r of t)if(this.hasCommand(r))return r;return"sudo"}detectPackageManager(t){var r;const n=(r=process.env.ELECTRON_BUILDER_LINUX_PACKAGE_MANAGER)===null||r===void 0?void 0:r.trim();if(n)return n;for(const i of t)if(this.hasCommand(i))return i;return this._logger.warn(`No package manager found in the list: ${t.join(", ")}. Defaulting to the first one: ${t[0]}`),t[0]}}vr.LinuxUpdater=E_;Object.defineProperty(Vr,"__esModule",{value:!0});Vr.DebUpdater=void 0;const v_=he,wl=xt,__=vr;class co extends __.LinuxUpdater{constructor(t,r){super(t,r)}doDownloadUpdate(t){const r=t.updateInfoAndProvider.provider,n=(0,v_.findFile)(r.resolveFiles(t.updateInfoAndProvider.info),"deb",["AppImage","rpm","pacman"]);return this.executeDownload({fileExtension:"deb",fileInfo:n,downloadUpdateOptions:t,task:async(i,a)=>{this.listenerCount(wl.DOWNLOAD_PROGRESS)>0&&(a.onProgress=o=>this.emit(wl.DOWNLOAD_PROGRESS,o)),await this.httpExecutor.download(n.url,i,a)}})}doInstall(t){const r=this.installerPath;if(r==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;if(!this.hasCommand("dpkg")&&!this.hasCommand("apt"))return this.dispatchError(new Error("Neither dpkg nor apt command found. Cannot install .deb package.")),!1;const n=["dpkg","apt"],i=this.detectPackageManager(n);try{co.installWithCommandRunner(i,r,this.runCommandWithSudoIfNeeded.bind(this),this._logger)}catch(a){return this.dispatchError(a),!1}return t.isForceRunAfter&&this.app.relaunch(),!0}static installWithCommandRunner(t,r,n,i){var a;if(t==="dpkg")try{n(["dpkg","-i",r])}catch(o){i.warn((a=o.message)!==null&&a!==void 0?a:o),i.warn("dpkg installation failed, trying to fix broken dependencies with apt-get"),n(["apt-get","install","-f","-y"])}else if(t==="apt")i.warn("Using apt to install a local .deb. This may fail for unsigned packages unless properly configured."),n(["apt","install","-y","--allow-unauthenticated","--allow-downgrades","--allow-change-held-packages",r]);else throw new Error(`Package manager ${t} not supported`)}}Vr.DebUpdater=co;var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.PacmanUpdater=void 0;const El=xt,b_=he,S_=vr;class uo extends S_.LinuxUpdater{constructor(t,r){super(t,r)}doDownloadUpdate(t){const r=t.updateInfoAndProvider.provider,n=(0,b_.findFile)(r.resolveFiles(t.updateInfoAndProvider.info),"pacman",["AppImage","deb","rpm"]);return this.executeDownload({fileExtension:"pacman",fileInfo:n,downloadUpdateOptions:t,task:async(i,a)=>{this.listenerCount(El.DOWNLOAD_PROGRESS)>0&&(a.onProgress=o=>this.emit(El.DOWNLOAD_PROGRESS,o)),await this.httpExecutor.download(n.url,i,a)}})}doInstall(t){const r=this.installerPath;if(r==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;try{uo.installWithCommandRunner(r,this.runCommandWithSudoIfNeeded.bind(this),this._logger)}catch(n){return this.dispatchError(n),!1}return t.isForceRunAfter&&this.app.relaunch(),!0}static installWithCommandRunner(t,r,n){var i;try{r(["pacman","-U","--noconfirm",t])}catch(a){n.warn((i=a.message)!==null&&i!==void 0?i:a),n.warn("pacman installation failed, attempting to update package database and retry");try{r(["pacman","-Sy","--noconfirm"]),r(["pacman","-U","--noconfirm",t])}catch(o){throw n.error("Retry after pacman -Sy failed"),o}}}}Yr.PacmanUpdater=uo;var zr={};Object.defineProperty(zr,"__esModule",{value:!0});zr.RpmUpdater=void 0;const vl=xt,T_=he,A_=vr;class fo extends A_.LinuxUpdater{constructor(t,r){super(t,r)}doDownloadUpdate(t){const r=t.updateInfoAndProvider.provider,n=(0,T_.findFile)(r.resolveFiles(t.updateInfoAndProvider.info),"rpm",["AppImage","deb","pacman"]);return this.executeDownload({fileExtension:"rpm",fileInfo:n,downloadUpdateOptions:t,task:async(i,a)=>{this.listenerCount(vl.DOWNLOAD_PROGRESS)>0&&(a.onProgress=o=>this.emit(vl.DOWNLOAD_PROGRESS,o)),await this.httpExecutor.download(n.url,i,a)}})}doInstall(t){const r=this.installerPath;if(r==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;const n=["zypper","dnf","yum","rpm"],i=this.detectPackageManager(n);try{fo.installWithCommandRunner(i,r,this.runCommandWithSudoIfNeeded.bind(this),this._logger)}catch(a){return this.dispatchError(a),!1}return t.isForceRunAfter&&this.app.relaunch(),!0}static installWithCommandRunner(t,r,n,i){if(t==="zypper")return n(["zypper","--non-interactive","--no-refresh","install","--allow-unsigned-rpm","-f",r]);if(t==="dnf")return n(["dnf","install","--nogpgcheck","-y",r]);if(t==="yum")return n(["yum","install","--nogpgcheck","-y",r]);if(t==="rpm")return i.warn("Installing with rpm only (no dependency resolution)."),n(["rpm","-Uvh","--replacepkgs","--replacefiles","--nodeps",r]);throw new Error(`Package manager ${t} not supported`)}}zr.RpmUpdater=fo;var Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.MacUpdater=void 0;const _l=we,da=Pt,C_=Ot,bl=le,O_=yd,R_=bt,P_=he,Sl=ti,Tl=Qr;class x_ extends R_.AppUpdater{constructor(t,r){super(t,r),this.nativeUpdater=I.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",n=>{this._logger.warn(n),this.emit("error",n)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(t){this._logger.debug!=null&&this._logger.debug(t)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(t=>{t&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(t){let r=t.updateInfoAndProvider.provider.resolveFiles(t.updateInfoAndProvider.info);const n=this._logger,i="sysctl.proc_translated";let a=!1;try{this.debug("Checking for macOS Rosetta environment"),a=(0,Sl.execFileSync)("sysctl",[i],{encoding:"utf8"}).includes(`${i}: 1`),n.info(`Checked for macOS Rosetta environment (isRosetta=${a})`)}catch(f){n.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${f}`)}let o=!1;try{this.debug("Checking for arm64 in uname");const d=(0,Sl.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");n.info(`Checked 'uname -a': arm64=${d}`),o=o||d}catch(f){n.warn(`uname shell command to check for arm64 failed: ${f}`)}o=o||process.arch==="arm64"||a;const s=f=>{var d;return f.url.pathname.includes("arm64")||((d=f.info.url)===null||d===void 0?void 0:d.includes("arm64"))};o&&r.some(s)?r=r.filter(f=>o===s(f)):r=r.filter(f=>!s(f));const l=(0,P_.findFile)(r,"zip",["pkg","dmg"]);if(l==null)throw(0,_l.newError)(`ZIP file not provided: ${(0,_l.safeStringifyJson)(r)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");const p=t.updateInfoAndProvider.provider,c="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:l,downloadUpdateOptions:t,task:async(f,d)=>{const g=bl.join(this.downloadedUpdateHelper.cacheDir,c),E=()=>(0,da.pathExistsSync)(g)?!t.disableDifferentialDownload:(n.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1);let w=!0;E()&&(w=await this.differentialDownloadInstaller(l,t,f,p,c)),w&&await this.httpExecutor.download(l.url,f,d)},done:async f=>{if(!t.disableDifferentialDownload)try{const d=bl.join(this.downloadedUpdateHelper.cacheDir,c);await(0,da.copyFile)(f.downloadedFile,d)}catch(d){this._logger.warn(`Unable to copy file for caching for future differential downloads: ${d.message}`)}return this.updateDownloaded(l,f)}})}async updateDownloaded(t,r){var n;const i=r.downloadedFile,a=(n=t.info.size)!==null&&n!==void 0?n:(await(0,da.stat)(i)).size,o=this._logger,s=`fileToProxy=${t.url.href}`;this.closeServerIfExists(),this.debug(`Creating proxy server for native Squirrel.Mac (${s})`),this.server=(0,O_.createServer)(),this.debug(`Proxy server for native Squirrel.Mac is created (${s})`),this.server.on("close",()=>{o.info(`Proxy server for native Squirrel.Mac is closed (${s})`)});const l=p=>{const c=p.address();return typeof c=="string"?c:`http://127.0.0.1:${c==null?void 0:c.port}`};return await new Promise((p,c)=>{const f=(0,Tl.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),d=Buffer.from(`autoupdater:${f}`,"ascii"),g=`/${(0,Tl.randomBytes)(64).toString("hex")}.zip`;this.server.on("request",(E,w)=>{const b=E.url;if(o.info(`${b} requested`),b==="/"){if(!E.headers.authorization||E.headers.authorization.indexOf("Basic ")===-1){w.statusCode=401,w.statusMessage="Invalid Authentication Credentials",w.end(),o.warn("No authenthication info");return}const N=E.headers.authorization.split(" ")[1],L=Buffer.from(N,"base64").toString("ascii"),[ae,fe]=L.split(":");if(ae!=="autoupdater"||fe!==f){w.statusCode=401,w.statusMessage="Invalid Authentication Credentials",w.end(),o.warn("Invalid authenthication credentials");return}const z=Buffer.from(`{ "url": "${l(this.server)}${g}" }`);w.writeHead(200,{"Content-Type":"application/json","Content-Length":z.length}),w.end(z);return}if(!b.startsWith(g)){o.warn(`${b} requested, but not supported`),w.writeHead(404),w.end();return}o.info(`${g} requested by Squirrel.Mac, pipe ${i}`);let T=!1;w.on("finish",()=>{T||(this.nativeUpdater.removeListener("error",c),p([]))});const S=(0,C_.createReadStream)(i);S.on("error",N=>{try{w.end()}catch(L){o.warn(`cannot end response: ${L}`)}T=!0,this.nativeUpdater.removeListener("error",c),c(new Error(`Cannot pipe "${i}": ${N}`))}),w.writeHead(200,{"Content-Type":"application/zip","Content-Length":a}),S.pipe(w)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${s})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${l(this.server)}, ${s})`),this.nativeUpdater.setFeedURL({url:l(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${d.toString("base64")}`}}),this.dispatchUpdateDownloaded(r),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",c),this.nativeUpdater.checkForUpdates()):p([])})})}handleUpdateDownloaded(){this.autoRunAppAfterInstall?this.nativeUpdater.quitAndInstall():this.app.quit(),this.closeServerIfExists()}quitAndInstall(){this.squirrelDownloadedUpdate?this.handleUpdateDownloaded():(this.nativeUpdater.on("update-downloaded",()=>this.handleUpdateDownloaded()),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}}Xr.MacUpdater=x_;var Jr={},ho={};Object.defineProperty(ho,"__esModule",{value:!0});ho.verifySignature=$_;const Al=we,uf=ti,I_=ri,Cl=le;function ff(e,t){return['set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command",e],{shell:!0,timeout:t}]}function $_(e,t,r){return new Promise((n,i)=>{const a=t.replace(/'/g,"''");r.info(`Verifying signature ${a}`),(0,uf.execFile)(...ff(`"Get-AuthenticodeSignature -LiteralPath '${a}' | ConvertTo-Json -Compress"`,20*1e3),(o,s,l)=>{var p;try{if(o!=null||l){ha(r,o,l,i),n(null);return}const c=N_(s);if(c.Status===0){try{const E=Cl.normalize(c.Path),w=Cl.normalize(t);if(r.info(`LiteralPath: ${E}. Update Path: ${w}`),E!==w){ha(r,new Error(`LiteralPath of ${E} is different than ${w}`),l,i),n(null);return}}catch(E){r.warn(`Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ${(p=E.message)!==null&&p!==void 0?p:E.stack}`)}const d=(0,Al.parseDn)(c.SignerCertificate.Subject);let g=!1;for(const E of e){const w=(0,Al.parseDn)(E);if(w.size?g=Array.from(w.keys()).every(T=>w.get(T)===d.get(T)):E===d.get("CN")&&(r.warn(`Signature validated using only CN ${E}. Please add your full Distinguished Name (DN) to publisherNames configuration`),g=!0),g){n(null);return}}}const f=`publisherNames: ${e.join(" | ")}, raw info: `+JSON.stringify(c,(d,g)=>d==="RawData"?void 0:g,2);r.warn(`Sign verification failed, installer signed with incorrect certificate: ${f}`),n(f)}catch(c){ha(r,c,null,i),n(null);return}})})}function N_(e){const t=JSON.parse(e);delete t.PrivateKey,delete t.IsOSBinary,delete t.SignatureType;const r=t.SignerCertificate;return r!=null&&(delete r.Archived,delete r.Extensions,delete r.Handle,delete r.HasPrivateKey,delete r.SubjectName),t}function ha(e,t,r,n){if(D_()){e.warn(`Cannot execute Get-AuthenticodeSignature: ${t||r}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{(0,uf.execFileSync)(...ff("ConvertTo-Json test",10*1e3))}catch(i){e.warn(`Cannot execute ConvertTo-Json: ${i.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}t!=null&&n(t),r&&n(new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${r}. Failing signature validation due to unknown stderr.`))}function D_(){const e=I_.release();return e.startsWith("6.")&&!e.startsWith("6.3")}Object.defineProperty(Jr,"__esModule",{value:!0});Jr.NsisUpdater=void 0;const kn=we,Ol=le,F_=Vt,L_=un,Rl=xt,U_=he,k_=Pt,M_=ho,Pl=Rt;class B_ extends F_.BaseUpdater{constructor(t,r){super(t,r),this._verifyUpdateCodeSignature=(n,i)=>(0,M_.verifySignature)(n,i,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(t){t&&(this._verifyUpdateCodeSignature=t)}doDownloadUpdate(t){const r=t.updateInfoAndProvider.provider,n=(0,U_.findFile)(r.resolveFiles(t.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:t,fileInfo:n,task:async(i,a,o,s)=>{const l=n.packageInfo,p=l!=null&&o!=null;if(p&&t.disableWebInstaller)throw(0,kn.newError)(`Unable to download new version ${t.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!p&&!t.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(p||t.disableDifferentialDownload||await this.differentialDownloadInstaller(n,t,i,r,kn.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(n.url,i,a);const c=await this.verifySignature(i);if(c!=null)throw await s(),(0,kn.newError)(`New version ${t.updateInfoAndProvider.info.version} is not signed by the application owner: ${c}`,"ERR_UPDATER_INVALID_SIGNATURE");if(p&&await this.differentialDownloadWebPackage(t,l,o,r))try{await this.httpExecutor.download(new Pl.URL(l.path),o,{headers:t.requestHeaders,cancellationToken:t.cancellationToken,sha512:l.sha512})}catch(f){try{await(0,k_.unlink)(o)}catch{}throw f}}})}async verifySignature(t){let r;try{if(r=(await this.configOnDisk.value).publisherName,r==null)return null}catch(n){if(n.code==="ENOENT")return null;throw n}return await this._verifyUpdateCodeSignature(Array.isArray(r)?r:[r],t)}doInstall(t){const r=this.installerPath;if(r==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;const n=["--updated"];t.isSilent&&n.push("/S"),t.isForceRunAfter&&n.push("--force-run"),this.installDirectory&&n.push(`/D=${this.installDirectory}`);const i=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;i!=null&&n.push(`--package-file=${i}`);const a=()=>{this.spawnLog(Ol.join(process.resourcesPath,"elevate.exe"),[r].concat(n)).catch(o=>this.dispatchError(o))};return t.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),a(),!0):(this.spawnLog(r,n).catch(o=>{const s=o.code;this._logger.info(`Cannot run installer: error code: ${s}, error message: "${o.message}", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT`),s==="UNKNOWN"||s==="EACCES"?a():s==="ENOENT"?I.shell.openPath(r).catch(l=>this.dispatchError(l)):this.dispatchError(o)}),!0)}async differentialDownloadWebPackage(t,r,n,i){if(r.blockMapSize==null)return!0;try{const a={newUrl:new Pl.URL(r.path),oldFile:Ol.join(this.downloadedUpdateHelper.cacheDir,kn.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:n,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:i.isUseMultipleRangeRequest,cancellationToken:t.cancellationToken};this.listenerCount(Rl.DOWNLOAD_PROGRESS)>0&&(a.onProgress=o=>this.emit(Rl.DOWNLOAD_PROGRESS,o)),await new L_.FileWithEmbeddedBlockMapDifferentialDownloader(r,this.httpExecutor,a).download()}catch(a){return this._logger.error(`Cannot download differentially, fallback to full download: ${a.stack||a}`),process.platform==="win32"}return!1}}Jr.NsisUpdater=B_;(function(e){var t=Ne&&Ne.__createBinding||(Object.create?function(b,T,S,N){N===void 0&&(N=S);var L=Object.getOwnPropertyDescriptor(T,S);(!L||("get"in L?!T.__esModule:L.writable||L.configurable))&&(L={enumerable:!0,get:function(){return T[S]}}),Object.defineProperty(b,N,L)}:function(b,T,S,N){N===void 0&&(N=S),b[N]=T[S]}),r=Ne&&Ne.__exportStar||function(b,T){for(var S in b)S!=="default"&&!Object.prototype.hasOwnProperty.call(T,S)&&t(T,b,S)};Object.defineProperty(e,"__esModule",{value:!0}),e.NsisUpdater=e.MacUpdater=e.RpmUpdater=e.PacmanUpdater=e.DebUpdater=e.AppImageUpdater=e.Provider=e.NoOpLogger=e.AppUpdater=e.BaseUpdater=void 0;const n=Pt,i=le;var a=Vt;Object.defineProperty(e,"BaseUpdater",{enumerable:!0,get:function(){return a.BaseUpdater}});var o=bt;Object.defineProperty(e,"AppUpdater",{enumerable:!0,get:function(){return o.AppUpdater}}),Object.defineProperty(e,"NoOpLogger",{enumerable:!0,get:function(){return o.NoOpLogger}});var s=he;Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return s.Provider}});var l=Wr;Object.defineProperty(e,"AppImageUpdater",{enumerable:!0,get:function(){return l.AppImageUpdater}});var p=Vr;Object.defineProperty(e,"DebUpdater",{enumerable:!0,get:function(){return p.DebUpdater}});var c=Yr;Object.defineProperty(e,"PacmanUpdater",{enumerable:!0,get:function(){return c.PacmanUpdater}});var f=zr;Object.defineProperty(e,"RpmUpdater",{enumerable:!0,get:function(){return f.RpmUpdater}});var d=Xr;Object.defineProperty(e,"MacUpdater",{enumerable:!0,get:function(){return d.MacUpdater}});var g=Jr;Object.defineProperty(e,"NsisUpdater",{enumerable:!0,get:function(){return g.NsisUpdater}}),r(xt,e);let E;function w(){if(process.platform==="win32")E=new Jr.NsisUpdater;else if(process.platform==="darwin")E=new Xr.MacUpdater;else{E=new Wr.AppImageUpdater;try{const b=i.join(process.resourcesPath,"package-type");if(!(0,n.existsSync)(b))return E;console.info("Checking for beta autoupdate feature for deb/rpm distributions");const T=(0,n.readFileSync)(b).toString().trim();switch(console.info("Found package-type:",T),T){case"deb":E=new Vr.DebUpdater;break;case"rpm":E=new zr.RpmUpdater;break;case"pacman":E=new Yr.PacmanUpdater;break;default:break}}catch(b){console.warn("Unable to detect 'package-type' for autoUpdater (rpm/deb/pacman support). If you'd like to expand support, please consider contributing to electron-builder",b.message)}}return E}Object.defineProperty(e,"autoUpdater",{enumerable:!0,get:()=>E||w()})})(it);function j_(e){const t=new I.BrowserWindow({icon:V.join(e.publicDir,"assets","logo.png"),autoHideMenuBar:!0,webPreferences:{preload:e.preload,devTools:!0}});return t.setMenuBarVisibility(!1),t.webContents.on("did-finish-load",()=>{t.webContents.send("main-process-message",new Date().toLocaleString())}),t.webContents.on("did-fail-load",(r,n,i,a)=>{console.error("Renderer failed to load",{errorCode:n,errorDescription:i,validatedURL:a})}),e.devServerUrl?t.loadURL(e.devServerUrl):t.loadFile(V.join(e.rendererDist,"index.html")),t}const J=e=>(e==null?void 0:e.ok)===!0||(e==null?void 0:e.success)===!0,te=e=>{if(e){if(typeof e.data<"u")return e.data;if(typeof e.items<"u")return e.items;if(typeof e.rows<"u")return e.rows}},xl=e=>Array.from(new Set(e.map(t=>t==null?"":String(t).trim()).filter(Boolean)));function po(e){if(!pa.existsSync(e))return;const t=pa.readFileSync(e,"utf-8");for(const r of t.split(`
`)){const n=r.trim();if(!n||n.startsWith("#"))continue;const[i,...a]=n.split("=");typeof process.env[i]>"u"&&(process.env[i]=a.join("=").trim())}}const Il=process.env.APP_ROOT;Il&&po(V.resolve(Il,".env"));po(V.resolve(process.cwd(),".env"));po(V.resolve(process.cwd(),"..",".env"));const pe=process.env.API_BASE_URL||process.env.VITE_API_BASE_URL||"http://192.168.1.86:8133",me=process.env.API_PREFIX||process.env.VITE_API_PREFIX||"/api",G_=()=>{const t=(process.env.NO_PROXY||process.env.no_proxy||"").split(",").map(i=>i.trim()).filter(Boolean),r=["localhost","127.0.0.1"];let n=!1;if(r.forEach(i=>{t.includes(i)||(t.push(i),n=!0)}),n){const i=t.join(",");process.env.NO_PROXY=i,process.env.no_proxy=i}};async function K(e,t={}){const r=`${pe.replace(/\/$/,"")}${me}${e}`;G_();const n=async i=>{const a=typeof t.timeoutMs=="number"?t.timeoutMs:0,o=a>0?new AbortController:null,s=o?setTimeout(()=>{o.abort()},a):null;try{const l=await fetch(i,{...t,headers:{"Content-Type":"application/json",...t.headers||{}},signal:o==null?void 0:o.signal});s&&clearTimeout(s);const p=l.headers.get("content-type")||"";let c;return p.includes("application/json")?c=await l.json():c={success:!1,ok:!1,message:await l.text()},{status:l.status,body:c}}finally{s&&clearTimeout(s)}};try{return await n(r)}catch(i){const a=i instanceof Error?i.message:String(i);if(i instanceof Error&&i.name==="AbortError")return{status:408,body:{success:!1,message:`Request timeout saat menghubungi API (${r}). Coba lagi atau cek koneksi API/DB.`}};if(r.includes("localhost")){const s=r.replace("localhost","127.0.0.1");try{return await n(s)}catch(l){const p=l instanceof Error?l.message:String(l);return{status:500,body:{success:!1,message:`Tidak dapat terhubung ke API (${r}). ${a}. Fallback ${s} gagal: ${p}`}}}}if(r.includes("127.0.0.1")){const s=r.replace("127.0.0.1","localhost");try{return await n(s)}catch(l){const p=l instanceof Error?l.message:String(l);return{status:500,body:{success:!1,message:`Tidak dapat terhubung ke API (${r}). ${a}. Fallback ${s} gagal: ${p}`}}}}return{status:500,body:{success:!1,message:`Tidak dapat terhubung ke API (${r}). ${a}`}}}}async function H_(){const{body:e}=await K("/health");if(!J(e))return{success:!1,message:e.message};const t=te(e);return{success:!0,serverTime:t==null?void 0:t.serverTime}}async function q_(e,t=10){const r=e.replace(/[^\w.]/g,""),n=new URLSearchParams({limit:String(t)}),{body:i}=await K(`/gabung/table-preview/${r}?${n.toString()}`);if(!J(i))throw new Error(i.message||"Gagal mengambil preview data");const a=te(i);return(a==null?void 0:a.rows)??a??[]}async function W_(e,t=0,r="exhibitor"){const n=new URLSearchParams({limit:String(t),person:r}),{body:i}=await K(`/gabung/segment/${encodeURIComponent(e)}?${n.toString()}`);if(!J(i))throw new Error(i.message||"Gagal mengambil data gabung");const a=te(i)??{};return a.items??a.rows??a??[]}async function V_(){const{body:e}=await K("/gabung/exhibitor-count");if(!J(e))throw new Error(e.message||"Gagal mengambil jumlah exhibitor per pameran");return te(e)}async function Y_(){const{body:e}=await K("/gabung/expo-chart");if(!J(e))throw new Error(e.message||"Gagal mengambil data grafik pameran");return te(e)}async function z_(e){var o;const t=(e==null?void 0:e.page)??1,r=(e==null?void 0:e.pageSize)??200,n=(o=e==null?void 0:e.q)==null?void 0:o.trim(),i=new URLSearchParams({page:String(t),pageSize:String(r)});n&&i.set("q",n);const{body:a}=await K(`/gabung?${i.toString()}`);if(!J(a))throw new Error(a.message||"Gagal memuat data gabung");return te(a)??a}async function X_(e){const t=e.trim(),r=encodeURIComponent(t),{body:n}=await K(`/gabung/company/${r}`);if(!J(n))throw new Error(n.message||"Gagal mencari perusahaan");const i=te(n)??{};return i.items??i.rows??i??[]}async function J_(e){const{body:t}=await K("/gabung",{method:"POST",body:JSON.stringify(e)});if(!J(t))throw new Error(t.message||"Gagal menyimpan data");return te(t)??t}async function K_(e){const{body:t}=await K("/gabung/import/excel",{method:"POST",body:JSON.stringify(e),timeoutMs:7e3});if(!J(t))throw new Error(t.message||"Gagal mengimpor data Excel");return te(t)??t}async function Q_(e,t){const r=encodeURIComponent(String(e)),{body:n}=await K(`/gabung/${r}`,{method:"PUT",body:JSON.stringify(t)});if(!J(n))throw new Error(n.message||"Gagal memperbarui data");return te(n)??n}async function Z_(e){const t=Array.from(new Set(e.map(n=>String(n).trim()).filter(Boolean))),r=[];for(const n of t){const i=encodeURIComponent(n),{body:a}=await K(`/gabung/${i}`,{method:"DELETE"}),o=J(a);if(r.push({id:n,success:o,message:a.message}),!o)throw new Error(a.message||`Gagal menghapus data ${n}`)}return r}async function eb(e){const{body:t}=await K("/report/labelvisitor",{method:"POST",body:JSON.stringify(e)});if(!J(t))throw new Error(t.message||"Gagal memuat label visitor");return te(t)??t.data}async function tb(e){const{body:t}=await K("/report/labelgover",{method:"POST",body:JSON.stringify(e)});if(!J(t))throw new Error(t.message||"Gagal memuat label gover");return te(t)??t.data}async function rb(e){const{body:t}=await K("/report/perusahaan",{method:"POST",body:JSON.stringify(e)});if(!J(t))throw new Error(t.message||"Gagal memuat report perusahaan");return te(t)??t.data}async function nb(e){const{body:t}=await K("/report/government",{method:"POST",body:JSON.stringify(e)});if(!J(t))throw new Error(t.message||"Gagal memuat report government");return te(t)??t.data}async function ib(e){const{body:t}=await K("/report/jumlah/perusahaan",{method:"POST",body:JSON.stringify(e)});if(!J(t))throw new Error(t.message||"Gagal memuat report jumlah perusahaan");return te(t)??t.data}async function ab(e){const{body:t}=await K("/report/jumlah/government",{method:"POST",body:JSON.stringify(e)});if(!J(t))throw new Error(t.message||"Gagal memuat report jumlah government");return te(t)??t.data}async function ob(e){const{body:t}=await K("/report/businessvisitor",{method:"POST",body:JSON.stringify(e)});if(!J(t))throw new Error(t.message||"Gagal memuat business visitor");return te(t)??t.data}async function sb(){const{body:e}=await K("/report/label/options");if(!J(e))throw new Error(e.message||"Gagal memuat opsi label");return te(e)??e.data}async function $l(e){const t=`${pe.replace(/\/$/,"")}${me}/report/labelvisitor/print`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const a=await r.text();throw new Error(a||"Gagal mencetak label perusahaan")}const n=await r.arrayBuffer(),i=Buffer.from(n);return{contentType:r.headers.get("content-type")||"application/pdf",filename:"print-label-perusahaan.pdf",buffer:i,base64:i.toString("base64")}}async function Nl(e){const t=`${pe.replace(/\/$/,"")}${me}/report/labelgover/print`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const a=await r.text();throw new Error(a||"Gagal mencetak label government")}const n=await r.arrayBuffer(),i=Buffer.from(n);return{contentType:r.headers.get("content-type")||"application/pdf",filename:"print-label-government.pdf",buffer:i,base64:i.toString("base64")}}async function lb(e){const t=`${pe.replace(/\/$/,"")}${me}/gabung/personal-pdf`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})});if(!r.ok){const l=await r.text();throw new Error(l||"Gagal mengunduh PDF")}const n=await r.arrayBuffer(),i=Buffer.from(n),a=r.headers.get("content-disposition")||"",o=/filename="?([^"]+)"?/i.exec(a),s=(o==null?void 0:o[1])||"database-personal.pdf";return{contentType:r.headers.get("content-type")||"application/pdf",filename:s,buffer:i,base64:i.toString("base64")}}async function Dl(e){const t=`${pe.replace(/\/$/,"")}${me}/report/labelvisitor/export/excel`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})});if(!r.ok){const a=await r.text();throw new Error(a||"Gagal mengunduh Excel")}const n=await r.arrayBuffer(),i=Buffer.from(n);return{contentType:r.headers.get("content-type")||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",filename:"print-label-perusahaan.xlsx",buffer:i,base64:i.toString("base64")}}async function Fl(e){const t=`${pe.replace(/\/$/,"")}${me}/report/labelgover/export/excel`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})});if(!r.ok){const a=await r.text();throw new Error(a||"Gagal mengunduh Excel government")}const n=await r.arrayBuffer(),i=Buffer.from(n);return{contentType:r.headers.get("content-type")||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",filename:"print-label-government.xlsx",buffer:i,base64:i.toString("base64")}}async function Ll(e){const t=`${pe.replace(/\/$/,"")}${me}/report/labelvisitor/export/word`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})});if(!r.ok){const a=await r.text();throw new Error(a||"Gagal mengunduh Word")}const n=await r.arrayBuffer(),i=Buffer.from(n);return{contentType:r.headers.get("content-type")||"application/vnd.openxmlformats-officedocument.wordprocessingml.document",filename:"print-label-perusahaan.docx",buffer:i,base64:i.toString("base64")}}async function Ul(e){const t=`${pe.replace(/\/$/,"")}${me}/report/labelgover/export/word`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})});if(!r.ok){const a=await r.text();throw new Error(a||"Gagal mengunduh Word government")}const n=await r.arrayBuffer(),i=Buffer.from(n);return{contentType:r.headers.get("content-type")||"application/vnd.openxmlformats-officedocument.wordprocessingml.document",filename:"print-label-government.docx",buffer:i,base64:i.toString("base64")}}async function kl(e){const t=`${pe.replace(/\/$/,"")}${me}/report/perusahaan/print`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const a=await r.text();throw new Error(a||"Gagal mencetak report perusahaan")}const n=await r.arrayBuffer(),i=Buffer.from(n);return{contentType:r.headers.get("content-type")||"application/pdf",filename:"report-perusahaan.pdf",buffer:i,base64:i.toString("base64")}}async function Ml(e){const t=`${pe.replace(/\/$/,"")}${me}/report/government/print`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const a=await r.text();throw new Error(a||"Gagal mencetak report government")}const n=await r.arrayBuffer(),i=Buffer.from(n);return{contentType:r.headers.get("content-type")||"application/pdf",filename:"report-government.pdf",buffer:i,base64:i.toString("base64")}}async function Bl(e){const t=`${pe.replace(/\/$/,"")}${me}/report/jumlah/perusahaan/print`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const a=await r.text();throw new Error(a||"Gagal mencetak report jumlah perusahaan")}const n=await r.arrayBuffer(),i=Buffer.from(n);return{contentType:r.headers.get("content-type")||"application/pdf",filename:"report-jumlah-perusahaan.pdf",buffer:i,base64:i.toString("base64")}}async function jl(e){const t=`${pe.replace(/\/$/,"")}${me}/report/jumlah/government/print`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const a=await r.text();throw new Error(a||"Gagal mencetak report jumlah government")}const n=await r.arrayBuffer(),i=Buffer.from(n);return{contentType:r.headers.get("content-type")||"application/pdf",filename:"report-jumlah-government.pdf",buffer:i,base64:i.toString("base64")}}async function Gl(e){const t=`${pe.replace(/\/$/,"")}${me}/report/jumlah/perusahaan/export/excel`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})});if(!r.ok){const a=await r.text();throw new Error(a||"Gagal mengunduh Excel report jumlah perusahaan")}const n=await r.arrayBuffer(),i=Buffer.from(n);return{contentType:r.headers.get("content-type")||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",filename:"report-jumlah-perusahaan.xlsx",buffer:i,base64:i.toString("base64")}}async function Hl(e){const t=`${pe.replace(/\/$/,"")}${me}/report/jumlah/government/export/excel`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})});if(!r.ok){const a=await r.text();throw new Error(a||"Gagal mengunduh Excel report jumlah government")}const n=await r.arrayBuffer(),i=Buffer.from(n);return{contentType:r.headers.get("content-type")||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",filename:"report-jumlah-government.xlsx",buffer:i,base64:i.toString("base64")}}async function ql(e){const t=`${pe.replace(/\/$/,"")}${me}/report/perusahaan/export/excel`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})});if(!r.ok){const a=await r.text();throw new Error(a||"Gagal mengunduh Excel report perusahaan")}const n=await r.arrayBuffer(),i=Buffer.from(n);return{contentType:r.headers.get("content-type")||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",filename:"report-perusahaan.xlsx",buffer:i,base64:i.toString("base64")}}async function Wl(e){const t=`${pe.replace(/\/$/,"")}${me}/report/government/export/excel`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})});if(!r.ok){const a=await r.text();throw new Error(a||"Gagal mengunduh Excel report government")}const n=await r.arrayBuffer(),i=Buffer.from(n);return{contentType:r.headers.get("content-type")||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",filename:"report-government.xlsx",buffer:i,base64:i.toString("base64")}}async function Vl(e){const t=`${pe.replace(/\/$/,"")}${me}/report/perusahaan/export/word`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})});if(!r.ok){const a=await r.text();throw new Error(a||"Gagal mengunduh Word report perusahaan")}const n=await r.arrayBuffer(),i=Buffer.from(n);return{contentType:r.headers.get("content-type")||"application/vnd.openxmlformats-officedocument.wordprocessingml.document",filename:"report-perusahaan.docx",buffer:i,base64:i.toString("base64")}}async function Yl(e){const t=`${pe.replace(/\/$/,"")}${me}/report/government/export/word`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})});if(!r.ok){const a=await r.text();throw new Error(a||"Gagal mengunduh Word report government")}const n=await r.arrayBuffer(),i=Buffer.from(n);return{contentType:r.headers.get("content-type")||"application/vnd.openxmlformats-officedocument.wordprocessingml.document",filename:"report-government.docx",buffer:i,base64:i.toString("base64")}}async function zl(e){const t=`${pe.replace(/\/$/,"")}${me}/report/jumlah/perusahaan/export/word`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})});if(!r.ok){const a=await r.text();throw new Error(a||"Gagal mengunduh Word report jumlah perusahaan")}const n=await r.arrayBuffer(),i=Buffer.from(n);return{contentType:r.headers.get("content-type")||"application/vnd.openxmlformats-officedocument.wordprocessingml.document",filename:"report-jumlah-perusahaan.docx",buffer:i,base64:i.toString("base64")}}async function Xl(e){const t=`${pe.replace(/\/$/,"")}${me}/report/jumlah/government/export/word`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})});if(!r.ok){const a=await r.text();throw new Error(a||"Gagal mengunduh Word report jumlah government")}const n=await r.arrayBuffer(),i=Buffer.from(n);return{contentType:r.headers.get("content-type")||"application/vnd.openxmlformats-officedocument.wordprocessingml.document",filename:"report-jumlah-government.docx",buffer:i,base64:i.toString("base64")}}const ye=e=>({success:!1,message:e instanceof Error?e.message:String(e)});function cb(){I.ipcMain.handle("db:testConnection",async()=>{try{return{...await H_()}}catch(e){return ye(e)}}),I.ipcMain.handle("db:fetchTableData",async(e,t)=>{try{return{success:!0,rows:await q_(t)}}catch(r){return ye(r)}}),I.ipcMain.handle("db:fetchExhibitors",async(e,t,r=0,n="exhibitor")=>{try{return{success:!0,rows:await W_(t,r,n)}}catch(i){return ye(i)}}),I.ipcMain.handle("db:fetchExhibitorCountByExpo",async()=>{try{return{success:!0,data:await V_()}}catch(e){return ye(e)}}),I.ipcMain.handle("db:fetchExpoChartData",async()=>{try{return{success:!0,data:await Y_()}}catch(e){return ye(e)}}),I.ipcMain.handle("db:findCompany",async(e,t)=>{try{return{success:!0,rows:await X_(t)}}catch(r){return ye(r)}}),I.ipcMain.handle("db:listGabung",async(e,t)=>{try{return{success:!0,data:await z_(t)}}catch(r){return ye(r)}}),I.ipcMain.handle("db:saveAddData",async(e,t)=>{try{return{success:!0,data:await J_(t)}}catch(r){return ye(r)}}),I.ipcMain.handle("db:importGabungExcel",async(e,t)=>{try{return{success:!0,data:await K_(t)}}catch(r){return ye(r)}}),I.ipcMain.handle("db:updateAddData",async(e,t,r)=>{try{return{success:!0,data:await Q_(t,r)}}catch(n){return ye(n)}}),I.ipcMain.handle("db:deleteAddData",async(e,t)=>{try{return{success:!0,data:await Z_(t)}}catch(r){return ye(r)}}),I.ipcMain.handle("report:labelvisitor",async(e,t)=>{try{return{success:!0,data:await eb(t)}}catch(r){return ye(r)}}),I.ipcMain.handle("report:labelgover",async(e,t)=>{try{return{success:!0,data:await tb(t)}}catch(r){return ye(r)}}),I.ipcMain.handle("report:perusahaan",async(e,t)=>{try{return{success:!0,data:await rb(t)}}catch(r){return ye(r)}}),I.ipcMain.handle("report:government",async(e,t)=>{try{return{success:!0,data:await nb(t)}}catch(r){return ye(r)}}),I.ipcMain.handle("report:jumlah-perusahaan",async(e,t)=>{try{return{success:!0,data:await ib(t)}}catch(r){return ye(r)}}),I.ipcMain.handle("report:jumlah-government",async(e,t)=>{try{return{success:!0,data:await ab(t)}}catch(r){return ye(r)}}),I.ipcMain.handle("report:labeloptions",async()=>{try{return{success:!0,data:await sb()}}catch(e){return ye(e)}}),I.ipcMain.handle("db:personalDatabasePdf",async(e,t)=>{try{return{success:!0,data:await lb(t)}}catch(r){return ye(r)}})}async function ub(e=200){const t=new URLSearchParams({limit:String(e)}),{body:r}=await K(`/audit/logs?${t.toString()}`);if(!J(r))throw new Error(r.message||"Gagal memuat audit log");return te(r)??[]}async function fb(e){const{body:t}=await K("/audit/logs",{method:"POST",body:JSON.stringify(e??{})});if(!J(t))throw new Error(t.message||"Gagal menyimpan audit log");return te(t)??t}const Jl=e=>({success:!1,message:e instanceof Error?e.message:String(e)});function db(){I.ipcMain.handle("db:fetchAuditLogs",async(e,t=200)=>{try{return{success:!0,rows:await ub(Number(t)||200)}}catch(r){return Jl(r)}}),I.ipcMain.handle("db:createAuditLog",async(e,t)=>{try{return{success:!0,data:await fb(t)}}catch(r){return Jl(r)}})}async function hb(e){const{body:t,status:r}=await K("/pengguna/login",{method:"POST",body:JSON.stringify(e)});if(!J(t)){if(r===401)return null;throw new Error(t.message||"Login gagal")}return te(t)}async function pb(){const{body:e}=await K("/pengguna");if(!J(e))throw new Error(e.message||"Gagal memuat data pengguna");const t=te(e)??[],r=xl(t.map(i=>i==null?void 0:i.username)),n=xl(t.map(i=>i==null?void 0:i.division));return{usernames:r,divisions:n}}async function mb(e){const{body:t}=await K("/pengguna",{method:"POST",body:JSON.stringify(e)});if(!J(t))throw new Error(t.message||"Gagal membuat user");return te(t)}async function gb(){const{body:e}=await K("/pengguna");if(!J(e))throw new Error(e.message||"Gagal memuat daftar pengguna");return te(e)??[]}async function yb(e){const t={username:e.username,password:e.currentPassword,division:e.division??null},r=await K("/pengguna/login",{method:"POST",body:JSON.stringify(t)});if(!J(r.body))throw r.status===401?new Error("Password saat ini salah."):new Error(r.body.message||"Gagal memverifikasi password.");const{body:n}=await K(`/pengguna/${encodeURIComponent(e.username)}`,{method:"PUT",body:JSON.stringify({password:e.newPassword,division:e.division??null})});if(!J(n))throw new Error(n.message||"Gagal memperbarui password.");return te(n)}async function wb(e){const{body:t}=await K(`/pengguna/${encodeURIComponent(e.username)}`,{method:"PUT",body:JSON.stringify({status:"OFF"})});if(!J(t))throw new Error(t.message||"Gagal logout user");return te(t)}const tr=e=>({success:!1,message:e instanceof Error?e.message:String(e)});function Eb(){I.ipcMain.handle("db:login",async(e,t)=>{try{const r=await hb(t);return r?{success:!0,user:r}:{success:!1,message:"Username, password, atau divisi tidak cocok."}}catch(r){return tr(r)}}),I.ipcMain.handle("db:userHints",async()=>{try{return{success:!0,hints:await pb()}}catch(e){return tr(e)}}),I.ipcMain.handle("db:createPengguna",async(e,t)=>{try{return{success:!0,data:await mb(t),message:"User berhasil dibuat"}}catch(r){return tr(r)}}),I.ipcMain.handle("db:changePenggunaPassword",async(e,t)=>{try{return{success:!0,data:await yb(t),message:"Password berhasil diubah"}}catch(r){return tr(r)}}),I.ipcMain.handle("db:logoutPengguna",async(e,t)=>{try{return{success:!0,data:await wb(t),message:"Logout berhasil"}}catch(r){return tr(r)}}),I.ipcMain.handle("db:listPengguna",async()=>{try{return{success:!0,rows:await gb()}}catch(e){return tr(e)}})}const ie=e=>({success:!1,message:e instanceof Error?e.message:String(e)});function vb(){I.ipcMain.handle("report:businessvisitor",async(e,t)=>{try{return{success:!0,data:await ob(t)}}catch(r){return ie(r)}}),I.ipcMain.handle("report:labelvisitor:pdf",async(e,t)=>{try{return{success:!0,data:await $l(t)}}catch(r){return ie(r)}}),I.ipcMain.handle("report:labelvisitor:excel",async(e,t)=>{try{return{success:!0,data:await Dl(t)}}catch(r){return ie(r)}}),I.ipcMain.handle("report:labelvisitor:word",async(e,t)=>{try{return{success:!0,data:await Ll(t)}}catch(r){return ie(r)}}),I.ipcMain.handle("report:labelgover:pdf",async(e,t)=>{try{return{success:!0,data:await Nl(t)}}catch(r){return ie(r)}}),I.ipcMain.handle("report:labelgover:excel",async(e,t)=>{try{return{success:!0,data:await Fl(t)}}catch(r){return ie(r)}}),I.ipcMain.handle("report:labelgover:word",async(e,t)=>{try{return{success:!0,data:await Ul(t)}}catch(r){return ie(r)}}),I.ipcMain.handle("report:perusahaan:pdf",async(e,t)=>{try{return{success:!0,data:await kl(t)}}catch(r){return ie(r)}}),I.ipcMain.handle("report:perusahaan:excel",async(e,t)=>{try{return{success:!0,data:await ql(t)}}catch(r){return ie(r)}}),I.ipcMain.handle("report:perusahaan:word",async(e,t)=>{try{return{success:!0,data:await Vl(t)}}catch(r){return ie(r)}}),I.ipcMain.handle("report:government:pdf",async(e,t)=>{try{return{success:!0,data:await Ml(t)}}catch(r){return ie(r)}}),I.ipcMain.handle("report:government:excel",async(e,t)=>{try{return{success:!0,data:await Wl(t)}}catch(r){return ie(r)}}),I.ipcMain.handle("report:government:word",async(e,t)=>{try{return{success:!0,data:await Yl(t)}}catch(r){return ie(r)}}),I.ipcMain.handle("report:jumlah-perusahaan:pdf",async(e,t)=>{try{return{success:!0,data:await Bl(t)}}catch(r){return ie(r)}}),I.ipcMain.handle("report:jumlah-perusahaan:excel",async(e,t)=>{try{return{success:!0,data:await Gl(t)}}catch(r){return ie(r)}}),I.ipcMain.handle("report:jumlah-perusahaan:word",async(e,t)=>{try{return{success:!0,data:await zl(t)}}catch(r){return ie(r)}}),I.ipcMain.handle("report:jumlah-government:pdf",async(e,t)=>{try{return{success:!0,data:await jl(t)}}catch(r){return ie(r)}}),I.ipcMain.handle("report:jumlah-government:excel",async(e,t)=>{try{return{success:!0,data:await Hl(t)}}catch(r){return ie(r)}}),I.ipcMain.handle("report:jumlah-government:word",async(e,t)=>{try{return{success:!0,data:await Xl(t)}}catch(r){return ie(r)}}),I.ipcMain.handle("report:labelvisitor:export-save",async(e,t)=>{try{const{canceled:r,filePath:n}=await I.dialog.showSaveDialog({title:"Simpan Label Perusahaan",defaultPath:"print-label-perusahaan.docx",filters:[{name:"Microsoft Word (*.docx)",extensions:["docx"]},{name:"Microsoft Word 97-2003 (*.doc)",extensions:["doc"]},{name:"Microsoft Excel (*.xlsx)",extensions:["xlsx"]},{name:"Microsoft Excel 97-2003 (*.xls)",extensions:["xls"]},{name:"PDF",extensions:["pdf"]}],properties:["createDirectory","showOverwriteConfirmation"]});if(r||!n)return{success:!1,canceled:!0};const i=V.extname(n).toLowerCase();let a;i===".xlsx"||i===".xls"?a=await Dl(t):i===".docx"||i===".doc"?a=await Ll(t):a=await $l(t);const o=i===".doc"?"application/msword":i===".xls"?"application/vnd.ms-excel":a.contentType;return await Xt.writeFile(n,a.buffer),{success:!0,path:n,filename:V.basename(n),contentType:o}}catch(r){return ie(r)}}),I.ipcMain.handle("report:labelgover:export-save",async(e,t)=>{try{const{canceled:r,filePath:n}=await I.dialog.showSaveDialog({title:"Simpan Label Government",defaultPath:"print-label-government.docx",filters:[{name:"Microsoft Word (*.docx)",extensions:["docx"]},{name:"Microsoft Word 97-2003 (*.doc)",extensions:["doc"]},{name:"Microsoft Excel (*.xlsx)",extensions:["xlsx"]},{name:"Microsoft Excel 97-2003 (*.xls)",extensions:["xls"]},{name:"PDF",extensions:["pdf"]}],properties:["createDirectory","showOverwriteConfirmation"]});if(r||!n)return{success:!1,canceled:!0};const i=V.extname(n).toLowerCase();let a;i===".xlsx"||i===".xls"?a=await Fl(t):i===".docx"||i===".doc"?a=await Ul(t):a=await Nl(t);const o=i===".doc"?"application/msword":i===".xls"?"application/vnd.ms-excel":a.contentType;return await Xt.writeFile(n,a.buffer),{success:!0,path:n,filename:V.basename(n),contentType:o}}catch(r){return ie(r)}}),I.ipcMain.handle("report:perusahaan:export-save",async(e,t)=>{try{const{canceled:r,filePath:n}=await I.dialog.showSaveDialog({title:"Simpan Report Perusahaan",defaultPath:"report-perusahaan.docx",filters:[{name:"Microsoft Word (*.docx)",extensions:["docx"]},{name:"Microsoft Word 97-2003 (*.doc)",extensions:["doc"]},{name:"Microsoft Excel (*.xlsx)",extensions:["xlsx"]},{name:"Microsoft Excel 97-2003 (*.xls)",extensions:["xls"]},{name:"PDF",extensions:["pdf"]}],properties:["createDirectory","showOverwriteConfirmation"]});if(r||!n)return{success:!1,canceled:!0};const i=V.extname(n).toLowerCase();let a;i===".xlsx"||i===".xls"?a=await ql(t):i===".docx"||i===".doc"?a=await Vl(t):a=await kl(t);const o=i===".doc"?"application/msword":i===".xls"?"application/vnd.ms-excel":a.contentType;return await Xt.writeFile(n,a.buffer),{success:!0,path:n,filename:V.basename(n),contentType:o}}catch(r){return ie(r)}}),I.ipcMain.handle("report:government:export-save",async(e,t)=>{try{const{canceled:r,filePath:n}=await I.dialog.showSaveDialog({title:"Simpan Report Government",defaultPath:"report-government.docx",filters:[{name:"Microsoft Word (*.docx)",extensions:["docx"]},{name:"Microsoft Word 97-2003 (*.doc)",extensions:["doc"]},{name:"Microsoft Excel (*.xlsx)",extensions:["xlsx"]},{name:"Microsoft Excel 97-2003 (*.xls)",extensions:["xls"]},{name:"PDF",extensions:["pdf"]}],properties:["createDirectory","showOverwriteConfirmation"]});if(r||!n)return{success:!1,canceled:!0};const i=V.extname(n).toLowerCase();let a;i===".xlsx"||i===".xls"?a=await Wl(t):i===".docx"||i===".doc"?a=await Yl(t):a=await Ml(t);const o=i===".doc"?"application/msword":i===".xls"?"application/vnd.ms-excel":a.contentType;return await Xt.writeFile(n,a.buffer),{success:!0,path:n,filename:V.basename(n),contentType:o}}catch(r){return ie(r)}}),I.ipcMain.handle("report:jumlah-perusahaan:export-save",async(e,t)=>{try{const{canceled:r,filePath:n}=await I.dialog.showSaveDialog({title:"Simpan Report Jumlah Perusahaan",defaultPath:"report-jumlah-perusahaan.docx",filters:[{name:"Microsoft Word (*.docx)",extensions:["docx"]},{name:"Microsoft Word 97-2003 (*.doc)",extensions:["doc"]},{name:"Microsoft Excel (*.xlsx)",extensions:["xlsx"]},{name:"Microsoft Excel 97-2003 (*.xls)",extensions:["xls"]},{name:"PDF",extensions:["pdf"]}],properties:["createDirectory","showOverwriteConfirmation"]});if(r||!n)return{success:!1,canceled:!0};const i=V.extname(n).toLowerCase();let a;i===".xlsx"||i===".xls"?a=await Gl(t):i===".docx"||i===".doc"?a=await zl(t):a=await Bl(t);const o=i===".doc"?"application/msword":i===".xls"?"application/vnd.ms-excel":a.contentType;return await Xt.writeFile(n,a.buffer),{success:!0,path:n,filename:V.basename(n),contentType:o}}catch(r){return ie(r)}}),I.ipcMain.handle("report:jumlah-government:export-save",async(e,t)=>{try{const{canceled:r,filePath:n}=await I.dialog.showSaveDialog({title:"Simpan Report Jumlah Government",defaultPath:"report-jumlah-government.docx",filters:[{name:"Microsoft Word (*.docx)",extensions:["docx"]},{name:"Microsoft Word 97-2003 (*.doc)",extensions:["doc"]},{name:"Microsoft Excel (*.xlsx)",extensions:["xlsx"]},{name:"Microsoft Excel 97-2003 (*.xls)",extensions:["xls"]},{name:"PDF",extensions:["pdf"]}],properties:["createDirectory","showOverwriteConfirmation"]});if(r||!n)return{success:!1,canceled:!0};const i=V.extname(n).toLowerCase();let a;i===".xlsx"||i===".xls"?a=await Hl(t):i===".docx"||i===".doc"?a=await Xl(t):a=await jl(t);const o=i===".doc"?"application/msword":i===".xls"?"application/vnd.ms-excel":a.contentType;return await Xt.writeFile(n,a.buffer),{success:!0,path:n,filename:V.basename(n),contentType:o}}catch(r){return ie(r)}})}const Ia=V.dirname(wd.fileURLToPath(typeof document>"u"?require("url").pathToFileURL(__filename).href:Ni&&Ni.tagName.toUpperCase()==="SCRIPT"&&Ni.src||new URL("main/index.cjs",document.baseURI).href));function _b(){const e=V.resolve(Ia,"..");if(V.basename(e)==="dist-electron")return V.resolve(e,"..");const t=V.resolve(Ia,"..","..");return V.basename(t)==="electron"?V.resolve(t,".."):V.resolve(e)}const fn=_b();process.env.APP_ROOT=fn;const mo=process.env.VITE_DEV_SERVER_URL,cr=V.join(fn,"dist-electron"),go=V.join(fn,"dist");process.env.VITE_PUBLIC=mo?V.join(fn,"public"):go;const bb=[V.join(cr,"preload/index.js"),V.join(cr,"preload/index.cjs"),V.join(cr,"preload.js"),V.join(cr,"preload.mjs"),V.join(Ia,"..","preload.mjs")],Sb=bb.find(e=>pa.existsSync(e))??V.join(cr,"preload/index.js"),Tb={devServerUrl:mo,rendererDist:go,preload:Sb,publicDir:process.env.VITE_PUBLIC??V.join(fn,"public")};let Je=null;const Te={status:"idle"};function df(){return Je=j_(Tb),Je}function Ab(){if(!I.app.isPackaged)return;it.autoUpdater.autoDownload=!0,it.autoUpdater.autoInstallOnAppQuit=!0,it.autoUpdater.on("error",t=>{const r=t==null?"unknown":t.message;Te.status="error",Te.message=r,console.log("Auto update error:",r)}),it.autoUpdater.on("update-available",()=>{Te.status="available",Te.message=void 0,console.log("Auto update available. Downloading in background.")}),it.autoUpdater.on("update-not-available",()=>{Te.status="not-available",Te.message=void 0,console.log("Auto update not available.")}),it.autoUpdater.on("download-progress",()=>{Te.status="downloading",Te.message=void 0}),it.autoUpdater.on("update-downloaded",()=>{Te.status="downloaded",Te.message=void 0,console.log("Auto update downloaded. Will install on app quit.")}),Te.status="checking",Te.message=void 0,it.autoUpdater.checkForUpdates().catch(t=>{Te.status="error",console.log("Auto update check failed:",t==null?"unknown":t.message)});const e=6*60*60*1e3;setInterval(()=>{Te.status="checking",Te.message=void 0,it.autoUpdater.checkForUpdates().catch(t=>{Te.status="error",console.log("Auto update check failed:",t==null?"unknown":t.message)})},e)}function Cb(){I.ipcMain.handle("app:getInfo",()=>({version:I.app.getVersion(),update:{...Te}}))}I.app.whenReady().then(()=>{I.Menu.setApplicationMenu(null),cb(),db(),Eb(),vb(),Cb(),Ab(),df(),I.globalShortcut.register("CommandOrControl+Shift+I",()=>{Je!=null&&Je.webContents&&Je.webContents.toggleDevTools()}),I.globalShortcut.register("F12",()=>{Je!=null&&Je.webContents&&Je.webContents.toggleDevTools()})});I.app.on("activate",()=>{I.BrowserWindow.getAllWindows().length===0&&df()});I.app.on("window-all-closed",()=>{process.platform!=="darwin"&&(I.app.quit(),Je=null)});I.app.on("will-quit",()=>{I.globalShortcut.unregisterAll()});exports.MAIN_DIST=cr;exports.RENDERER_DIST=go;exports.VITE_DEV_SERVER_URL=mo;
